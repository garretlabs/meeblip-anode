
AVRASM ver. 2.1.57  E:\Anode+LCD_v2.2\Anode+LCD_v2\anode.asm Sun May 15 11:44:54 2016

[builtin](2): Including file 'C:\Programmi\Atmel\Atmel Toolchain\AVR Assembler\Native\2.1.1175\avrassembler\Include\m32Adef.inc'
E:\Anode+LCD_v2.2\Anode+LCD_v2\anode.asm(70): Including file 'E:\Anode+LCD_v2.2\Anode+LCD_v2\variable_definitions.inc'
E:\Anode+LCD_v2.2\Anode+LCD_v2\variable_definitions.inc(31): warning: Register r30 already defined by the .DEF directive
E:\Anode+LCD_v2.2\Anode+LCD_v2\anode.asm(70): 'E:\Anode+LCD_v2.2\Anode+LCD_v2\variable_definitions.inc' included form here
E:\Anode+LCD_v2.2\Anode+LCD_v2\variable_definitions.inc(32): warning: Register r31 already defined by the .DEF directive
E:\Anode+LCD_v2.2\Anode+LCD_v2\anode.asm(70): 'E:\Anode+LCD_v2.2\Anode+LCD_v2\variable_definitions.inc' included form here
E:\Anode+LCD_v2.2\Anode+LCD_v2\anode.asm(84): Including file 'E:\Anode+LCD_v2.2\Anode+LCD_v2\lookup_tables.inc'
E:\Anode+LCD_v2.2\Anode+LCD_v2\anode.asm(102): Including file 'E:\Anode+LCD_v2.2\Anode+LCD_v2\sample_generation.inc'
E:\Anode+LCD_v2.2\Anode+LCD_v2\sample_generation.inc(396): Including file 'E:\Anode+LCD_v2.2\Anode+LCD_v2\digital_filter.inc'
E:\Anode+LCD_v2.2\Anode+LCD_v2\anode.asm(111): Including file 'E:\Anode+LCD_v2.2\Anode+LCD_v2\midi_in.inc'
E:\Anode+LCD_v2.2\Anode+LCD_v2\anode.asm(137): Including file 'E:\Anode+LCD_v2.2\Anode+LCD_v2\subroutines.inc'
E:\Anode+LCD_v2.2\Anode+LCD_v2\anode.asm(138): Including file 'E:\Anode+LCD_v2.2\Anode+LCD_v2\LCD.inc'
E:\Anode+LCD_v2.2\Anode+LCD_v2\LCD.inc(8): Including file 'E:\Anode+LCD_v2.2\Anode+LCD_v2\AsciiConversion.inc'
E:\Anode+LCD_v2.2\Anode+LCD_v2\AsciiConversion.inc(6): warning: Register r16 already defined by the .DEF directive
E:\Anode+LCD_v2.2\Anode+LCD_v2\LCD.inc(8): 'E:\Anode+LCD_v2.2\Anode+LCD_v2\AsciiConversion.inc' included form here
E:\Anode+LCD_v2.2\Anode+LCD_v2\anode.asm(138): 'E:\Anode+LCD_v2.2\Anode+LCD_v2\LCD.inc' included form here
E:\Anode+LCD_v2.2\Anode+LCD_v2\AsciiConversion.inc(7): warning: Register r17 already defined by the .DEF directive
E:\Anode+LCD_v2.2\Anode+LCD_v2\LCD.inc(8): 'E:\Anode+LCD_v2.2\Anode+LCD_v2\AsciiConversion.inc' included form here
E:\Anode+LCD_v2.2\Anode+LCD_v2\anode.asm(138): 'E:\Anode+LCD_v2.2\Anode+LCD_v2\LCD.inc' included form here
E:\Anode+LCD_v2.2\Anode+LCD_v2\AsciiConversion.inc(8): warning: Register r18 already defined by the .DEF directive
E:\Anode+LCD_v2.2\Anode+LCD_v2\LCD.inc(8): 'E:\Anode+LCD_v2.2\Anode+LCD_v2\AsciiConversion.inc' included form here
E:\Anode+LCD_v2.2\Anode+LCD_v2\anode.asm(138): 'E:\Anode+LCD_v2.2\Anode+LCD_v2\LCD.inc' included form here
E:\Anode+LCD_v2.2\Anode+LCD_v2\AsciiConversion.inc(9): warning: Register r19 already defined by the .DEF directive
E:\Anode+LCD_v2.2\Anode+LCD_v2\LCD.inc(8): 'E:\Anode+LCD_v2.2\Anode+LCD_v2\AsciiConversion.inc' included form here
E:\Anode+LCD_v2.2\Anode+LCD_v2\anode.asm(138): 'E:\Anode+LCD_v2.2\Anode+LCD_v2\LCD.inc' included form here
E:\Anode+LCD_v2.2\Anode+LCD_v2\anode.asm(155): Including file 'E:\Anode+LCD_v2.2\Anode+LCD_v2\initialize.inc'
E:\Anode+LCD_v2.2\Anode+LCD_v2\anode.asm(166): Including file 'E:\Anode+LCD_v2.2\Anode+LCD_v2\scan_switches.inc'
E:\Anode+LCD_v2.2\Anode+LCD_v2\anode.asm(173): Including file 'E:\Anode+LCD_v2.2\Anode+LCD_v2\scan_knobs.inc'
E:\Anode+LCD_v2.2\Anode+LCD_v2\anode.asm(218): Including file 'E:\Anode+LCD_v2.2\Anode+LCD_v2\lfo.inc'
E:\Anode+LCD_v2.2\Anode+LCD_v2\anode.asm(226): Including file 'E:\Anode+LCD_v2.2\Anode+LCD_v2\envelope.inc'
E:\Anode+LCD_v2.2\Anode+LCD_v2\anode.asm(234): Including file 'E:\Anode+LCD_v2.2\Anode+LCD_v2\note_handler.inc'
E:\Anode+LCD_v2.2\Anode+LCD_v2\anode.asm(243): Including file 'E:\Anode+LCD_v2.2\Anode+LCD_v2\filter_modulation.inc'
E:\Anode+LCD_v2.2\Anode+LCD_v2\anode.asm(252): Including file 'E:\Anode+LCD_v2.2\Anode+LCD_v2\dca_output.inc'
E:\Anode+LCD_v2.2\Anode+LCD_v2\anode.asm(297): Including file 'E:\Anode+LCD_v2.2\Anode+LCD_v2\wavetables.inc'
                 
                 
                 
                 ;***** Created: 2011-02-09 12:03 ******* Source: ATmega32A.xml ***********
                 ;*************************************************************************
                 ;* A P P L I C A T I O N   N O T E   F O R   T H E   A V R   F A M I L Y
                 ;* 
                 ;* Number            : AVR000
                 ;* File Name         : "m32Adef.inc"
                 ;* Title             : Register/Bit Definitions for the ATmega32A
                 ;* Date              : 2011-02-09
                 ;* Version           : 2.35
                 ;* Support E-mail    : avr@atmel.com
                 ;* Target MCU        : ATmega32A
                 ;* 
                 ;* DESCRIPTION
                 ;* When including this file in the assembly program file, all I/O register 
                 ;* names and I/O register bit names appearing in the data book can be used.
                 ;* In addition, the six registers forming the three data pointers X, Y and 
                 ;* Z have been assigned names XL - ZH. Highest RAM address for Internal 
                 ;* SRAM is also defined 
                 ;* 
                 ;* The Register names are represented by their hexadecimal address.
                 ;* 
                 ;* The Register Bit names are represented by their bit number (0-7).
                 ;* 
                 ;* Please observe the difference in using the bit names with instructions
                 ;* such as "sbr"/"cbr" (set/clear bit in register) and "sbrs"/"sbrc"
                 ;* (skip if bit in register set/cleared). The following example illustrates
                 ;* this:
                 ;* 
                 ;* in    r16,PORTB             ;read PORTB latch
                 ;* sbr   r16,(1<<PB6)+(1<<PB5) ;set PB6 and PB5 (use masks, not bit#)
                 ;* out   PORTB,r16             ;output to PORTB
                 ;* 
                 ;* in    r16,TIFR              ;read the Timer Interrupt Flag Register
                 ;* sbrc  r16,TOV0              ;test the overflow flag (use bit#)
                 ;* rjmp  TOV0_is_set           ;jump if set
                 ;* ...                         ;otherwise do something else
                 ;*************************************************************************
                 
                 #ifndef _M32ADEF_INC_
                 #define _M32ADEF_INC_
                 
                 
                 #pragma partinc 0
                 
                 ; ***** SPECIFY DEVICE ***************************************************
                 .device ATmega32A
                 #pragma AVRPART ADMIN PART_NAME ATmega32A
                 .equ	SIGNATURE_000	= 0x1e
                 .equ	SIGNATURE_001	= 0x95
                 .equ	SIGNATURE_002	= 0x02
                 
                 #pragma AVRPART CORE CORE_VERSION V2E
                 
                 
                 ; ***** I/O REGISTER DEFINITIONS *****************************************
                 ; NOTE:
                 ; Definitions marked "MEMORY MAPPED"are extended I/O ports
                 ; and cannot be used with IN/OUT instructions
                 .equ	SREG	= 0x3f
                 .equ	SPL	= 0x3d
                 .equ	SPH	= 0x3e
                 .equ	OCR0	= 0x3c
                 .equ	GICR	= 0x3b
                 .equ	GIFR	= 0x3a
                 .equ	TIMSK	= 0x39
                 .equ	TIFR	= 0x38
                 .equ	SPMCR	= 0x37
                 .equ	TWCR	= 0x36
                 .equ	MCUCR	= 0x35
                 .equ	MCUCSR	= 0x34
                 .equ	TCCR0	= 0x33
                 .equ	TCNT0	= 0x32
                 .equ	OSCCAL	= 0x31
                 .equ	OCDR	= 0x31
                 .equ	SFIOR	= 0x30
                 .equ	TCCR1A	= 0x2f
                 .equ	TCCR1B	= 0x2e
                 .equ	TCNT1L	= 0x2c
                 .equ	TCNT1H	= 0x2d
                 .equ	OCR1AL	= 0x2a
                 .equ	OCR1AH	= 0x2b
                 .equ	OCR1BL	= 0x28
                 .equ	OCR1BH	= 0x29
                 .equ	ICR1L	= 0x26
                 .equ	ICR1H	= 0x27
                 .equ	TCCR2	= 0x25
                 .equ	TCNT2	= 0x24
                 .equ	OCR2	= 0x23
                 .equ	ASSR	= 0x22
                 .equ	WDTCR	= 0x21
                 .equ	UBRRH	= 0x20
                 .equ	UCSRC	= 0x20
                 .equ	EEARL	= 0x1e
                 .equ	EEARH	= 0x1f
                 .equ	EEDR	= 0x1d
                 .equ	EECR	= 0x1c
                 .equ	PORTA	= 0x1b
                 .equ	DDRA	= 0x1a
                 .equ	PINA	= 0x19
                 .equ	PORTB	= 0x18
                 .equ	DDRB	= 0x17
                 .equ	PINB	= 0x16
                 .equ	PORTC	= 0x15
                 .equ	DDRC	= 0x14
                 .equ	PINC	= 0x13
                 .equ	PORTD	= 0x12
                 .equ	DDRD	= 0x11
                 .equ	PIND	= 0x10
                 .equ	SPDR	= 0x0f
                 .equ	SPSR	= 0x0e
                 .equ	SPCR	= 0x0d
                 .equ	UDR	= 0x0c
                 .equ	UCSRA	= 0x0b
                 .equ	UCSRB	= 0x0a
                 .equ	UBRRL	= 0x09
                 .equ	ACSR	= 0x08
                 .equ	ADMUX	= 0x07
                 .equ	ADCSRA	= 0x06
                 .equ	ADCH	= 0x05
                 .equ	ADCL	= 0x04
                 .equ	TWDR	= 0x03
                 .equ	TWAR	= 0x02
                 .equ	TWSR	= 0x01
                 .equ	TWBR	= 0x00
                 
                 
                 ; ***** BIT DEFINITIONS **************************************************
                 
                 ; ***** EEPROM ***********************
                 ; EEDR - EEPROM Data Register
                 .equ	EEDR0	= 0	; EEPROM Data Register bit 0
                 .equ	EEDR1	= 1	; EEPROM Data Register bit 1
                 .equ	EEDR2	= 2	; EEPROM Data Register bit 2
                 .equ	EEDR3	= 3	; EEPROM Data Register bit 3
                 .equ	EEDR4	= 4	; EEPROM Data Register bit 4
                 .equ	EEDR5	= 5	; EEPROM Data Register bit 5
                 .equ	EEDR6	= 6	; EEPROM Data Register bit 6
                 .equ	EEDR7	= 7	; EEPROM Data Register bit 7
                 
                 ; EECR - EEPROM Control Register
                 .equ	EERE	= 0	; EEPROM Read Enable
                 .equ	EEWE	= 1	; EEPROM Write Enable
                 .equ	EEMWE	= 2	; EEPROM Master Write Enable
                 .equ	EERIE	= 3	; EEPROM Ready Interrupt Enable
                 
                 
                 ; ***** WATCHDOG *********************
                 ; WDTCR - Watchdog Timer Control Register
                 .equ	WDP0	= 0	; Watch Dog Timer Prescaler bit 0
                 .equ	WDP1	= 1	; Watch Dog Timer Prescaler bit 1
                 .equ	WDP2	= 2	; Watch Dog Timer Prescaler bit 2
                 .equ	WDE	= 3	; Watch Dog Enable
                 .equ	WDTOE	= 4	; RW
                 .equ	WDDE	= WDTOE	; For compatibility
                 
                 
                 ; ***** EXTERNAL_INTERRUPT ***********
                 ; GICR - General Interrupt Control Register
                 .equ	GIMSK	= GICR	; For compatibility
                 .equ	IVCE	= 0	; Interrupt Vector Change Enable
                 .equ	IVSEL	= 1	; Interrupt Vector Select
                 .equ	INT2	= 5	; External Interrupt Request 2 Enable
                 .equ	INT0	= 6	; External Interrupt Request 0 Enable
                 .equ	INT1	= 7	; External Interrupt Request 1 Enable
                 
                 ; GIFR - General Interrupt Flag Register
                 .equ	INTF2	= 5	; External Interrupt Flag 2
                 .equ	INTF0	= 6	; External Interrupt Flag 0
                 .equ	INTF1	= 7	; External Interrupt Flag 1
                 
                 ; MCUCR - General Interrupt Control Register
                 .equ	ISC00	= 0	; Interrupt Sense Control 0 Bit 0
                 .equ	ISC01	= 1	; Interrupt Sense Control 0 Bit 1
                 .equ	ISC10	= 2	; Interrupt Sense Control 1 Bit 0
                 .equ	ISC11	= 3	; Interrupt Sense Control 1 Bit 1
                 
                 ; MCUCSR - MCU Control And Status Register
                 .equ	ISC2	= 6	; Interrupt Sense Control 2
                 
                 
                 ; ***** TIMER_COUNTER_0 **************
                 ; TCCR0 - Timer/Counter Control Register
                 .equ	CS00	= 0	; Clock Select 1
                 .equ	CS01	= 1	; Clock Select 1
                 .equ	CS02	= 2	; Clock Select 2
                 .equ	WGM01	= 3	; Waveform Generation Mode 1
                 .equ	CTC0	= WGM01	; For compatibility
                 .equ	COM00	= 4	; Compare match Output Mode 0
                 .equ	COM01	= 5	; Compare Match Output Mode 1
                 .equ	WGM00	= 6	; Waveform Generation Mode
                 .equ	PWM0	= WGM00	; For compatibility
                 .equ	FOC0	= 7	; Force Output Compare
                 
                 ; TCNT0 - Timer/Counter Register
                 .equ	TCNT0_0	= 0	; 
                 .equ	TCNT0_1	= 1	; 
                 .equ	TCNT0_2	= 2	; 
                 .equ	TCNT0_3	= 3	; 
                 .equ	TCNT0_4	= 4	; 
                 .equ	TCNT0_5	= 5	; 
                 .equ	TCNT0_6	= 6	; 
                 .equ	TCNT0_7	= 7	; 
                 
                 ; OCR0 - Output Compare Register
                 .equ	OCR0_0	= 0	; 
                 .equ	OCR0_1	= 1	; 
                 .equ	OCR0_2	= 2	; 
                 .equ	OCR0_3	= 3	; 
                 .equ	OCR0_4	= 4	; 
                 .equ	OCR0_5	= 5	; 
                 .equ	OCR0_6	= 6	; 
                 .equ	OCR0_7	= 7	; 
                 
                 ; TIMSK - Timer/Counter Interrupt Mask Register
                 .equ	TOIE0	= 0	; Timer/Counter0 Overflow Interrupt Enable
                 .equ	OCIE0	= 1	; Timer/Counter0 Output Compare Match Interrupt register
                 
                 ; TIFR - Timer/Counter Interrupt Flag register
                 .equ	TOV0	= 0	; Timer/Counter0 Overflow Flag
                 .equ	OCF0	= 1	; Output Compare Flag 0
                 
                 
                 ; ***** TIMER_COUNTER_2 **************
                 ; TIMSK - Timer/Counter Interrupt Mask register
                 .equ	TOIE2	= 6	; Timer/Counter2 Overflow Interrupt Enable
                 .equ	OCIE2	= 7	; Timer/Counter2 Output Compare Match Interrupt Enable
                 
                 ; TIFR - Timer/Counter Interrupt Flag Register
                 .equ	TOV2	= 6	; Timer/Counter2 Overflow Flag
                 .equ	OCF2	= 7	; Output Compare Flag 2
                 
                 ; TCCR2 - Timer/Counter2 Control Register
                 .equ	CS20	= 0	; Clock Select bit 0
                 .equ	CS21	= 1	; Clock Select bit 1
                 .equ	CS22	= 2	; Clock Select bit 2
                 .equ	WGM21	= 3	; Clear Timer/Counter2 on Compare Match
                 .equ	CTC2	= WGM21	; For compatibility
                 .equ	COM20	= 4	; Compare Output Mode bit 0
                 .equ	COM21	= 5	; Compare Output Mode bit 1
                 .equ	WGM20	= 6	; Pulse Width Modulator Enable
                 .equ	PWM2	= WGM20	; For compatibility
                 .equ	FOC2	= 7	; Force Output Compare
                 
                 ; TCNT2 - Timer/Counter2
                 .equ	TCNT2_0	= 0	; Timer/Counter 2 bit 0
                 .equ	TCNT2_1	= 1	; Timer/Counter 2 bit 1
                 .equ	TCNT2_2	= 2	; Timer/Counter 2 bit 2
                 .equ	TCNT2_3	= 3	; Timer/Counter 2 bit 3
                 .equ	TCNT2_4	= 4	; Timer/Counter 2 bit 4
                 .equ	TCNT2_5	= 5	; Timer/Counter 2 bit 5
                 .equ	TCNT2_6	= 6	; Timer/Counter 2 bit 6
                 .equ	TCNT2_7	= 7	; Timer/Counter 2 bit 7
                 
                 ; OCR2 - Timer/Counter2 Output Compare Register
                 .equ	OCR2_0	= 0	; Timer/Counter2 Output Compare Register Bit 0
                 .equ	OCR2_1	= 1	; Timer/Counter2 Output Compare Register Bit 1
                 .equ	OCR2_2	= 2	; Timer/Counter2 Output Compare Register Bit 2
                 .equ	OCR2_3	= 3	; Timer/Counter2 Output Compare Register Bit 3
                 .equ	OCR2_4	= 4	; Timer/Counter2 Output Compare Register Bit 4
                 .equ	OCR2_5	= 5	; Timer/Counter2 Output Compare Register Bit 5
                 .equ	OCR2_6	= 6	; Timer/Counter2 Output Compare Register Bit 6
                 .equ	OCR2_7	= 7	; Timer/Counter2 Output Compare Register Bit 7
                 
                 ; ASSR - Asynchronous Status Register
                 .equ	TCR2UB	= 0	; Timer/counter Control Register2 Update Busy
                 .equ	OCR2UB	= 1	; Output Compare Register2 Update Busy
                 .equ	TCN2UB	= 2	; Timer/Counter2 Update Busy
                 .equ	AS2	= 3	; Asynchronous Timer/counter2
                 
                 
                 ; ***** TIMER_COUNTER_1 **************
                 ; TIMSK - Timer/Counter Interrupt Mask Register
                 .equ	TOIE1	= 2	; Timer/Counter1 Overflow Interrupt Enable
                 .equ	OCIE1B	= 3	; Timer/Counter1 Output CompareB Match Interrupt Enable
                 .equ	OCIE1A	= 4	; Timer/Counter1 Output CompareA Match Interrupt Enable
                 .equ	TICIE1	= 5	; Timer/Counter1 Input Capture Interrupt Enable
                 
                 ; TIFR - Timer/Counter Interrupt Flag register
                 .equ	TOV1	= 2	; Timer/Counter1 Overflow Flag
                 .equ	OCF1B	= 3	; Output Compare Flag 1B
                 .equ	OCF1A	= 4	; Output Compare Flag 1A
                 .equ	ICF1	= 5	; Input Capture Flag 1
                 
                 ; TCCR1A - Timer/Counter1 Control Register A
                 .equ	WGM10	= 0	; Waveform Generation Mode
                 .equ	PWM10	= WGM10	; For compatibility
                 .equ	WGM11	= 1	; Waveform Generation Mode
                 .equ	PWM11	= WGM11	; For compatibility
                 .equ	FOC1B	= 2	; Force Output Compare 1B
                 .equ	FOC1A	= 3	; Force Output Compare 1A
                 .equ	COM1B0	= 4	; Compare Output Mode 1B, bit 0
                 .equ	COM1B1	= 5	; Compare Output Mode 1B, bit 1
                 .equ	COM1A0	= 6	; Compare Ouput Mode 1A, bit 0
                 .equ	COM1A1	= 7	; Compare Output Mode 1A, bit 1
                 
                 ; TCCR1B - Timer/Counter1 Control Register B
                 .equ	CS10	= 0	; Prescaler source of Timer/Counter 1
                 .equ	CS11	= 1	; Prescaler source of Timer/Counter 1
                 .equ	CS12	= 2	; Prescaler source of Timer/Counter 1
                 .equ	WGM12	= 3	; Waveform Generation Mode
                 .equ	CTC10	= WGM12	; For compatibility
                 .equ	CTC1	= WGM12	; For compatibility
                 .equ	WGM13	= 4	; Waveform Generation Mode
                 .equ	CTC11	= WGM13	; For compatibility
                 .equ	ICES1	= 6	; Input Capture 1 Edge Select
                 .equ	ICNC1	= 7	; Input Capture 1 Noise Canceler
                 
                 
                 ; ***** SPI **************************
                 ; SPDR - SPI Data Register
                 .equ	SPDR0	= 0	; SPI Data Register bit 0
                 .equ	SPDR1	= 1	; SPI Data Register bit 1
                 .equ	SPDR2	= 2	; SPI Data Register bit 2
                 .equ	SPDR3	= 3	; SPI Data Register bit 3
                 .equ	SPDR4	= 4	; SPI Data Register bit 4
                 .equ	SPDR5	= 5	; SPI Data Register bit 5
                 .equ	SPDR6	= 6	; SPI Data Register bit 6
                 .equ	SPDR7	= 7	; SPI Data Register bit 7
                 
                 ; SPSR - SPI Status Register
                 .equ	SPI2X	= 0	; Double SPI Speed Bit
                 .equ	WCOL	= 6	; Write Collision Flag
                 .equ	SPIF	= 7	; SPI Interrupt Flag
                 
                 ; SPCR - SPI Control Register
                 .equ	SPR0	= 0	; SPI Clock Rate Select 0
                 .equ	SPR1	= 1	; SPI Clock Rate Select 1
                 .equ	CPHA	= 2	; Clock Phase
                 .equ	CPOL	= 3	; Clock polarity
                 .equ	MSTR	= 4	; Master/Slave Select
                 .equ	DORD	= 5	; Data Order
                 .equ	SPE	= 6	; SPI Enable
                 .equ	SPIE	= 7	; SPI Interrupt Enable
                 
                 
                 ; ***** USART ************************
                 ; UDR - USART I/O Data Register
                 .equ	UDR0	= 0	; USART I/O Data Register bit 0
                 .equ	UDR1	= 1	; USART I/O Data Register bit 1
                 .equ	UDR2	= 2	; USART I/O Data Register bit 2
                 .equ	UDR3	= 3	; USART I/O Data Register bit 3
                 .equ	UDR4	= 4	; USART I/O Data Register bit 4
                 .equ	UDR5	= 5	; USART I/O Data Register bit 5
                 .equ	UDR6	= 6	; USART I/O Data Register bit 6
                 .equ	UDR7	= 7	; USART I/O Data Register bit 7
                 
                 ; UCSRA - USART Control and Status Register A
                 .equ	USR	= UCSRA	; For compatibility
                 .equ	MPCM	= 0	; Multi-processor Communication Mode
                 .equ	U2X	= 1	; Double the USART transmission speed
                 .equ	UPE	= 2	; Parity Error
                 .equ	PE	= UPE	; For compatibility
                 .equ	DOR	= 3	; Data overRun
                 .equ	FE	= 4	; Framing Error
                 .equ	UDRE	= 5	; USART Data Register Empty
                 .equ	TXC	= 6	; USART Transmitt Complete
                 .equ	RXC	= 7	; USART Receive Complete
                 
                 ; UCSRB - USART Control and Status Register B
                 .equ	UCR	= UCSRB	; For compatibility
                 .equ	TXB8	= 0	; Transmit Data Bit 8
                 .equ	RXB8	= 1	; Receive Data Bit 8
                 .equ	UCSZ2	= 2	; Character Size
                 .equ	CHR9	= UCSZ2	; For compatibility
                 .equ	TXEN	= 3	; Transmitter Enable
                 .equ	RXEN	= 4	; Receiver Enable
                 .equ	UDRIE	= 5	; USART Data register Empty Interrupt Enable
                 .equ	TXCIE	= 6	; TX Complete Interrupt Enable
                 .equ	RXCIE	= 7	; RX Complete Interrupt Enable
                 
                 ; UCSRC - USART Control and Status Register C
                 .equ	UCPOL	= 0	; Clock Polarity
                 .equ	UCSZ0	= 1	; Character Size
                 .equ	UCSZ1	= 2	; Character Size
                 .equ	USBS	= 3	; Stop Bit Select
                 .equ	UPM0	= 4	; Parity Mode Bit 0
                 .equ	UPM1	= 5	; Parity Mode Bit 1
                 .equ	UMSEL	= 6	; USART Mode Select
                 .equ	URSEL	= 7	; Register Select
                 
                 .equ	UBRRHI	= UBRRH	; For compatibility
                 
                 ; ***** ANALOG_COMPARATOR ************
                 ; SFIOR - Special Function IO Register
                 .equ	ACME	= 3	; Analog Comparator Multiplexer Enable
                 
                 ; ACSR - Analog Comparator Control And Status Register
                 .equ	ACIS0	= 0	; Analog Comparator Interrupt Mode Select bit 0
                 .equ	ACIS1	= 1	; Analog Comparator Interrupt Mode Select bit 1
                 .equ	ACIC	= 2	; Analog Comparator Input Capture Enable
                 .equ	ACIE	= 3	; Analog Comparator Interrupt Enable
                 .equ	ACI	= 4	; Analog Comparator Interrupt Flag
                 .equ	ACO	= 5	; Analog Compare Output
                 .equ	ACBG	= 6	; Analog Comparator Bandgap Select
                 .equ	ACD	= 7	; Analog Comparator Disable
                 
                 
                 ; ***** AD_CONVERTER *****************
                 ; ADMUX - The ADC multiplexer Selection Register
                 .equ	MUX0	= 0	; Analog Channel and Gain Selection Bits
                 .equ	MUX1	= 1	; Analog Channel and Gain Selection Bits
                 .equ	MUX2	= 2	; Analog Channel and Gain Selection Bits
                 .equ	MUX3	= 3	; Analog Channel and Gain Selection Bits
                 .equ	MUX4	= 4	; Analog Channel and Gain Selection Bits
                 .equ	ADLAR	= 5	; Left Adjust Result
                 .equ	REFS0	= 6	; Reference Selection Bit 0
                 .equ	REFS1	= 7	; Reference Selection Bit 1
                 
                 ; ADCSRA - The ADC Control and Status register
                 .equ	ADCSR	= ADCSRA	; For compatibility
                 .equ	ADPS0	= 0	; ADC  Prescaler Select Bits
                 .equ	ADPS1	= 1	; ADC  Prescaler Select Bits
                 .equ	ADPS2	= 2	; ADC  Prescaler Select Bits
                 .equ	ADIE	= 3	; ADC Interrupt Enable
                 .equ	ADIF	= 4	; ADC Interrupt Flag
                 .equ	ADATE	= 5	; When this bit is written to one,the Timer/Counter2 prescaler will be reset.The bit will be cleared by hardware after the operation is performed.Writing a zero to this bit will have no effect.This bit will always be read as zero if Timer/C                 ounter2 is clocked by the internal CPU clock.If this bit is written when Timer/Counter2 is operating in asynchronous mode,the bit will remain one until the prescaler has been reset.
                 .equ	ADFR	= ADATE	; For compatibility
                 .equ	ADSC	= 6	; ADC Start Conversion
                 .equ	ADEN	= 7	; ADC Enable
                 
                 ; ADCH - ADC Data Register High Byte
                 .equ	ADCH0	= 0	; ADC Data Register High Byte Bit 0
                 .equ	ADCH1	= 1	; ADC Data Register High Byte Bit 1
                 .equ	ADCH2	= 2	; ADC Data Register High Byte Bit 2
                 .equ	ADCH3	= 3	; ADC Data Register High Byte Bit 3
                 .equ	ADCH4	= 4	; ADC Data Register High Byte Bit 4
                 .equ	ADCH5	= 5	; ADC Data Register High Byte Bit 5
                 .equ	ADCH6	= 6	; ADC Data Register High Byte Bit 6
                 .equ	ADCH7	= 7	; ADC Data Register High Byte Bit 7
                 
                 ; ADCL - ADC Data Register Low Byte
                 .equ	ADCL0	= 0	; ADC Data Register Low Byte Bit 0
                 .equ	ADCL1	= 1	; ADC Data Register Low Byte Bit 1
                 .equ	ADCL2	= 2	; ADC Data Register Low Byte Bit 2
                 .equ	ADCL3	= 3	; ADC Data Register Low Byte Bit 3
                 .equ	ADCL4	= 4	; ADC Data Register Low Byte Bit 4
                 .equ	ADCL5	= 5	; ADC Data Register Low Byte Bit 5
                 .equ	ADCL6	= 6	; ADC Data Register Low Byte Bit 6
                 .equ	ADCL7	= 7	; ADC Data Register Low Byte Bit 7
                 
                 ; SFIOR - Special Function IO Register
                 .equ	ADTS0	= 5	; ADC Auto Trigger Source 0
                 .equ	ADTS1	= 6	; ADC Auto Trigger Source 1
                 .equ	ADTS2	= 7	; ADC Auto Trigger Source 2
                 
                 
                 ; ***** PORTA ************************
                 ; PORTA - Port A Data Register
                 .equ	PORTA0	= 0	; Port A Data Register bit 0
                 .equ	PA0	= 0	; For compatibility
                 .equ	PORTA1	= 1	; Port A Data Register bit 1
                 .equ	PA1	= 1	; For compatibility
                 .equ	PORTA2	= 2	; Port A Data Register bit 2
                 .equ	PA2	= 2	; For compatibility
                 .equ	PORTA3	= 3	; Port A Data Register bit 3
                 .equ	PA3	= 3	; For compatibility
                 .equ	PORTA4	= 4	; Port A Data Register bit 4
                 .equ	PA4	= 4	; For compatibility
                 .equ	PORTA5	= 5	; Port A Data Register bit 5
                 .equ	PA5	= 5	; For compatibility
                 .equ	PORTA6	= 6	; Port A Data Register bit 6
                 .equ	PA6	= 6	; For compatibility
                 .equ	PORTA7	= 7	; Port A Data Register bit 7
                 .equ	PA7	= 7	; For compatibility
                 
                 ; DDRA - Port A Data Direction Register
                 .equ	DDA0	= 0	; Data Direction Register, Port A, bit 0
                 .equ	DDA1	= 1	; Data Direction Register, Port A, bit 1
                 .equ	DDA2	= 2	; Data Direction Register, Port A, bit 2
                 .equ	DDA3	= 3	; Data Direction Register, Port A, bit 3
                 .equ	DDA4	= 4	; Data Direction Register, Port A, bit 4
                 .equ	DDA5	= 5	; Data Direction Register, Port A, bit 5
                 .equ	DDA6	= 6	; Data Direction Register, Port A, bit 6
                 .equ	DDA7	= 7	; Data Direction Register, Port A, bit 7
                 
                 ; PINA - Port A Input Pins
                 .equ	PINA0	= 0	; Input Pins, Port A bit 0
                 .equ	PINA1	= 1	; Input Pins, Port A bit 1
                 .equ	PINA2	= 2	; Input Pins, Port A bit 2
                 .equ	PINA3	= 3	; Input Pins, Port A bit 3
                 .equ	PINA4	= 4	; Input Pins, Port A bit 4
                 .equ	PINA5	= 5	; Input Pins, Port A bit 5
                 .equ	PINA6	= 6	; Input Pins, Port A bit 6
                 .equ	PINA7	= 7	; Input Pins, Port A bit 7
                 
                 
                 ; ***** PORTB ************************
                 ; PORTB - Port B Data Register
                 .equ	PORTB0	= 0	; Port B Data Register bit 0
                 .equ	PB0	= 0	; For compatibility
                 .equ	PORTB1	= 1	; Port B Data Register bit 1
                 .equ	PB1	= 1	; For compatibility
                 .equ	PORTB2	= 2	; Port B Data Register bit 2
                 .equ	PB2	= 2	; For compatibility
                 .equ	PORTB3	= 3	; Port B Data Register bit 3
                 .equ	PB3	= 3	; For compatibility
                 .equ	PORTB4	= 4	; Port B Data Register bit 4
                 .equ	PB4	= 4	; For compatibility
                 .equ	PORTB5	= 5	; Port B Data Register bit 5
                 .equ	PB5	= 5	; For compatibility
                 .equ	PORTB6	= 6	; Port B Data Register bit 6
                 .equ	PB6	= 6	; For compatibility
                 .equ	PORTB7	= 7	; Port B Data Register bit 7
                 .equ	PB7	= 7	; For compatibility
                 
                 ; DDRB - Port B Data Direction Register
                 .equ	DDB0	= 0	; Port B Data Direction Register bit 0
                 .equ	DDB1	= 1	; Port B Data Direction Register bit 1
                 .equ	DDB2	= 2	; Port B Data Direction Register bit 2
                 .equ	DDB3	= 3	; Port B Data Direction Register bit 3
                 .equ	DDB4	= 4	; Port B Data Direction Register bit 4
                 .equ	DDB5	= 5	; Port B Data Direction Register bit 5
                 .equ	DDB6	= 6	; Port B Data Direction Register bit 6
                 .equ	DDB7	= 7	; Port B Data Direction Register bit 7
                 
                 ; PINB - Port B Input Pins
                 .equ	PINB0	= 0	; Port B Input Pins bit 0
                 .equ	PINB1	= 1	; Port B Input Pins bit 1
                 .equ	PINB2	= 2	; Port B Input Pins bit 2
                 .equ	PINB3	= 3	; Port B Input Pins bit 3
                 .equ	PINB4	= 4	; Port B Input Pins bit 4
                 .equ	PINB5	= 5	; Port B Input Pins bit 5
                 .equ	PINB6	= 6	; Port B Input Pins bit 6
                 .equ	PINB7	= 7	; Port B Input Pins bit 7
                 
                 
                 ; ***** PORTC ************************
                 ; PORTC - Port C Data Register
                 .equ	PORTC0	= 0	; Port C Data Register bit 0
                 .equ	PC0	= 0	; For compatibility
                 .equ	PORTC1	= 1	; Port C Data Register bit 1
                 .equ	PC1	= 1	; For compatibility
                 .equ	PORTC2	= 2	; Port C Data Register bit 2
                 .equ	PC2	= 2	; For compatibility
                 .equ	PORTC3	= 3	; Port C Data Register bit 3
                 .equ	PC3	= 3	; For compatibility
                 .equ	PORTC4	= 4	; Port C Data Register bit 4
                 .equ	PC4	= 4	; For compatibility
                 .equ	PORTC5	= 5	; Port C Data Register bit 5
                 .equ	PC5	= 5	; For compatibility
                 .equ	PORTC6	= 6	; Port C Data Register bit 6
                 .equ	PC6	= 6	; For compatibility
                 .equ	PORTC7	= 7	; Port C Data Register bit 7
                 .equ	PC7	= 7	; For compatibility
                 
                 ; DDRC - Port C Data Direction Register
                 .equ	DDC0	= 0	; Port C Data Direction Register bit 0
                 .equ	DDC1	= 1	; Port C Data Direction Register bit 1
                 .equ	DDC2	= 2	; Port C Data Direction Register bit 2
                 .equ	DDC3	= 3	; Port C Data Direction Register bit 3
                 .equ	DDC4	= 4	; Port C Data Direction Register bit 4
                 .equ	DDC5	= 5	; Port C Data Direction Register bit 5
                 .equ	DDC6	= 6	; Port C Data Direction Register bit 6
                 .equ	DDC7	= 7	; Port C Data Direction Register bit 7
                 
                 ; PINC - Port C Input Pins
                 .equ	PINC0	= 0	; Port C Input Pins bit 0
                 .equ	PINC1	= 1	; Port C Input Pins bit 1
                 .equ	PINC2	= 2	; Port C Input Pins bit 2
                 .equ	PINC3	= 3	; Port C Input Pins bit 3
                 .equ	PINC4	= 4	; Port C Input Pins bit 4
                 .equ	PINC5	= 5	; Port C Input Pins bit 5
                 .equ	PINC6	= 6	; Port C Input Pins bit 6
                 .equ	PINC7	= 7	; Port C Input Pins bit 7
                 
                 
                 ; ***** PORTD ************************
                 ; PORTD - Port D Data Register
                 .equ	PORTD0	= 0	; Port D Data Register bit 0
                 .equ	PD0	= 0	; For compatibility
                 .equ	PORTD1	= 1	; Port D Data Register bit 1
                 .equ	PD1	= 1	; For compatibility
                 .equ	PORTD2	= 2	; Port D Data Register bit 2
                 .equ	PD2	= 2	; For compatibility
                 .equ	PORTD3	= 3	; Port D Data Register bit 3
                 .equ	PD3	= 3	; For compatibility
                 .equ	PORTD4	= 4	; Port D Data Register bit 4
                 .equ	PD4	= 4	; For compatibility
                 .equ	PORTD5	= 5	; Port D Data Register bit 5
                 .equ	PD5	= 5	; For compatibility
                 .equ	PORTD6	= 6	; Port D Data Register bit 6
                 .equ	PD6	= 6	; For compatibility
                 .equ	PORTD7	= 7	; Port D Data Register bit 7
                 .equ	PD7	= 7	; For compatibility
                 
                 ; DDRD - Port D Data Direction Register
                 .equ	DDD0	= 0	; Port D Data Direction Register bit 0
                 .equ	DDD1	= 1	; Port D Data Direction Register bit 1
                 .equ	DDD2	= 2	; Port D Data Direction Register bit 2
                 .equ	DDD3	= 3	; Port D Data Direction Register bit 3
                 .equ	DDD4	= 4	; Port D Data Direction Register bit 4
                 .equ	DDD5	= 5	; Port D Data Direction Register bit 5
                 .equ	DDD6	= 6	; Port D Data Direction Register bit 6
                 .equ	DDD7	= 7	; Port D Data Direction Register bit 7
                 
                 ; PIND - Port D Input Pins
                 .equ	PIND0	= 0	; Port D Input Pins bit 0
                 .equ	PIND1	= 1	; Port D Input Pins bit 1
                 .equ	PIND2	= 2	; Port D Input Pins bit 2
                 .equ	PIND3	= 3	; Port D Input Pins bit 3
                 .equ	PIND4	= 4	; Port D Input Pins bit 4
                 .equ	PIND5	= 5	; Port D Input Pins bit 5
                 .equ	PIND6	= 6	; Port D Input Pins bit 6
                 .equ	PIND7	= 7	; Port D Input Pins bit 7
                 
                 
                 ; ***** CPU **************************
                 ; SREG - Status Register
                 .equ	SREG_C	= 0	; Carry Flag
                 .equ	SREG_Z	= 1	; Zero Flag
                 .equ	SREG_N	= 2	; Negative Flag
                 .equ	SREG_V	= 3	; Two's Complement Overflow Flag
                 .equ	SREG_S	= 4	; Sign Bit
                 .equ	SREG_H	= 5	; Half Carry Flag
                 .equ	SREG_T	= 6	; Bit Copy Storage
                 .equ	SREG_I	= 7	; Global Interrupt Enable
                 
                 ; MCUCR - MCU Control Register
                 ;.equ	ISC00	= 0	; Interrupt Sense Control 0 Bit 0
                 ;.equ	ISC01	= 1	; Interrupt Sense Control 0 Bit 1
                 ;.equ	ISC10	= 2	; Interrupt Sense Control 1 Bit 0
                 ;.equ	ISC11	= 3	; Interrupt Sense Control 1 Bit 1
                 .equ	SM0	= 4	; Sleep Mode Select
                 .equ	SM1	= 5	; Sleep Mode Select
                 .equ	SM2	= 6	; Sleep Mode Select
                 .equ	SE	= 7	; Sleep Enable
                 
                 ; MCUCSR - MCU Control And Status Register
                 .equ	MCUSR	= MCUCSR	; For compatibility
                 .equ	PORF	= 0	; Power-on reset flag
                 .equ	EXTRF	= 1	; External Reset Flag
                 .equ	BORF	= 2	; Brown-out Reset Flag
                 .equ	WDRF	= 3	; Watchdog Reset Flag
                 .equ	JTRF	= 4	; JTAG Reset Flag
                 .equ	JTD	= 7	; JTAG Interface Disable
                 
                 ; OSCCAL - Oscillator Calibration Value
                 .equ	CAL0	= 0	; Oscillator Calibration Value Bit0
                 .equ	CAL1	= 1	; Oscillator Calibration Value Bit1
                 .equ	CAL2	= 2	; Oscillator Calibration Value Bit2
                 .equ	CAL3	= 3	; Oscillator Calibration Value Bit3
                 .equ	CAL4	= 4	; Oscillator Calibration Value Bit4
                 .equ	CAL5	= 5	; Oscillator Calibration Value Bit5
                 .equ	CAL6	= 6	; Oscillator Calibration Value Bit6
                 .equ	CAL7	= 7	; Oscillator Calibration Value Bit7
                 
                 ; SFIOR - Special Function IO Register
                 .equ	PSR10	= 0	; Prescaler Reset Timer/Counter1&0
                 .equ	PSR2	= 1	; Prescaler Reset Timer/Counter2
                 .equ	PUD	= 2	; Pull-up Disable
                 
                 
                 ; ***** BOOT_LOAD ********************
                 ; SPMCR - Store Program Memory Control Register
                 .equ	SPMEN	= 0	; Store Program Memory Enable
                 .equ	PGERS	= 1	; Page Erase
                 .equ	PGWRT	= 2	; Page Write
                 .equ	BLBSET	= 3	; Boot Lock Bit Set
                 .equ	RWWSRE	= 4	; Read While Write secion read enable
                 .equ	ASRE	= RWWSRE	; For compatibility
                 .equ	RWWSB	= 6	; Read While Write Section Busy
                 .equ	ASB	= RWWSB	; For compatibility
                 .equ	SPMIE	= 7	; SPM Interrupt Enable
                 
                 
                 ; ***** TWI **************************
                 ; TWBR - TWI Bit Rate register
                 .equ	TWBR0	= 0	; 
                 .equ	TWBR1	= 1	; 
                 .equ	TWBR2	= 2	; 
                 .equ	TWBR3	= 3	; 
                 .equ	TWBR4	= 4	; 
                 .equ	TWBR5	= 5	; 
                 .equ	TWBR6	= 6	; 
                 .equ	TWBR7	= 7	; 
                 
                 ; TWCR - TWI Control Register
                 .equ	TWIE	= 0	; TWI Interrupt Enable
                 .equ	TWEN	= 2	; TWI Enable Bit
                 .equ	TWWC	= 3	; TWI Write Collition Flag
                 .equ	TWSTO	= 4	; TWI Stop Condition Bit
                 .equ	TWSTA	= 5	; TWI Start Condition Bit
                 .equ	TWEA	= 6	; TWI Enable Acknowledge Bit
                 .equ	TWINT	= 7	; TWI Interrupt Flag
                 
                 ; TWSR - TWI Status Register
                 .equ	TWPS0	= 0	; TWI Prescaler bits
                 .equ	TWPS1	= 1	; TWI Prescaler bits
                 .equ	TWS3	= 3	; TWI Status
                 .equ	TWS4	= 4	; TWI Status
                 .equ	TWS5	= 5	; TWI Status
                 .equ	TWS6	= 6	; TWI Status
                 .equ	TWS7	= 7	; TWI Status
                 
                 ; TWDR - TWI Data register
                 .equ	TWD0	= 0	; TWI Data Register Bit 0
                 .equ	TWD1	= 1	; TWI Data Register Bit 1
                 .equ	TWD2	= 2	; TWI Data Register Bit 2
                 .equ	TWD3	= 3	; TWI Data Register Bit 3
                 .equ	TWD4	= 4	; TWI Data Register Bit 4
                 .equ	TWD5	= 5	; TWI Data Register Bit 5
                 .equ	TWD6	= 6	; TWI Data Register Bit 6
                 .equ	TWD7	= 7	; TWI Data Register Bit 7
                 
                 ; TWAR - TWI (Slave) Address register
                 .equ	TWGCE	= 0	; TWI General Call Recognition Enable Bit
                 .equ	TWA0	= 1	; TWI (Slave) Address register Bit 0
                 .equ	TWA1	= 2	; TWI (Slave) Address register Bit 1
                 .equ	TWA2	= 3	; TWI (Slave) Address register Bit 2
                 .equ	TWA3	= 4	; TWI (Slave) Address register Bit 3
                 .equ	TWA4	= 5	; TWI (Slave) Address register Bit 4
                 .equ	TWA5	= 6	; TWI (Slave) Address register Bit 5
                 .equ	TWA6	= 7	; TWI (Slave) Address register Bit 6
                 
                 
                 
                 ; ***** LOCKSBITS ********************************************************
                 .equ	LB1	= 0	; Lock bit
                 .equ	LB2	= 1	; Lock bit
                 .equ	BLB01	= 2	; Boot Lock bit
                 .equ	BLB02	= 3	; Boot Lock bit
                 .equ	BLB11	= 4	; Boot lock bit
                 .equ	BLB12	= 5	; Boot lock bit
                 
                 
                 ; ***** FUSES ************************************************************
                 ; LOW fuse bits
                 .equ	CKSEL0	= 0	; Select Clock Source
                 .equ	CKSEL1	= 1	; Select Clock Source
                 .equ	CKSEL2	= 2	; Select Clock Source
                 .equ	CKSEL3	= 3	; Select Clock Source
                 .equ	BODEN	= 6	; Brown out detector enable
                 .equ	BODLEVEL	= 7	; Brown out detector trigger level
                 
                 ; HIGH fuse bits
                 .equ	BOOTRST	= 0	; Select Reset Vector
                 .equ	BOOTSZ0	= 1	; Select Boot Size
                 .equ	BOOTSZ1	= 2	; Select Boot Size
                 .equ	EESAVE	= 3	; EEPROM memory is preserved through chip erase
                 .equ	SPIEN	= 5	; Enable Serial programming and Data Downloading
                 .equ	JTAGEN	= 6	; Enable JTAG
                 .equ	OCDEN	= 7	; Enable OCD
                 
                 
                 
                 ; ***** CPU REGISTER DEFINITIONS *****************************************
                 .def	XH	= r27
                 .def	XL	= r26
                 .def	YH	= r29
                 .def	YL	= r28
                 .def	ZH	= r31
                 .def	ZL	= r30
                 
                 
                 
                 ; ***** DATA MEMORY DECLARATIONS *****************************************
                 .equ	FLASHEND	= 0x3fff	; Note: Word address
                 .equ	IOEND	= 0x003f
                 .equ	SRAM_START	= 0x0060
                 .equ	SRAM_SIZE	= 2048
                 .equ	RAMEND	= 0x085f
                 .equ	XRAMEND	= 0x0000
                 .equ	E2END	= 0x03ff
                 .equ	EEPROMEND	= 0x03ff
                 .equ	EEADRBITS	= 10
                 #pragma AVRPART MEMORY PROG_FLASH 32768
                 #pragma AVRPART MEMORY EEPROM 1024
                 #pragma AVRPART MEMORY INT_SRAM SIZE 2048
                 #pragma AVRPART MEMORY INT_SRAM START_ADDR 0x60
                 
                 
                 
                 ; ***** BOOTLOADER DECLARATIONS ******************************************
                 .equ	NRWW_START_ADDR	= 0x3800
                 .equ	NRWW_STOP_ADDR	= 0x3fff
                 .equ	RWW_START_ADDR	= 0x0
                 .equ	RWW_STOP_ADDR	= 0x37ff
                 .equ	PAGESIZE	= 64
                 .equ	FIRSTBOOTSTART	= 0x3f00
                 .equ	SECONDBOOTSTART	= 0x3e00
                 .equ	THIRDBOOTSTART	= 0x3c00
                 .equ	FOURTHBOOTSTART	= 0x3800
                 .equ	SMALLBOOTSTART	= FIRSTBOOTSTART
                 .equ	LARGEBOOTSTART	= FOURTHBOOTSTART
                 
                 
                 
                 ; ***** INTERRUPT VECTORS ************************************************
                 .equ	INT0addr	= 0x0002	; External Interrupt Request 0
                 .equ	INT1addr	= 0x0004	; External Interrupt Request 1
                 .equ	INT2addr	= 0x0006	; External Interrupt Request 2
                 .equ	OC2addr	= 0x0008	; Timer/Counter2 Compare Match
                 .equ	OVF2addr	= 0x000a	; Timer/Counter2 Overflow
                 .equ	ICP1addr	= 0x000c	; Timer/Counter1 Capture Event
                 .equ	OC1Aaddr	= 0x000e	; Timer/Counter1 Compare Match A
                 .equ	OC1Baddr	= 0x0010	; Timer/Counter1 Compare Match B
                 .equ	OVF1addr	= 0x0012	; Timer/Counter1 Overflow
                 .equ	OC0addr	= 0x0014	; Timer/Counter0 Compare Match
                 .equ	OVF0addr	= 0x0016	; Timer/Counter0 Overflow
                 .equ	SPIaddr	= 0x0018	; Serial Transfer Complete
                 .equ	URXCaddr	= 0x001a	; USART, Rx Complete
                 .equ	UDREaddr	= 0x001c	; USART Data Register Empty
                 .equ	UTXCaddr	= 0x001e	; USART, Tx Complete
                 .equ	ADCCaddr	= 0x0020	; ADC Conversion Complete
                 .equ	ERDYaddr	= 0x0022	; EEPROM Ready
                 .equ	ACIaddr	= 0x0024	; Analog Comparator
                 .equ	TWIaddr	= 0x0026	; 2-wire Serial Interface
                 .equ	SPMRaddr	= 0x0028	; Store Program Memory Ready
                 
                 .equ	INT_VECTORS_SIZE	= 42	; size in words
                 
                 #endif  /* _M32ADEF_INC_ */
                 
                 
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;                    _     _  _                                _       
                 ;                   | |   | |(_)                              | |      
                 ;  ____  _____ _____| |__ | | _ ____     _____ ____   ___   __| |_____ 
                 ; |    \| ___ | ___ |  _ \| || |  _ \   (____ |  _ \ / _ \ / _  | ___ |
                 ; | | | | ____| ____| |_) ) || | |_| |  / ___ | | | | |_| ( (_| | ____|
                 ; |_|_|_|_____)_____)____/ \_)_|  __/   \_____|_| |_|\___/ \____|_____)
                 ;                              |_|                                     
                 ; 
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;
                 ;Change log
                 ;
                 ;V2.01 2014.10.29 - Added LFO Random waveform, Optional LFO Note Retriggering and Oscillator B wave select (pulse/sawtooth) as MIDI CC parameters.
                 ;V2.00 2014.07.22 - Added Wavetable mode (hold MIDI SET button for a moment at power up and the Pulse width knob selects.
                 ;					from 8 waveforms, the Pulse Sweep switch selects between Waveform Bank A and Bank B).
                 ;V1.10 2014.05.12 - Implemented more aggressive filter cutoff using hybrid analog/digital algorithm. 
                 ;V1.03 2014.03.13 - Changed MIDI Set knobs to the bottom row. Width = Channel 1 .. Depth - Channel 4. 
                 ;V1.02 2014.02.27 - Add Filter envelope modulation as MIDI CC parameter, LFO now continues during decay/release
                 ;V1.01 2014.02.25 - Implement MIDI Channel set, MIDI CC parameter control
                 ;V1.00 2014.01.14 - Initial release
                 ;
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;
                 ;	MeeBlip Contributors
                 ;
                 ;	Jarek Ziembicki	- Created the original AVRsynth, upon which this project is based.
                 ; 	Laurie Biddulph	- Worked with Jarek to translate his comments into English, ported to Atmega16
                 ;	Daniel Kruszyna	- Extended AVRsynth (several of his ideas are incorporated in MeeBlip)
                 ;  	Julian Schmidt	- Original Meeblip digital filter algorithm
                 ; 	Axel Werner		- Code optimization, bug fixes and new bandlimited waveforms 
                 ;	James Grahame 	- Meeblip Anode hardware and firmware development
                 ;
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;
                 ;	Port Mapping 
                 ;
                 ;	PA0..7		8 potentiometers
                 ;	PB5-PB7		ISP programming header / SPI communication
                 ;	PC0-PC7		Switch inputs
                 ;	PD0		    RxD (MIDI IN)
                 ;	PD1		    Power ON/MIDI LED
                 ;	PD3		    DAC CS (chip select)
                 ;	PD4			LDAC (DAC load signal)
                 ;	PD7			RAW Filter Cutoff control voltage (PWM generated)
                 ;	
                 ;
                 ;	Timers	
                 ;
                 ;	Timer0		Sample timer: (Clock /8) / 50 --> 40000 Hz
                 ;	Timer1		Time counter: CK/256		  --> TCNT1 
                 ;	Timer2		PWM generated control voltage for VCF filter cutoff 
                 ;
                 ;-------------------------------------------------------------------------------------------------------------------
                 
                                     .LIST
                                     .LISTMAC
                 
                                     .SET cpu_frequency = 16000000
                                     .SET baud_rate     = 31250
                 		            .SET KBDSCAN       = 6250	
                 
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;			V A R I A B L E S   &  D E F I N I T I O N S
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;
                 
                 .INCLUDE "variable_definitions.inc"
                 
                 ; Meeblip anode		Version 1.00
                 ;
                 ;
                 ;-------------------------------------------------------------------------------------------------------------------
                 ; Variables and definitions
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;
                 
                 ;registers:
                 
                 ;current phase of DCO A:
                 .DEF PHASEA_0	    = 	r2
                 .DEF PHASEA_1	    = 	r3
                 .DEF PHASEA_2	    = 	r4
                 
                 ;current phase of DCO B:
                 .DEF PHASEB_0	    = 	r5
                 .DEF PHASEB_1	    = 	r6
                 .DEF PHASEB_2	    = 	r7
                 
                 .DEF ZERO           =   r8
                 
                 ;DCF:
                 
                 .def a_L 			= r9
                 .def a_H 			= r10
                 .def temp_SREG		= r11
                 .def z_L 			= r18
                 .def z_H 			= r19
                 .def temp	 		= r30
                 .def temp2			= r31
                 
                 .DEF OLD_LDAC  = 	r14 ; previous sample
                 .DEF OLD_HDAC  = 	r15 ; previous sample
                 
                 .def LDAC			= r16
                 .def HDAC			= r17
                 
                 ;RAM (0060h...025Fh):
                 
                                     .DSEG
                 ;MIDI:
000060           MIDIPHASE:          .BYTE 1
000061           MIDICHANNEL:        .BYTE 1
000062           MIDIDATA0:	        .BYTE 1
000063           MIDIVELOCITY:	    .BYTE 1
000064           MIDINOTE:	        .BYTE 1
000065           LFONOTE:			.BYTE 1
000066           MIDINOTEPREV:	    .BYTE 1		        ; buffer for MIDI note
000067           MIDIPBEND_L:        .BYTE 1		        ;\
000068           MIDIPBEND_H:        .BYTE 1		        ;/ -32768..+32766
                 
                 ;current sound parameters:
000069           LFOLEVEL:	        .BYTE 1	            ; 0..255
00006a           KNOB_SHIFT:			.BYTE 1				; 0= unchanged 255= changed state  
00006b           POWER_UP:			.BYTE 1				; 255 = Synth just turned on, 0 = normal operation
00006c           KNOB0_STATUS:		.BYTE 1				; Each byte corresponds to a panel knob.
00006d           KNOB1_STATUS:		.BYTE 1				; 0 = pot not updated since Knob Shift switch change
00006e           KNOB2_STATUS:		.BYTE 1				; 1 = pot has been updated. 
00006f           KNOB3_STATUS:		.BYTE 1
000070           KNOB4_STATUS:		.BYTE 1
000071           KNOB5_STATUS:		.BYTE 1
000072           KNOB6_STATUS:		.BYTE 1
000073           KNOB7_STATUS:		.BYTE 1
                 
000074           SWITCH1:	        .BYTE 1	            
000075           SWITCH2:	        .BYTE 1	            
000076           OLD_SWITCH1:		.BYTE 1				; Previous switch values (used to flag switch changes)
000077           OLD_SWITCH2:		.BYTE 1
                 
                 										
                 										; Switch value currently used (from front panel, MIDI or last loaded patch)
000078           PATCH_SWITCH1:		.BYTE 1				
                   .equ SW_SUSTAIN		= 0
                   .equ SW_OSCB_OCT		= 1
                   .equ SW_PWM_SWEEP		= 2
                   .equ SW_LFO_DEST		= 3
                   .equ SW_LFO_RANDOM	= 4
                   .equ SW_LFO_RETRIGGER	= 5
                   .equ SW_OSCB_WAVE		= 6
                   .equ SW_UNASSIGNED_2	= 7
                 
                 
                 
                 
000079           PATCH_SWITCH2:		.BYTE 1
                   .equ SW_MIDI			= 0
                 
00007a           SETMIDICHANNEL:	    .BYTE 1             ; selected MIDI channel: 0 for OMNI or 1..15
00007b           DETUNEB_FRAC:	    .BYTE 1	            ;\
00007c           DETUNEB_INTG:	    .BYTE 1	            ;/ -128,000..+127,996
00007d           ATTACKTIME:	        .BYTE 1	            ; 0..255
00007e           DECAYTIME:			.BYTE 1				; 0..255
00007f           SUSTAINLEVEL:		.BYTE 1				; 0/255
000080           RELEASETIME:        .BYTE 1	            ; 0..255
000081           ATTACKTIME2:	    .BYTE 1				; 0..255
000082           DECAYTIME2:			.BYTE 1				; 0..255
000083           SUSTAINLEVEL2:		.BYTE 1				; 0/255
000084           RELEASETIME2:        .BYTE 1	        ; 0..255
000085           NOTE_L:		        .BYTE 1
000086           NOTE_H:		        .BYTE 1
000087           NOTE_INTG:	        .BYTE 1
000088           PORTACNT:	        .BYTE 1		        ; 2 / 1 / 0
000089           LPF_I:		        .BYTE 1
00008a           LEVEL:		        .BYTE 1		        ; 0..255
00008b           PITCH:		        .BYTE 1		        ; 0..96
00008c           ADC_CHAN:	        .BYTE 1		        ; 0..7
00008d           PREV_ADC_CHAN:		.BYTE 1				; 0..7
00008e           ADC_0:		        .BYTE 1				; Panel knob values.
00008f           ADC_1:		        .BYTE 1
000090           ADC_2:		        .BYTE 1
000091           ADC_3:		        .BYTE 1
000092           ADC_4:		        .BYTE 1
000093           ADC_5:		        .BYTE 1
000094           ADC_6:		        .BYTE 1
000095           ADC_7:		        .BYTE 1
000096           OLD_ADC_0:			.BYTE 1				; Previous panel knob value
000097           OLD_ADC_1:			.BYTE 1
000098           OLD_ADC_2:			.BYTE 1
000099           OLD_ADC_3:			.BYTE 1
00009a           OLD_ADC_4:			.BYTE 1
00009b           OLD_ADC_5:			.BYTE 1
00009c           OLD_ADC_6:			.BYTE 1
00009d           OLD_ADC_7:			.BYTE 1
00009e           GATE:		        .BYTE 1		        ; 0 / 1
00009f           GATEEDGE:	        .BYTE 1		        ; 0 / 1
0000a0           TPREV_KBD_L:	    .BYTE 1
0000a1           TPREV_KBD_H:	    .BYTE 1
0000a2           TPREV_L:	        .BYTE 1
0000a3           TPREV_H:	        .BYTE 1
0000a4           DELTAT_L:	        .BYTE 1		        ;\ Time from former course
0000a5           DELTAT_H:	        .BYTE 1		        ;/ of the main loop (1 bit = 32 s)
0000a6           ENVPHASE:	        .BYTE 1		        ; 0=stop 1=attack 2=decay 3=sustain 4=release
0000a7           ENV_FRAC_L:	        .BYTE 1
0000a8           ENV_FRAC_H:	        .BYTE 1
0000a9           ENV_INTEGR:	        .BYTE 1
0000aa           ENVPHASE2:	        .BYTE 1		        ; 0=stop 1=attack 2=decay 3=sustain 4=release
0000ab           ENV_FRAC_L2:	    .BYTE 1
0000ac           ENV_FRAC_H2:	    .BYTE 1
0000ad           ENV_INTEGR2:	    .BYTE 1
0000ae           VELOCITY_ENVMOD:	.BYTE 1
0000af           OLD_CUTOFF:			.BYTE 1
                 
0000b0           LFOPHASE:	        .BYTE 1		        ; 0=up 1=down
0000b1           LFO_FRAC_L:	        .BYTE 1		        ;\
0000b2           LFO_FRAC_H:	        .BYTE 1		        ; > -128,000..+127,999
0000b3           LFO_INTEGR:	        .BYTE 1		        ;/
0000b4           LFOVALUE:	        .BYTE 1		        ; -128..+127
0000b5           LFO2PHASE:	        .BYTE 1		        ; 0=up 1=down
0000b6           LFO2_FRAC_L:	    .BYTE 1		        ;\
0000b7           LFO2_FRAC_H:	    .BYTE 1		        ; > -128,000..+127,999
0000b8           LFO2_INTEGR:	    .BYTE 1		        ;/
0000b9           LFO2VALUE:	        .BYTE 1		        ; -128..+127
0000ba           OLDWAVEA:	        .BYTE 1
0000bb           OLDWAVEB:	        .BYTE 1
0000bc           SHIFTREG_0:	        .BYTE 1		        ;\
0000bd           SHIFTREG_1:	        .BYTE 1		        ; > shift register for
0000be           SHIFTREG_2:	        .BYTE 1		        ;/  pseudo-random generator
0000bf           LFOBOTTOM_0:        .BYTE 1		        ;\
0000c0           LFOBOTTOM_1:        .BYTE 1		        ; > bottom level of LFO
0000c1           LFOBOTTOM_2:        .BYTE 1		        ;/
0000c2           LFOTOP_0:	        .BYTE 1		        ;\
0000c3           LFOTOP_1:	        .BYTE 1		        ; > top level of LFO
0000c4           LFOTOP_2:	        .BYTE 1		        ;/
0000c5           LFO2BOTTOM_0:       .BYTE 1		        ;\
0000c6           LFO2BOTTOM_1:       .BYTE 1		        ; > bottom level of LFO2
0000c7           LFO2BOTTOM_2:       .BYTE 1		        ;/
0000c8           LFO2TOP_0:	        .BYTE 1		        ;\
0000c9           LFO2TOP_1:	        .BYTE 1		        ; > top level of LFO2
0000ca           LFO2TOP_2:	        .BYTE 1		        ;/
0000cb           DCOA_LEVEL:			.BYTE 1	
0000cc           DCOB_LEVEL:			.BYTE 1	
0000cd           KNOB_DEADZONE:		.BYTE 1
                 
                 ; increase phase for DCO A
0000ce           DELTAA_0: .byte 1
0000cf           DELTAA_1: .byte 1
0000d0           DELTAA_2: .byte 1
                 
                 ; increase phase for DCO B
0000d1           DELTAB_0: .byte 1
0000d2           DELTAB_1: .byte 1
0000d3           DELTAB_2: .byte 1
                 
                 ; Wavetable select
0000d4           WAVETABLE_A:		.byte 1		; Bandlimited wavetable 0..11
0000d5           WAVETABLE_B:		.byte 1		; Bandlimited wavetable 0..11
0000d6           WAVETABLE:			.byte 1		; User wavetable 0.32
                 
                 
                 ; oscillator pulse width
0000d7           PULSE_WIDTH:		.byte 1
0000d8           PULSE_KNOB_LIMITED:	.byte 1
                 
                 ; fm
0000d9           WAVEB:	  .byte 1
0000da           FMDEPTH:  .byte 1
                 
                 ; eeprom 
0000db           WRITE_MODE:			.byte 1
0000dc           WRITE_OFFSET:		.byte 1		; byte 0..15 of the patch
0000dd           WRITE_PATCH_OFFSET:	.byte 1		; start of patch in eeprom
                 
                 ; filter
0000de           SCALED_RESONANCE: .byte 1
0000df           b_L:		.byte 1
0000e0           b_H:		.byte 1
0000e1           VCF_STATUS: .byte 1				; 0 indicates VCF off, 1 = on
                 
                 ; DCA LEVEL
0000e2           LEVEL_L:	.byte 1
0000e3           LEVEL_H:	.byte 1				; Envelope LEVEL packed in 2 bytes ready for the DCA. 
                 
                 ; Filter Cutoff Level
0000e4           LPF_L:		.byte 1
0000e5           LPF_H:		.byte 1				; Filter cutoff packed in 2 bytes for DAC
                 
                 ; Patch save/load and MIDI channel set
0000e6           LED_TIMER:		.byte 1				; number of blinks before reset
0000e7           LED_TIMER2:		.byte 1
0000e8           BUTTON_STATUS:	.byte 1				; MIDI=1
0000e9           FIRMWARE:		.byte 1				; 0 = standard firmware, 1 = alternate
                 
                 ///ML 20x4 lcd strings (4 rows of 20 chars)
0000ea           my_LCDstring4: .byte 20
0000fe           my_LCDstring3: .byte 20
000112           my_LCDstring2: .byte 20
000126           
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;			L O O K U P    T A B L E S
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;
                 ;			MIDI CC table
                 ;			Interrupt vectors
                 ;			Note table
                 ;			VCF	curves
                 ;			Time to Rate conversion for envelope timing
                 ;			VCA curve
                 ;
                 
                 .INCLUDE "lookup_tables.inc"			
                 
                 ; Meeblip anode		Version 1.00
                 ;
                 ;
                 ;-------------------------------------------------------------------------------------------------------------------
                 ; MIDI Control Change parameter table
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;
                 ; MIDI CC parameters with an offset from MIDICC. They are automatically
                 ; stored for use, just use the variable name to access their value. 
                  
                 
00013a           MIDICC:         		.byte $80 		; 128 bytes reserved in RAM for table
                   .equ MIDIMODWHEEL		= MIDICC + $01
                 
                     ; Knobs - potentiometer 0 through 7
                   .equ PANEL_LFOLEVEL 	= MIDICC + $30 
                   .equ LFOFREQ			= MIDICC + $31
                   .equ OSC_DETUNE 		= MIDICC + $32
                   .equ PULSE_KNOB 		= MIDICC + $33
                   .equ CUTOFF 			= MIDICC + $34
                   .equ KNOB_AMP_DECAY 	= MIDICC + $35
                   .equ KNOB_AMP_ATTACK	= MIDICC + $36
                   .equ PORTAMENTO 		= MIDICC + $37 ; Not on front panel, but available through MIDI CC 
                   .equ VCFENVMOD		= MIDICC + $38 ; Not on front panel, but available through MIDI CC
                 
                   ; Panel switches 0..7
                   ; Switches 1
                   .equ S_SUSTAIN		= MIDICC + $40
                   .equ S_OSCB_OCT		= MIDICC + $41
                   .equ S_PWM_SWEEP		= MIDICC + $42
                   .equ S_LFO_DEST		= MIDICC + $43
                   .equ S_LFO_RANDOM		= MIDICC + $44 
                   .equ S_LFO_RETRIGGER	= MIDICC + $45 
                   .equ S_OSCB_WAVE		= MIDICC + $46
                   .equ S_UNASSIGNED_2	= MIDICC + $47
                 
                 
                 ;-------------------------------------------------------------------------------------------------------------------
                 
                 
                 
                 ;stack: 0x0A3..0x25F
                             .ESEG
                 
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;			V E C T O R   T A B L E
                 ;-------------------------------------------------------------------------------------------------------------------
                             .CSEG
                 
000000 940c 0790 		    jmp	RESET		            ; RESET
                 
000002 940c 002a 		    jmp	IRQ_NONE	            ; INT0
000004 940c 002a 		    jmp	IRQ_NONE	            ; INT1
000006 940c 002a 		    jmp	IRQ_NONE	            ; INT2
                 
000008 940c 002a 		    jmp	IRQ_NONE	            ; TIMEr2 COMP
00000a 940c 002a 		    jmp	IRQ_NONE	            ; TIMEr2 OVF
                 
00000c 940c 002a 		    jmp	IRQ_NONE	            ; TIMEr1 CAPT
00000e 940c 002a 		    jmp	IRQ_NONE	            ; TIMEr1 COMPA
000010 940c 002a 		    jmp	IRQ_NONE	            ; TIMEr1 COMPB
000012 940c 002a     		jmp	IRQ_NONE	            ; TIMEr1 OVF
                 
000014 940c 0165 		    jmp	TIM0_CMP	            ; TIMEr0 COMPA
000016 940c 002a 		    jmp	IRQ_NONE	            ; TIMEr0 OVF
                 
000018 940c 002a 		    jmp	IRQ_NONE	            ; SPI,STC
                 
00001a 940c 02e3 		    jmp	UART_RXC	            ; UART, RX COMPLETE
00001c 940c 002a 		    jmp	IRQ_NONE	            ; UART,UDRE
00001e 940c 002a 		    jmp	IRQ_NONE	            ; UART, TX COMPLETE
                 
000020 940c 002a 		    jmp	IRQ_NONE	            ; ADC CONVERSION COMPLETE
                 
000022 940c 002a 		    jmp	IRQ_NONE	            ; EEPROM READY
                 
000024 940c 002a 		    jmp	IRQ_NONE	            ; ANALOG COMPARATOR
                 
000026 940c 002a             jmp IRQ_NONE                ; 2-Wire Serial Interface
                 
000028 940c 002a             jmp IRQ_NONE                ; STORE PROGRAM MEMORY READY
                 
                 IRQ_NONE:
00002a 9518                  reti
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;			R O M   T A B L E S
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;
                 ; Note Phase Deltas at 40 kHz sample rate
                 ;
                 ;  				NOTE PHASE DELTA = 2 ^ 24 * Freq / SamplingFreq
                 ;   	So... 	Note zero calc: 2 ^ 24 * 8.175799 / 40000 = 3429.17864 (stored as 00 0D 65.2E)
                 ;-------------------------------------------------------------------------------------------------------------------
                 
                     
                 DELTA_C:
00002b 652e                  .DW	0x652E		            ;\
00002c 000d      		    .DW	0x000D		            ;/ note  0 ( 8.175799 Hz) 
                 
                 DELTA_CIS:
00002d 3117                  .DW	0x3117		            ;\
00002e 000e      		    .DW	0x000E		            ;/ note  1 ( 8.661957 Hz) 
                 
                 DELTA_D:
00002f 091f                  .DW	0x091F		            ;\
000030 000f      		    .DW	0x000F		            ;/ note  2 ( 9.177024 Hz) 
                 
                 DELTA_DIS:
000031 ee01                  .DW	0xEE01		            ;\
000032 000f      		    .DW	0x000F		            ;/ note  3 ( 9.722718 Hz) 
                 
                 DELTA_E:
000033 e07f                  .DW	0xE07F		            ;\
000034 0010      		    .DW	0x0010		            ;/ note  4 (10.300861 Hz) 
                 
                 DELTA_F:
000035 e167                  .DW	0xE167		            ;\
000036 0011      		    .DW	0x0011		            ;/ note  5 (10.913382 Hz) 
                 
                 DELTA_FIS:
000037 f197                  .DW	0xF197		            ;\
000038 0012      		    .DW	0x0012		            ;/ note  6 (11.562326 Hz) 
                 
                 DELTA_G:
000039 11f6                  .DW	0x11F6		            ;\
00003a 0014      		    .DW	0x0014		            ;/ note  7 (12.249857 Hz) 
                 
                 DELTA_GIS:
00003b 437b                  .DW	0x437B		            ;\
00003c 0015      		    .DW	0x0015		            ;/ note  8 (12.978272 Hz) 
                 
                 DELTA_A:
00003d 872b                  .DW	0x872B		            ;\
00003e 0016      		    .DW	0x0016		            ;/ note  9 (13.750000 Hz) 
                 
                 DELTA_AIS:
00003f de1a                  .DW	0xDE1A		            ;\
000040 0017      		    .DW	0x0017		            ;/ note 10 (14.567618 Hz) 
                 
                 DELTA_H:
000041 496d                  .DW	0x496D		            ;\
000042 0019      		    .DW	0x0019		            ;/ note 11 (15.433853 Hz) 
                 
                 DELTA_C1:
000043 ca5b                  .DW	0xCA5B		            ;\
000044 001a      		    .DW	0x001A		            ;/ note 12 (16.351598 Hz) 
                 
                 
                 ;-----------------------------------------------------------------------------
                 ;
                 ; Lookup Tables
                 ;
                 ; VCF filter cutoff - 128 bytes
                 ; Time to Rate table for calculating amplitude envelopes - 64 bytes
                 ; VCA non-linear level conversion - 256 bytes
                 ;
                 ;-----------------------------------------------------------------------------
                 ; VCF Filter Cutoff
                 ;
                 ; value = (16th root of 2)**(index+24)
                 ;
                 
                 ; Digital VCF table (starts at zero)
                 
                 TAB_VCF:
000045 0101
000046 0101
000047 0101
000048 0101      	.db	  1,   1,   1,   1,   1,   1,   1,   1		;   0
000049 0101
00004a 0101
00004b 0101
00004c 0201      	.db	  1,   1,   1,   1,   1,   1,   1,   2		;   8
00004d 0202
00004e 0202
00004f 0202
000050 0202      	.db	  2,   2,   2,   2,   2,   2,   2,   2		;  16
000051 0302
000052 0303
000053 0303
000054 0303      	.db	  2,   3,   3,   3,   3,   3,   3,   3		;  24
000055 0404
000056 0404
000057 0504
000058 0505      	.db	  4,   4,   4,   4,   4,   5,   5,   5		;  32
000059 0605
00005a 0606
00005b 0707
00005c 0707      	.db	  5,   6,   6,   6,   7,   7,   7,   7		;  40
00005d 0808
00005e 0909
00005f 0a09
000060 0b0a      	.db	  8,   8,   9,   9,   9,  10,  10,  11		;  48
000061 0c0b
000062 0d0c
000063 0e0e
000064 100f      	.db	 11,  12,  12,  13,  14,  14,  15,  16		;  56
000065 1110
000066 1312
000067 1413
000068 1615      	.db	 16,  17,  18,  19,  19,  20,  21,  22		;  64
000069 1817
00006a 1a19
00006b 1d1c
00006c 1f1e      	.db	 23,  24,  25,  26,  28,  29,  30,  31		;  72
00006d 2221
00006e 2624
00006f 2927
000070 2d2b      	.db	 33,  34,  36,  38,  39,  41,  43,  45		;  80
000071 312f
000072 3533
000073 3a38
000074 3f3d      	.db	 47,  49,  51,  53,  56,  58,  61,  63		;  88
000075 4542
000076 4c48
000077 524f
000078 5a56      	.db	 66,  69,  72,  76,  79,  82,  86,  90		;  96
000079 625e
00007a 6b67
00007b 7570
00007c 7f7a      	.db	 94,  98, 103, 107, 112, 117, 122, 127		; 104
00007d 8b85
00007e 9891
00007f a59e
000080 b5ad      	.db	133, 139, 145, 152, 158, 165, 173, 181		; 112
000081 c5bd
000082 d7ce
000083 eae0
000084 fff5      	.db	189, 197, 206, 215, 224, 234, 245, 255		; 120
                 
                 ; Analog VCF table (offset to start at 25)
                 TAB_VCF2:
000085 1919
000086 1919
000087 1919
000088 1919      	.db	 25, 25, 25, 25, 25, 25, 25, 25
000089 1919
00008a 1919
00008b 1919
00008c 1a19      	.db	 25, 25, 25, 25, 25, 25, 25, 26
00008d 1a1a
00008e 1a1a
00008f 1a1a
000090 1a1a      	.db	 26, 26, 26, 26, 26, 26, 26, 26
000091 1b1a
000092 1b1b
000093 1b1b
000094 1b1b      	.db	 26, 27, 27, 27, 27, 27, 27, 27
000095 1c1c
000096 1c1c
000097 1d1c
000098 1d1d      	.db	 28, 28, 28, 28, 28, 29, 29, 29
000099 1d1d
00009a 1d1d
00009b 1e1e
00009c 1e1e      	.db	 29, 29, 29, 29, 30, 30, 30, 30
00009d 1f1f
00009e 2020
00009f 2120
0000a0 2221      	.db	 31, 31, 32, 32, 32, 33, 33, 34
0000a1 2322
0000a2 2423
0000a3 2525
0000a4 2626      	.db	 34, 35, 35, 36, 37, 37, 38, 38
0000a5 2726
0000a6 2928
0000a7 2a29
0000a8 2c2b      	.db	 38, 39, 40, 41, 41, 42, 43, 44
0000a9 2e2d
0000aa 2f2f
0000ab 3231
0000ac 3433      	.db	 45, 46, 47, 47, 49, 50, 51, 52
0000ad 3736
0000ae 3a38
0000af 3d3b
0000b0 413f      	.db	 54, 55, 56, 58, 59, 61, 63, 65
0000b1 4442
0000b2 4846
0000b3 4c4b
0000b4 514f      	.db	 66, 68, 70, 72, 75, 76, 79, 81
0000b5 5654
0000b6 5d59
0000b7 625f
0000b8 6966      	.db	 84, 86, 89, 93, 95, 98, 102, 105
0000b9 706d
0000ba 7975
0000bb 827d
0000bc 8b86      	.db	 109, 112, 117, 121, 125, 130, 134, 139
0000bd 9590
0000be a19b
0000bf ada7
0000c0 bbb4      	.db	 144, 149, 155, 161, 167, 173, 180, 187
0000c1 cac2
0000c2 dad2
0000c3 ebe2
0000c4 fff5      	.db	 194, 202, 210, 218, 226, 235, 245, 255
                 
                 
                 ;-----------------------------------------------------------------------------
                 ; 
                 ; Time to Rate conversion table for envelope timing.
                 ; 
                 ; lfo:
                 ;  update values for 32us update rate
                 ;  LFO_INTEGR overflows all 256*32us = 8.192 ms
                 ;
                 ; formula  Tof = 256*32us*2^16/N
                 ;          LFOfreq = 1/Tof
                 
                 ; Rate value =	Rmin * Q^i with Q = (Rmax/Rmin)^(1/31) = 1,286111766
                 
                 TIMETORATE:
0000c5 6387      	.DW		25479	; 10.54 mS	fast lfo, attack/rise time
0000c6 4d63      	.DW		19811	; 13.55 mS
0000c7 3c2c      	.DW		15404	; 17.43 mS
0000c8 2ec9      	.DW		11977	; 22.41 mS
0000c9 2461      	.DW		9313	; 28.83 mS
0000ca 1c49      	.DW		7241	; 37.07 mS
0000cb 15fe      	.DW		5630	; 47.68 mS
0000cc 111a      	.DW	 	4378	; 61.32 mS
0000cd 0d4c      	.DW	 	3404	; 78.87 mS
0000ce 0a57      	.DW	 	2647	; 101.4 mS
0000cf 080a      	.DW	 	2058	; 130.5 mS
0000d0 0640      	.DW	 	1600	; 167.8 mS
0000d1 04dc      	.DW	 	1244	; 215.8 mS
0000d2 03c8      	.DW	 	968	; 277.5 mS
0000d3 02f0      	.DW	 	752 ; 356.9 mS
0000d4 0249      	.DW	 	585 ; 459.0 mS
0000d5 01c7      	.DW	  	455	; 590.4 mS
0000d6 0162      	.DW	  	354	; 759.3 mS
0000d7 0113      	.DW	  	275	; 976.5 mS
0000d8 00d6      	.DW	  	214	; 1.256 S
0000d9 00a6      	.DW	  	166	; 1.615 S
0000da 0081      	.DW	  	129	; 2.077 S
0000db 0065      	.DW	  	101	; 2.672 S
0000dc 004e      	.DW	  	78	; 3.436 S
0000dd 003d      	.DW	  	61	; 4.419 S
0000de 002f      	.DW	   	47	; 5.684 S
0000df 0025      	.DW	   	37	; 7.310 S
0000e0 001d      	.DW	  	29	; 9.401 S
0000e1 0016      	.DW	   	22	; 12.09 S
0000e2 0012      	.DW	   	18	; 15.55 S
0000e3 000e      	.DW	   	14	; 20.00 S
0000e4 000a      	.DW	   	10	; 28.26 S	slow lfo, attack/rise time
                 
                 
                 ;-----------------------------------------------------------------------------
                 ;
                 ; VCA non-linear level conversion 
                 ;
                 ; Amplitude level lookup table. Envelopes levels are calculated as linear 
                 ; and then converted to approximate an exponential saturation curve.
                 ;
                 ; polynomial y = a	+ bx + cx2 + dx3
                 ; with coefficients
                 ;    a  0
                 ;    b  0.210841569
                 ;    c  0.000177823
                 ;    d  1.14E-05
                 
                 TAB_VCA:
0000e5 0000
0000e6 0100
0000e7 0101
0000e8 0101      	.db	  0,   0,   0,   1,   1,   1,   1,   1		;   0
0000e9 0202
0000ea 0202
0000eb 0303
0000ec 0303      	.db	  2,   2,   2,   2,   3,   3,   3,   3		;   8
0000ed 0403
0000ee 0404
0000ef 0504
0000f0 0505      	.db	  3,   4,   4,   4,   4,   5,   5,   5		;  16
0000f1 0605
0000f2 0606
0000f3 0706
0000f4 0707      	.db	  5,   6,   6,   6,   6,   7,   7,   7		;  24
0000f5 0807
0000f6 0808
0000f7 0908
0000f8 0909      	.db	  7,   8,   8,   8,   8,   9,   9,   9		;  32
0000f9 0a09
0000fa 0a0a
0000fb 0b0b
0000fc 0b0b      	.db	  9,  10,  10,  10,  11,  11,  11,  11		;  40
0000fd 0c0c
0000fe 0d0c
0000ff 0d0d
000100 0e0e      	.db	 12,  12,  12,  13,  13,  13,  14,  14		;  48
000101 0f0e
000102 0f0f
000103 1010
000104 1110      	.db	 14,  15,  15,  15,  16,  16,  16,  17		;  56
000105 1211
000106 1212
000107 1313
000108 1414      	.db	 17,  18,  18,  18,  19,  19,  20,  20		;  64
000109 1514
00010a 1615
00010b 1716
00010c 1717      	.db	 20,  21,  21,  22,  22,  23,  23,  23		;  72
00010d 1818
00010e 1919
00010f 1a1a
000110 1b1b      	.db	 24,  24,  25,  25,  26,  26,  27,  27		;  80
000111 1c1c
000112 1d1d
000113 1e1e
000114 1f1f      	.db	 28,  28,  29,  29,  30,  30,  31,  31		;  88
000115 2120
000116 2221
000117 2322
000118 2423      	.db	 32,  33,  33,  34,  34,  35,  35,  36		;  96
000119 2525
00011a 2726
00011b 2827
00011c 2929      	.db	 37,  37,  38,  39,  39,  40,  41,  41		; 104
00011d 2b2a
00011e 2c2b
00011f 2d2d
000120 2f2e      	.db	 42,  43,  43,  44,  45,  45,  46,  47		; 112
000121 3030
000122 3231
000123 3333
000124 3534      	.db	 48,  48,  49,  50,  51,  51,  52,  53		; 120
                 
000125 3736
000126 3838
000127 3a39
000128 3c3b      	.db	 54,  55,  56,  56,  57,  58,  59,  60		; 128
000129 3e3d
00012a 3f3f
00012b 4140
00012c 4342      	.db	 61,  62,  63,  63,  64,  65,  66,  67		; 136
00012d 4544
00012e 4746
00012f 4948
000130 4b4a      	.db	 68,  69,  70,  71,  72,  73,  74,  75		; 144
000131 4d4c
000132 504e
000133 5251
000134 5453      	.db	 76,  77,  78,  80,  81,  82,  83,  84		; 152
000135 5655
000136 5957
000137 5b5a
000138 5d5c      	.db	 85,  86,  87,  89,  90,  91,  92,  93		; 160
000139 605f
00013a 6261
00013b 6564
00013c 6866      	.db	 95,  96,  97,  98, 100, 101, 102, 104		; 168
00013d 6a69
00013e 6d6c
00013f 706e
000140 7371      	.db	105, 106, 108, 109, 110, 112, 113, 115		; 176
000141 7674
000142 7877
000143 7b7a
000144 7e7d      	.db	116, 118, 119, 120, 122, 123, 125, 126		; 184
000145 8280
000146 8583
000147 8886
000148 8b8a      	.db	128, 130, 131, 133, 134, 136, 138, 139		; 192
000149 8e8d
00014a 9290
00014b 9594
00014c 9997      	.db	141, 142, 144, 146, 148, 149, 151, 153		; 200
00014d 9c9a
00014e a09e
00014f a4a2
000150 a7a5      	.db	154, 156, 158, 160, 162, 164, 165, 167		; 208
000151 aba9
000152 afad
000153 b3b1
000154 b7b5      	.db	169, 171, 173, 175, 177, 179, 181, 183		; 216
000155 bbb9
000156 bfbd
000157 c3c1
000158 c7c5      	.db	185, 187, 189, 191, 193, 195, 197, 199		; 224
000159 cbc9
00015a d0ce
00015b d4d2
00015c d9d6      	.db	201, 203, 206, 208, 210, 212, 214, 217		; 232
00015d dddb
00015e e2e0
00015f e7e4
000160 ebe9      	.db	219, 221, 224, 226, 228, 231, 233, 235		; 240
000161 f0ee
000162 f5f3
000163 faf7
000164 fffc      
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;		S A M P L E     G E N E R A T I O N     L O O P 
                 ;-------------------------------------------------------------------------------------------------------------------
                 ; Timer 1 compare interrupt (sampling)
                 ;
                 ; This is where sound is generated. This interrupt is called 40,000 times per second 
                 ; to calculate a single 16-bit value for audio output. There are 500 instruction cycles 
                 ; (16MHZ/40,000) between samples, and these have to be shared between this routine and the 
                 ; main program loop that scans controls, receives MIDI commands and calculates envelope, 
                 ; LFO, and DCA/DCF levels.
                 ;
                 ; If you use too many clock cycles here there won't be sufficient time left over for
                 ; general housekeeping tasks. The result will be sluggish and lost notes, weird timing and sadness.
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;
                 
                 .INCLUDE "sample_generation.inc"
                 
                 ; Meeblip anode		Version 1.10
                 ;
                 ;
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;		S A M P L E     G E N E R A T I O N     L O O P 
                 ;-------------------------------------------------------------------------------------------------------------------
                 ; Timer 2 compare interrupt (sampling)
                 ;
                 ; This is where sound is generated. This interrupt is called 40,000 times per second 
                 ; to calculate a single 16-bit value for audio output. There are 500 instruction cycles 
                 ; (16MHZ/40,000) between samples, and these have to be shared between this routine and the 
                 ; main program loop that scans controls, receives MIDI commands and calculates envelope, 
                 ; LFO, and DCA/DCF levels.
                 ;
                 ; If you use too many clock cycles here there won't be sufficient time left over for
                 ; general housekeeping tasks. The result will be sluggish and lost notes, weird timing and sadness.
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;
                 
                 ; Push contents of registers onto the stack
                 ;
                 TIM0_CMP:
000165 930f      		    push	r16
000166 b70f      		    in	    r16, SREG		    ;\
000167 930f          		push	r16			        ;/ push SREG
000168 931f      		    push	r17
000169 932f      			push    r18
00016a 933f      			push	r19
00016b 934f      			push	r20
00016c 935f      			push    r21
00016d 936f      			push	r22
00016e 937f      			push	r23
00016f 93ef      			push	r30
000170 93ff      			push	r31
000171 920f        			push r0
000172 921f        			push r1
                 
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;
                 ; Oscillator A & B 
                 ;
                 ; This design uses direct frequency synthesis to generate a ramp wave. A three-byte counter (= phase) is being
                 ; incremented by a value which is proportional to the sound frequency (= phase delta). The
                 ; increment takes place every sampling period. The most significant byte of the counter is a sawtooth ramp. 
                 ; This is either used as a pointer to a 256 byte wavetable or for direct waveform synthesis.
                 ; Each oscillator has its own phase and phase delta registers. The contents of each phase delta 
                 ; register depends on the frequency being generated:
                 ;
                 ;                   PHASE DELTA = 2 ^ 24 * Freq / SamplingFreq
                 ;
                 ; where:
                 ;       SamplingFreq = 40000 Hz
                 ;       Freq = 440 * 2 ^ ((n - 69 + d) / 12)
                 ;       where in turn:
                 ;           n = MIDI note number. Range limited to 36 to 96 (5 octaves)
                 ;           d = transpose/detune (in halftones)
                 ;
                 ;-------------------------------------------------------------------------------------------------------------------
                 
                 
                 
                 ; Output first byte of envelope LEVEL to the SPI DAC
                 
                 			; Output DCA Level
                 			; Pull DCA chip select line low to enable clock + data
000173 9893      			cbi		PORTD, 3
                 			; Shift most significant byte into SPI register 
                 			
000174 91e0 00e3 			lds		r30, LEVEL_H
000176 b9ef      			out		SPDR, r30	
                 				
                 
                 ; Pulse wave or wavetable version?
000177 9150 00e9 			lds		r21, FIRMWARE
000179 fd50      			sbrc	r21, 0	
00017a 940c 01f8 			jmp		WAVE_DCOA		; If FIRMWARE = 1, execute alternate firmware (wavetables)
                 
                 ;Calculate DCO A							
                 
                 CALC_DCOA:
00017c 2d14      		    mov	    r17, PHASEA_2				; sawtooth ramp for OSCA
                 
00017d 9150 0078 			lds		r21, PATCH_SWITCH1
00017f ff52      			sbrs	r21, SW_PWM_SWEEP  ; 0/1 (pulse/PWM)	
000180 c003      			rjmp	PULSE_OSCA					; On = PWM
                 
000181 9170 00d7 			lds		r23, PULSE_WIDTH			; pulse width from LFO
000183 c00e      			rjmp	PULSEA
                 
                 
                 PULSE_OSCA:
                 
000184 9170 00d8 			lds		r23, PULSE_KNOB_LIMITED		; get range limited pulse width from knob
000186 c00b      			rjmp	PULSEA
                 
                 SAW_OSCA:
000187 9160 00d4 			lds		r22, WAVETABLE_A			; Load wavetable offset 0..11
                 			
000189 3065      			cpi		r22, 5					
00018a f030      			brlo	RAW_SAWA					; Use raw wave if we're playing wavetable 0..4
                 
                 			; anti-aliased sawtooth
                 DCOA_SAW:
                 												; Offset to the correct wavetable in r22, based on note number (0..11)
00018b e3e6      			ldi		ZL, low (2*INV_SAW0)		; Load low part of byte address into ZL
00018c e1f8      			ldi		ZH, high(2*INV_SAW0)		; Load high part of byte address into ZH
00018d 0fe1      			add		ZL, r17						; Offset the wavetable by the ramp phase (i)
00018e 1ff6      			adc		ZH, r22						; Wavetable 0..11
00018f 95c8      			lpm									;	Load wave(i) into r0
000190 2d10      			mov		r17, r0						;	Copy into DCO A
                 RAW_SAWA:
000191 c022      			rjmp	EXIT_PULSEA					; Raw sawtooth. We already have a sawtooth ramp loaded into OSCA (r17)		
                 
                 PULSEA:											
000192 9160 00d4 			lds		r22, WAVETABLE_A			; Load wavetable offset 0..11
                 
000194 3065      			cpi		r22, 5					
000195 f0c8      			brlo	RAW_PULSE					; Use raw wave if we're playing wavetable 0..4
                 
                 				; r17 phase
                 				; r18 temp
                 				; r23 pulse width
                 				; r22 wavetable
                 				; get sample a into r17
000196 e3e6      			ldi		ZL, low (2*INV_SAW0)		; Load low part of byte address into ZL
000197 e1f8      			ldi		ZH, high(2*INV_SAW0)		; Load high part of byte address into ZH
000198 0fe1      			add		ZL, r17						; Offset the wavetable by the ramp phase (i)
000199 1ff6      			adc		ZH, r22						; Wavetable 0..11
00019a 95c8      			lpm									; Load wave(i) into r0
                 
                 	; get sample b out of phase into r18
00019b 2f27      			mov		r18, r23					; Grab a copy of the pulse width
00019c 0f21      			add		r18, r17					; Add phase offset for second table (pulse width + original sample)
00019d 2d10      			mov		r17, r0						; store previous sample in r17
00019e e3e6      			ldi		ZL, low (2*INV_SAW0)		; Load low part of byte address into ZL
00019f e1f8      			ldi		ZH, high(2*INV_SAW0)		; Load high part of byte address into ZH
0001a0 0fe2      			add		ZL, r18						; Add phase offset for second table.
0001a1 1ff6      			adc		ZH, r22						; Wavetable 0..15
0001a2 95c8      			lpm									; Load wave(i) into r0
                 
                 	; subtract wave a-b		
                 	; first part b > a, second part b < a
0001a3 2722      			clr		r18
0001a4 1910      			sub		r17, r0			
0001a5 0928      			sbc		r18, ZERO
0001a6 0f17      			add		r17, r23					; add offset (pulse width)
0001a7 1d28      			adc		r18, ZERO
0001a8 f414      			brge	PULSE_BOUND_CHECK			; non-negative result, so no need to limit the value
0001a9 e010      			ldi		r17, 0
0001aa e020      			ldi		r18, 0						; value was negative, so force to zero
                 PULSE_BOUND_CHECK:
0001ab 2322      			tst		r18							; Check if we're larger than 255
0001ac f009      			breq	PWM_EXIT					; no need to limit upper bound
0001ad ef1f      			ldi		r17, $FF
                 PWM_EXIT:
0001ae c005      			rjmp	EXIT_PULSEA
                 
                 RAW_PULSE:
                 			; Raw Pulse wave generated on the fly. Aliases like crazy (calc'd only when anti-alias switch is OFF)
0001af 1717      			cp		r17, r23			
0001b0 f010      			brlo	PULSE_ZERO	
0001b1 e010      			ldi		r17, $00					; Set pulse to bottom
0001b2 c001      			rjmp	EXIT_PULSEA
                 PULSE_ZERO:
0001b3 ef1f      			ldi		r17, $FF					; Set pulse to top
                 EXIT_PULSEA:
0001b4 5810      			subi    r17, $80					; sign oscillator A
                 
                 
                 			; Output second byte of DCA Level on SPI
0001b5 91e0 00e2 			lds		r30, LEVEL_L
0001b7 b9ef      			out		SPDR, r30
                 
                 CALC_DCOB:
0001b8 2d07      		    mov	    r16, PHASEB_2				; sawtooth ramp for OSCA
                 
0001b9 9170 0078 			lds	    r23, PATCH_SWITCH1
0001bb fd76      		    sbrc 	r23, SW_OSCB_WAVE			; SW_OSCB_WAVE: 1 = sawtooth, 0 = pulse 	
0001bc c003      		    rjmp	SAW_OSCB
                 
                 PULSE_OSCB:
                 
0001bd 9170 00d8 			lds		r23, PULSE_KNOB_LIMITED		; get range limited pulse width from knob
0001bf c00b      			rjmp	PULSEB
                 
                 SAW_OSCB:
0001c0 9160 00d5 			lds		r22, WAVETABLE_B			; Load wavetable offset 0..11
                 
0001c2 3065      			cpi		r22, 5					
0001c3 f030      			brlo	RAW_SAWB					; Use raw wave if we're playing wavetable 0..4
                 
                 			; anti-aliased sawtooth
                 DCOB_SAW:
                 												; Offset to the correct wavetable in r22, based on note number (0..11)
0001c4 e3e6      			ldi		ZL, low (2*INV_SAW0)		; Load low part of byte address into ZL
0001c5 e1f8      			ldi		ZH, high(2*INV_SAW0)		; Load high part of byte address into ZH
0001c6 0fe0      			add		ZL, r16						; Offset the wavetable by the ramp phase (i)
0001c7 1ff6      			adc		ZH, r22						; Wavetable 0..11
0001c8 95c8      			lpm									;	Load wave(i) into r0
0001c9 2d00      			mov		r16, r0						;	Copy into DCO B
                 
                 RAW_SAWB:			 
                 
0001ca c022      			rjmp	EXIT_PULSEB					; Raw sawtooth. We already have a sawtooth ramp loaded into OSCA (r17)
                 
                 
                 PULSEB:																					
0001cb 9160 00d5 			lds		r22, WAVETABLE_B			; Load wavetable offset 0..11
                 			
0001cd 3065      			cpi		r22, 5					
0001ce f0c8      			brlo	RAW_PULSEB					; Use raw wave if we're playing wavetable 0..4
                 
                 				; r16 phase
                 				; r18 temp
                 				; r23 pulse width
                 				; r22 wavetable
                 				; get sample a into r17
0001cf e3e6      			ldi		ZL, low (2*INV_SAW0)		; Load low part of byte address into ZL
0001d0 e1f8      			ldi		ZH, high(2*INV_SAW0)		; Load high part of byte address into ZH
0001d1 0fe0      			add		ZL, r16						; Offset the wavetable by the ramp phase (i)
0001d2 1ff6      			adc		ZH, r22						; Wavetable 0..15
0001d3 95c8      			lpm									; Load wave(i) into r0
                 
                 	; get sample b out of phase into r18
0001d4 2f27      			mov		r18, r23					; Grab a copy of the pulse width
0001d5 0f20      			add		r18, r16					; Add phase offset for second table (pulse width + original sample)
0001d6 2d00      			mov		r16, r0						; store previous sample in r17
0001d7 e3e6      			ldi		ZL, low (2*INV_SAW0)		; Load low part of byte address into ZL
0001d8 e1f8      			ldi		ZH, high(2*INV_SAW0)		; Load high part of byte address into ZH
0001d9 0fe2      			add		ZL, r18						; Add phase offset for second table.
0001da 1ff6      			adc		ZH, r22						; Wavetable 0..15
0001db 95c8      			lpm									; Load wave(i) into r0
                 
                 	; subtract wave a-b		
                 	; first part b > a, second part b < a
0001dc 2722      			clr		r18
0001dd 1900      			sub		r16, r0			
0001de 0928      			sbc		r18, ZERO
0001df 0f07      			add		r16, r23					; add offset (pulse width)
0001e0 1d28      			adc		r18, ZERO
0001e1 f414      			brge	PULSE_BOUND_CHECKB			; non-negative result, so no need to limit the value
0001e2 e000      			ldi		r16, 0
0001e3 e020      			ldi		r18, 0						; value was negative, so force to zero
                 PULSE_BOUND_CHECKB:
0001e4 2322      			tst		r18							; Check if we're larger than 255
0001e5 f009      			breq	PWM_EXITB					; no need to limit upper bound
0001e6 ef0f      			ldi		r16, $FF
                 PWM_EXITB:
0001e7 c005      			rjmp	EXIT_PULSEB
                 
                 RAW_PULSEB:
                 			; Raw Pulse wave generated on the fly. Aliases like crazy (calc'd only when we're playing octave 0..4)
0001e8 1707      			cp		r16, r23			
0001e9 f010      			brlo	PULSE_ZEROB	
0001ea e000      			ldi		r16, $00					; Set pulse to bottom
0001eb c001      			rjmp	EXIT_PULSEB
                 PULSE_ZEROB:
0001ec ef0f      			ldi		r16, $FF					; Set pulse to top
                 EXIT_PULSEB:
0001ed 5800      			subi    r16, $80					; sign oscillator B
                 
                 			;ldi		r16, $80	; silence osc b (test)
                 		
                 ;-------------------------------------------------------------------------------------------------------------------
                 ; Sum Oscillators
                 ;
                 ; Combines DCOA (in r17) and DCOB (in r16) waves to produce a 16-bit signed result in HDAC:LDAC (r17:r16)
                 
                 
                 ; Mixer out = (A*x + B*(1-x))/4   x=0..1
0001ee e867      			ldi		r22, 135			; Set DCO A level = 135  
0001ef 0316      			mulsu	r17, r22			; signed DCO A wave * level
0001f0 01f0      			movw	r30, r0				; store value in temp register
0001f1 e767      			ldi		r22, 119			; Set DCO B level = 120
0001f2 0306      			mulsu	r16, r22			; signed DCO B wave * level
0001f3 0de0      			add		r30, r0
0001f4 1df1      			adc		r31, r1				; sum scaled waves
0001f5 018f      			movw	r16, r30			; copy signed output into r16
                 
0001f6 940c 0247 			jmp		PRE_DCF
                 
                 ;-------------------------------------------------------------------------------------------------------------------
                 ; Wavetable Oscillators
                 ;
                 WAVE_DCOA:
0001f8 2d04      		    mov	    r16, PHASEA_2				; sawtooth ramp for OSCA
                 
0001f9 9160 00d6 			lds		r22, WAVETABLE				; Wavetable 0..15
0001fb e018      			ldi		r17, 8						; Number of tables in a bank
                 
0001fc 9150 0078 			lds		r21, PATCH_SWITCH1
0001fe fd52      			sbrc	r21, SW_PWM_SWEEP  ; 0/1 (pulse/PWM)	
0001ff 0f61      			add		r22, r17					; Increment wavetable to second bank (waves 8-15)
                 
000200 0f66      			add		r22, r22					; Multiply WAVETABLE by 2 because each table is 512 bytes (256 x 16-bit samples)
                 
000201 2711      			clr		r17							; zero r17
000202 0f00      			add		r16, r16					; Multiply ramp by 2 (512 byte table) and store in r17:r16
000203 1d18      			adc		r17, ZERO					; carry
                 																
                 
                 DCOA_WAVES:
                 												
000204 e3e6      			ldi		ZL, low (2*WAVES)		; Load low part of byte address into ZL
000205 e2f4      			ldi		ZH, high(2*WAVES)		; Load high part of byte address into ZH
000206 0fe0      			add		ZL, r16					; Offset the wavetable by the ramp phase (i)
000207 1ff1      			adc		ZH, r17
                 
000208 0ff6      			add		ZH, r22					; Offset wavetable 0..15 x 2 (each sample is 2 bytes)
                 
000209 9125      			lpm		r18, Z+						; Copy half of the sample into sample high byte and increment pointer 
00020a 9134      			lpm		r19, Z						; Copy other half of sample into sample low byte 
                 
                 									
                 ;Calculate DCO B							
                 
                 WAVE_DCOB:
00020b 2d07      		    mov	    r16, PHASEB_2				; sawtooth ramp for OSCA
                 
00020c 2711      			clr		r17							; zero r17
00020d 0f00      			add		r16, r16					; Multiply ramp by 2 (512 byte table) and store in r17:r16
00020e 1d18      			adc		r17, ZERO					; carry
                 
                 
                 DCOB_WAVES:
                 												
00020f e3e6      			ldi		ZL, low (2*WAVES)		; Load low part of byte address into ZL
000210 e2f4      			ldi		ZH, high(2*WAVES)		; Load high part of byte address into ZH
000211 0fe0      			add		ZL, r16						; Offset the wavetable by the ramp phase (i)
000212 1ff1      			adc		ZH, r17
                 
000213 0ff6      			add		ZH, r22					; Offset wavetable 0..15 x 2 (each sample is 2 bytes)
                 
000214 9105      			lpm		r16, Z+						; Copy half of the sample into sample high byte and increment pointer 
000215 9114      			lpm		r17, Z						; Copy other half of sample into sample low byte 
                 
                 
000216 0000
000217 0000
000218 0000
000219 0000      			NOP NOP NOP NOP
00021a 0000
00021b 0000
00021c 0000
00021d 0000      			NOP NOP NOP NOP
                 
                 			; Output second byte of DCA Level on SPI
00021e 91e0 00e2 			lds		r30, LEVEL_L
000220 b9ef      			out		SPDR, r30
                 
                 
                 
                 			; Shift both oscillators one bit right to make sure we don't overflow the sum.
000221 9515      			asr	    r17		            ;\
000222 9507      			ror	    r16		            ;/ r17:r16 = r17:r16 asr 1
                 
000223 9535      			asr	    r19		            ;\
000224 9527      		    ror	    r18		            ;/ r19:r18 = r19:r18 asr 1
                 
000225 0f02      			add		r16, r18
000226 1f13      			adc		r17, r19			; Sum the oscillators
                 
                 
                 ; Finish loading cutoff or envelope level, pull CS high. 
                 
                 			; Make sure SPI has enough time to complete.
000227 0000
000228 0000
000229 0000
00022a 0000      			NOP	NOP	NOP	NOP
00022b 0000
00022c 0000
00022d 0000
00022e 0000      			NOP	NOP	NOP	NOP
00022f 0000
000230 0000
000231 0000
000232 0000      			NOP	NOP	NOP	NOP
000233 0000
000234 0000
000235 0000
000236 0000      			NOP	NOP	NOP	NOP
                 					
000237 0000
000238 0000
000239 0000
00023a 0000      			NOP	NOP	NOP	NOP
00023b 0000
00023c 0000
00023d 0000
00023e 0000      			NOP	NOP	NOP	NOP
00023f 0000
000240 0000
000241 0000
000242 0000      			NOP	NOP	NOP	NOP
000243 0000
000244 0000
000245 0000
000246 0000      			NOP	NOP	NOP	NOP
                 
                 PRE_DCF:
                 ; Finish loading cutoff or envelope level, pull CS high. 
000247 9a93      			sbi		PORTD, 3	; CS (DAC)
                 
                 			
                 ;-------------------------------------------------------------------------------------------------------------------
                 ; Digitally Controlled Filter
                 ;-------------------------------------------------------------------------------------------------------------------
                 ; 
                 ; A 2-pole resonant low pass filter:
                 ;
                 ; a += f * ((in - a) + q * (a - b));
                 ; b += f * (a - b); 
                 ;
                 ; Input 16-Bit signed HDAC:LDAC (r17:r16), already scaled to minimize clipping (reduced to 25% of full code).
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;
                 
                 DCF:
                 			; rotate right to make headroom for resonance.  
                 
000248 9515                  asr	    r17		            ;\
000249 9507      		    ror	    r16		            ;/ r17:r16 = r17:r16 asr 1
                 			
                 .INCLUDE "digital_filter.inc"	
                 
                 ; Meeblip anode		Version 1.10
                 ;
                 ;
                 ;-------------------------------------------------------------------------------------------------------------------
                 ; Digitally Controlled Filter
                 ;-------------------------------------------------------------------------------------------------------------------
                 ; 
                 ; A 2-pole resonant low pass filter:
                 ;
                 ; a += f * ((in - a) + q * (a - b));
                 ; b += f * (a - b); 
                 ;
                 ; Input 16-Bit signed HDAC:LDAC (r17:r16), already scaled to minimize clipping (reduced to 25% of full code).
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;
                 	;calc (in - a) ; both signed
00024a 1909      	sub	LDAC, a_L
00024b 091a      	sbc	HDAC, a_H
                 					;check for overflow / do hard clipping
00024c f413      	brvc	OVERFLOW_1		;if overflow bit is clear jump to OVERFLOW_1
                 
                 					;sub overflow happened -> set to min
                 					;0b1000.0000 0b0000.0001 -> min
                 					;0b0111.1111 0b1111.1111 -> max
                 
00024d e001      	ldi	LDAC, 0b00000001
00024e e810      	ldi	HDAC, 0b10000000
                 
                 OVERFLOW_1:				;when overflow is clear
                 
                 					;(in-a) is now in HDAC:LDAC as signed
                 					;now calc q*(a-b)
                 
                 					; Scale resonance based on filter cutoff
                 	;lds	r22, RESONANCE
00024f e060      	ldi		r22, 0
000250 9140 0089 	lds	r20, LPF_I		;load 'F' value
000252 ef5f      	ldi	r21, 0xff
                 
000253 1b54      	sub	r21, r20		; 1-F
000254 9556      	lsr	r21
000255 e220      	ldi	r18, 32
000256 0f52      	add	r21, r18
                 
000257 1b65      	sub	r22, r21		; Q-(1-f)
000258 f408      	brcc	OVERFLOW_2		; if no overflow occured
000259 e060      	ldi	r22, 0x00		;0x00 because of unsigned
                 
                 OVERFLOW_2:
                 
00025a 2d49      	mov	r20, a_L		;\
00025b 2d5a      	mov	r21, a_H		;/ load 'a' , signed
                 
00025c 9130 00e0 	lds	z_H, b_H		;\
00025e 9120 00df 	lds	z_L, b_L		;/ load 'b', signed
                 
000260 1b42      	sub	r20, z_L		;\
000261 0b53      	sbc	r21, z_H		;/ (a-b) signed
                 
000262 f413      	brvc	OVERFLOW_3		;if overflow is clear jump to OVERFLOW_3
                 
                 					;0b1000.0000 0b0000.0001 -> min
                 					;0b0111.1111 0b1111.1111 -> max
                 
000263 e041      	ldi	r20, 0b00000001
000264 e850      	ldi	r21, 0b10000000
                 
                 OVERFLOW_3:
                 
                 CALC_LOWPASS:
                 					; mul signed:unsigned -> (a-b) * Q
                 					; 16x8 into 16-bit
                 					; r19:r18 = r21:r20 (ah:al) * r22 (b)
                 
000265 0356      	mulsu	r21, r22		; (signed)ah * b
000266 0190      	movw	r18, r0
000267 9f46      	mul	r20, r22		; al * b
000268 0d21      	add	r18, r1
000269 1d38      	adc	r19, ZERO
00026a 1c00      	rol	r0			; r0.7 --> Cy
00026b f408      	brcc	NO_ROUND		; LSByte < $80, so don't round up
00026c 9523      	inc	r18
                 NO_ROUND:
00026d 9488      	clc
00026e 0f22      	lsl	r18
00026f 1f33      	rol	r19
000270 9488      	clc
000271 0f22      	lsl	r18
000272 1f33      	rol	r19
000273 0199      	movw	z_L,r18			;Q*(a-b) in z_H:z_L as signed
                 
                 					;add both
                 					;both signed
                 					;((in-a)+q*(a-b))
                 					;=> HDAC:LDAC + z_H:z_L
                 
                  DCF_ADD:
                 
000274 0f02      	add	LDAC, z_L
000275 1f13      	adc	HDAC, z_H
                 
000276 f413      	brvc	OVERFLOW_4		;if overflow is clear
                 					;0b1000.0000 0b0000.0001 -> min
                 					;0b0111.1111 0b1111.1111 -> max
                 
000277 ef0f      	ldi	LDAC, 0b11111111
000278 e71f      	ldi	HDAC, 0b01111111
                 
                 OVERFLOW_4:
                 
                 					;Result is a signed value in HDAC:LDAC
                 					;calc * f
                 					;((in-a)+q*(a-b))*f
                 
000279 9140 0089 	lds	r20, LPF_I		;load lowpass 'F' value
                 					; mul signed unsigned HDAC*F
                 					; 16x8 into 16-bit
                 					; r19:r18 = HDAC:LDAC (ah:al) * r20 (b)
                 
00027b 0314      	mulsu	HDAC, r20		; (signed)ah * b
00027c 0190      	movw	r18, r0
00027d 9f04      	mul	LDAC, r20		; al * b
00027e 0d21      	add	r18, r1			; signed result in r19:r18
00027f 1d38      	adc	r19, ZERO
000280 1c00      	rol	r0			; r0.7 --> Cy
000281 f408      	brcc	NO_ROUND2		; LSByte < $80, so don't round up
000282 9523      	inc	r18
                 NO_ROUND2:
                 					;Add result to 'a'
                 					;a+=f*((in-a)+q*(a-b))
                 
000283 0e92      	add	a_L, r18
000284 1ea3      	adc	a_H, r19
000285 f423      	brvc	OVERFLOW_5		;if overflow is clear
                 					;0b1000.0000 0b0000.0001 -> min
                 					;0b0111.1111 0b1111.1111 -> max
                 
000286 ef2f      	ldi	z_L, 0b11111111
000287 e73f      	ldi	z_H, 0b01111111
000288 2e92      	mov	a_L, z_L
000289 2ea3      	mov	a_H, z_H
                 
                 OVERFLOW_5:
                 					;calculated a+=f*((in-a)+q*(a-b)) as signed value and saved in a_H:a_L
                 					;calc 'b'
                 					;b += f * (a*0.5 - b);
                 
00028a 2d3a      	mov	z_H, a_H		;\
00028b 2d29      	mov	z_L, a_L		;/ load 'a' as signed
                 
00028c 91e0 00df 	lds	temp, b_L		;\
00028e 91f0 00e0 	lds	temp2, b_H		;/ load b as signed
                 
000290 1b2e      	sub	z_L, temp		;\
000291 0b3f      	sbc	z_H, temp2		;/ (a - b) signed
                 
000292 f413      	brvc	OVERFLOW_6		;if overflow is clear
                 					;0b1000.0000 0b0000.0001 -> min
                 					;0b0111.1111 0b1111.1111 -> max
                 
000293 e021      	ldi	z_L, 0b00000001
000294 e830      	ldi	z_H, 0b10000000
                 
                 OVERFLOW_6:
                 
000295 9140 0089 	lds	r20, LPF_I		;load lowpass 'F' value
                 
                 					; mul signed unsigned (a-b) * F
                 					; 16x8 into 16-bit
                 					; r19:r18 = z_H:z_L (ah:al) * r20 (b)
000297 0334      	mulsu	z_H, r20		; (signed)ah * b
000298 0190      	movw	r18, r0
000299 9f24      	mul	z_L, r20		; al * b
00029a 0d21      	add	r18, r1			; signed result in r19:r18
00029b 1d38      	adc	r19, ZERO
                 
                 
00029c 0fe2      	add	temp,  r18		;\ add result to 'b' , signed
00029d 1ff3      	adc	temp2, r19		;/ b +=(a-b)*f
                 
00029e f413      	brvc	OVERFLOW_7		;if overflow is clear
                 
                 					;0b1000.0000 0b0000.0001 -> min
                 					;0b0111.1111 0b1111.1111 -> max
                 
00029f efef      	ldi	temp,  0b11111111
0002a0 e7ff      	ldi	temp2, 0b01111111
                 
                 OVERFLOW_7:
                 
0002a1 93e0 00df 	sts	b_L, temp		;\
0002a3 93f0 00e0 	sts	b_H, temp2		;/ save value of 'b'
                 
                 
0002a5 2f0e      	mov	LDAC, temp		;B now contains the filtered signal in HDAC:LDAC
0002a6 2f1f      				
                 				
                 ;-------------------------------------------------------------------------------------------------------------------
                 ; Digitally Controlled Amplifier
                 ;
                 ; Multiply the output waveform by the 8-bit value in LEVEL.
                 ; r17:r16 - output from filter 16b signed
                 ; r18     - output from DCA envelope generator
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;
                 
                 DCA:
                 
0002a7 9120 008a 			lds		r18, level
0002a9 3f2f      			cpi		r18, 255
0002aa f029      			breq	T2_AEXIT	    ; don't multiply when LEVEL==255, use
0002ab 0312      			mulsu	r17, r18		; multiply samples high byte
0002ac 01f0      			movw	r30, r0
0002ad 9f02      			mul		r16, r18		; multipliy samples low byte
0002ae 0de1      			add		r30, r1
0002af 1df8      			adc		r31, ZERO		
                 
                 T2_AEXIT:
                 
                 
                 ;-------------------------------------------------------------------------------------------------------------------
                 ; Output Sample
                 ;
                 ; Write the 16-bit signed output of the DCA to the DAC.
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;
                 
                 ;write sample (r31:r30) to DAC:
                 
                 ; Control bit mask xxxx0011
0002b0 e013      			ldi		r17, 0b00000011 ; Outputs audio signal through DACA, through the Vref pin on DACB. 
                 
                 ; Pull DAC chip select line low to enable clock + data
0002b1 9893      			cbi		PORTD, 3
                 
                 ; Shift MSB data word in r17:r16:r30 left 4 bits, so it's packed 0011 dddd dddd dddd
0002b2 58f0                  subi	r31, 128		    ; U2 --> PB
0002b3 2f0f      			mov		r16, r31
                 
                 ; 12-bit audio (requires MCP4922 DAC for full 12-bit resolution)
0002b4 0fee      			lsl		r30		; shift lsb 1 bit left
0002b5 1f00      			rol		r16		; rotate through r16
0002b6 1f11      			rol		r17		; and into r17
0002b7 0fee      			lsl		r30		; shift 2 bits left
0002b8 1f00      			rol		r16		; rotate through r16
0002b9 1f11      			rol		r17		; and into r17
0002ba 0fee      			lsl		r30		; shift 3 bits left
0002bb 1f00      			rol		r16		; rotate through r16
0002bc 1f11      			rol		r17		; and into r17
0002bd 0fee      			lsl		r30		; shift 4 bits left
0002be 1f00      			rol		r16		; rotate through r16
0002bf 1f11      			rol		r17		; and into r17
                 
                 
                 ; Shift most significant byte into SPI register 
0002c0 b91f      			out		SPDR, r17
                 
                 ; Shift LSB into r17 and do something else for >16 clock cycles while the previous byte shifts in
0002c1 2f10      			mov		r17, r16
                 
                 ; Increment Oscillator A & B phase
                 
0002c2 ecee        			ldi 	r30, low(DELTAA_0)
0002c3 e0f0        			ldi 	r31, high(DELTAA_0)
0002c4 9101        			ld 		r16,z+
0002c5 0e20        			add 	PHASEA_0, r16
0002c6 9101        			ld 		r16,z+
0002c7 1e30        			adc 	PHASEA_1, r16
0002c8 9101        			ld 		r16,z+
0002c9 1e40        			adc 	PHASEA_2, r16
0002ca 9101        			ld 		r16,z+
0002cb 0e50        			add 	PHASEB_0, r16
0002cc 9101        			ld 		r16,z+
0002cd 1e60        			adc 	PHASEB_1, r16
0002ce 9101        			ld 		r16, z+
0002cf 1e70        			adc 	PHASEB_2,r16
                 
                 			; Shift least significant byte into SPI register 
0002d0 b91f      			out		SPDR, r17
                 
                 
                 ;-------------------------------------------------------------------------------------------------------------------
                 ; End of Sample Interrupt
                 ;
                 ; Pop register values off stack and return to our regularly scheduled programming.
                 ;-------------------------------------------------------------------------------------------------------------------
                 ; 
                 
0002d1 901f      			pop 	r1
0002d2 900f        			pop 	r0
0002d3 91ff      			pop		r31
0002d4 91ef      			pop		r30
0002d5 917f      			pop		r23
0002d6 916f      			pop		r22
0002d7 915f      			pop		r21
0002d8 914f      			pop		r20
0002d9 913f      			pop		r19
0002da 912f      			pop     r18 
0002db 911f      		    pop	    r17
                 
                 ; wait 16 cycles for byte to load into DAC, then load both channels and stop SPI clock
                 			;  load DAC
0002dc 9894      			cbi		PORTD, 4
                 			;  Pull DAC chip select line high to disable
0002dd 9a93      			sbi		PORTD, 3
0002de 9a94      			sbi		PORTD, 4
                 
0002df 910f      		    pop	    r16		            ;\
0002e0 bf0f      		    out	    SREG, r16	        ;/ pop SREG
0002e1 910f      		    pop	    r16
0002e2 9518      
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;		M I D I 
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;
                 ; UART receiver (MIDI IN)
                 ;
                 
                 .INCLUDE "midi_in.inc"
                 
                 ; Meeblip anode		Version 1.10
                 ;
                 ;
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;		M I D I 
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;
                 ; UART receiver (MIDI IN)
                 ;
                 
                 UART_RXC:
                 
0002e3 930f                  push	r16
0002e4 b70f      		    in	    r16, SREG	        ;\
0002e5 930f      		    push	r16			        ;/ push SREG
0002e6 931f      			push	r17 
                 
0002e7 b10c      		    in	    r16, UDR	        ; read received byte in r16
0002e8 9857      		    cbi	    UCR, 7		        ; RXCIE=0 (disable UART interrupts)
                 
                 
                 ; Exit UART interrupt immediately if received MIDI value => $F0
0002e9 3f00      			cpi		r16, $F0			; ignore active sensing, midi clocks, sysex
0002ea f020      			brlo	INTRX_PROCESS
0002eb e000      			ldi		r16, 0
0002ec 9300 0060 			sts	    MIDIPHASE, r16		; MIDIPHASE = 0
                 			;sei				            ; enable other interrupts
0002ee c0ee      			rjmp	INTRX_EXIT			; quit UART loop as quickly as possible
                 
                 INTRX_PROCESS:
                 ; end
                 			;sei				            ; enable other interrupts
0002ef 2300      		    tst	    r16		            ;\ jump when
0002f0 f4f2      		    brpl	INTRX_DATA		    ;/ r16.7 == 0 (MIDI data byte)
                 
                 ;MIDI status byte (1xxxxxxx):
0002f1 2f10      		    mov	    r17, r16
0002f2 7f10      		    andi	r17, 0xF0
0002f3 3810      		    cpi	    r17, 0x80
0002f4 f051      		    breq	INTRX_ACCEPT	    ; 8x note off
0002f5 3910      		    cpi	    r17, 0x90
0002f6 f041      		    breq	INTRX_ACCEPT	    ; 9x note on
0002f7 3b10      		    cpi	    r17, 0xB0
0002f8 f031      		    breq	INTRX_ACCEPT	    ; Bx control change
0002f9 3e10      		    cpi	    r17, 0xE0
0002fa f021      		    breq	INTRX_ACCEPT	    ; Ex pitch bend
0002fb e010      		    ldi	    r17, 0		        ;\
0002fc 9310 0060 		    sts	    MIDIPHASE, r17	    ;/ MIDIPHASE = 0
0002fe c0de      		    rjmp	INTRX_EXIT		    ; Ax polyphonic aftertouch
                 						                ; Cx program change
                 						                ; Dx channel aftertouch
                 						                ; Fx system
                 
                 INTRX_ACCEPT:
0002ff 9310 0060             sts	    MIDIPHASE, r17	    ; phase = 80 90 B0 E0
000301 700f      		    andi	r16, 0x0F		    ;\
000302 9503      		    inc	    r16			        ; > store MIDI channel 1..16
000303 9300 0061 		    sts	    MIDICHANNEL, r16	;/
000305 9110 007a 		    lds	    r17, SETMIDICHANNEL	;0 for OMNI or 1..15
000307 2311      		    tst	    r17
000308 f029      		    breq	INTRX_ACPT_X		; end when OMNI
000309 1710      		    cp	    r17, r16			; compare set channel to the incoming channel
00030a f019      		    breq	INTRX_ACPT_X		; end when right channel
00030b e010      		    ldi	    r17, 0			    ;\ otherwise:
00030c 9310 0060 		    sts	    MIDIPHASE, r17		;/ MIDIPHASE = 0 (no data service)
                 
                 INTRX_ACPT_X:
00030e c0ce                  rjmp	INTRX_EXIT
                 
                 ;MIDI data byte (0xxxxxxx):
                 INTRX_DATA:
00030f 9110 0060             lds	    r17, MIDIPHASE
000311 3810      		    cpi	    r17, 0x80		    ;\
000312 f019      		    breq	INTRX_NOFF1		    ; \
000313 3811      		    cpi	    r17, 0x81		    ; / note off
000314 f039      		    breq	INTRX_NOFF2		    ;/
000315 c00a      		    rjmp	INTRX_NOTEON
                 
                 INTRX_NOFF1:
000316 9513                  inc	    r17			        ;\
000317 9310 0060 		    sts	    MIDIPHASE, r17	    ;/ MIDIPHASE = 0x81
000319 9300 0062 		    sts	    MIDIDATA0, r16	    ; MIDIDATA0 = d
00031b c0c1      		    rjmp	INTRX_EXIT
                 
                 INTRX_NOFF2:
00031c 951a                  dec	    r17			        ;\
00031d 9310 0060 		    sts	    MIDIPHASE, r17	    ;/ MIDIPHASE = 0x80
00031f c010      		    rjmp	INTRXNON2_OFF
                 
                 ;9x note on:
                 INTRX_NOTEON:
000320 3910                  cpi	    r17, 0x90		    ;\
000321 f019      		    breq	INTRX_NON1		    ; \
000322 3911      		    cpi	    r17, 0x91		    ; / note on
000323 f039      		    breq	INTRX_NON2		    ;/
000324 c03f      		    rjmp	INTRX_CTRL
                 
                 INTRX_NON1:
000325 9513                  inc     r17			        ;\
000326 9310 0060 		    sts	    MIDIPHASE, r17	    ;/ MIDIPHASE = 0x91
000328 9300 0062 		    sts	    MIDIDATA0, r16	    ; MIDIDATA0 = d
00032a c0b2      		    rjmp	INTRX_EXIT
                 
                 INTRX_NON2:
00032b 951a                  dec	    r17			        ;\
00032c 9310 0060 		    sts	    MIDIPHASE, r17	    ;/ MIDIPHASE = 0x90
00032e 2300      		    tst	    r16			        ;\
00032f f509      		    brne	INTRXNON2_ON	    ;/ jump when velocity != 0
                 
                 ;turn note off:
                 INTRXNON2_OFF:
000330 9100 0062             lds	    r16, MIDIDATA0
000332 9110 0066 		    lds	    r17, MIDINOTEPREV
000334 1701      		    cp	    r16, r17
000335 f419      		    brne	INTRXNON2_OFF1
000336 ef1f      		    ldi	    r17, 255		    ;\ remove previous note
000337 9310 0066 		    sts	    MIDINOTEPREV, r17	;/ from buffer
                 
                 INTRXNON2_OFF1:
000339 9110 0064             lds	    r17, MIDINOTE
00033b 1701      		    cp	    r16, r17		    ;\
00033c f459      		    brne	INTRXNON2_OFF3	    ;/ exit when not the same note
00033d 9110 0066 		    lds	    r17, MIDINOTEPREV
00033f 3f1f      		    cpi	    r17, 255
000340 f041      		    breq	INTRXNON2_OFF2
000341 9310 0064 		    sts	    MIDINOTE, r17		; previous note is valid
000343 9310 0065 			sts		LFONOTE, r17		; Keep a copy for LFO
000345 ef1f      		    ldi	    r17, 255		    ;\ remove previous note
000346 9310 0066 		    sts	    MIDINOTEPREV, r17	;/ from buffer
                 
                 INTRXNON2_OFF3:
000348 c094                  rjmp	INTRX_EXIT
                 
                 INTRXNON2_OFF2:
000349 ef1f                  ldi	    r17, 255		    ;\ remove last note
00034a 9310 0064 		    sts	    MIDINOTE, r17		;/
00034c e010      		    ldi	    r17, 0			    ;\
00034d 9310 009e 		    sts	    GATE, r17		    ;/ GATE = 0
00034f 9a91      			sbi	    PORTD, 1		    ; LED on
000350 c08c      		    rjmp	INTRX_EXIT
                 
                 ;turn note on:
                 INTRXNON2_ON:
000351 9300 0063             sts	    MIDIVELOCITY, r16	; store velocity
000353 9110 0064 		    lds	    r17, MIDINOTE		;\ move previous note
000355 9310 0066 		    sts	    MIDINOTEPREV, r17	;/ into buffer
000357 9110 0062 		    lds	    r17, MIDIDATA0		;\
000359 9310 0064 		    sts	    MIDINOTE, r17		;/ MIDINOTE = note#
00035b 9310 0065 			sts		LFONOTE, r17		; Store note for LFO
00035d e011      		    ldi	    r17, 1
00035e 9310 009e 		    sts	    GATE, r17		    ; GATE = 1
000360 9310 009f 		    sts	    GATEEDGE, r17		; GATEEDGE = 1
                 		    
000362 9891      			cbi	    PORTD, 1		    ; LED off
000363 c079      		    rjmp	INTRX_EXIT
                 
                 ;Bx control change:
                 INTRX_CTRL:
000364 3b10                  cpi	    r17, 0xB0		    ;\
000365 f019      		    breq	INTRX_CC1		    ; \
000366 3b11      		    cpi	    r17, 0xB1		    ; / control change
000367 f039      		    breq	INTRX_CC2		    ;/
000368 c05b      		    rjmp	INTRX_PBEND
                 
                 INTRX_CC1:
000369 9513                  inc     r17			        ;\
00036a 9310 0060 		    sts	    MIDIPHASE, r17		;/ MIDIPHASE = 0xB1
00036c 9300 0062 		    sts	    MIDIDATA0, r16		; MIDIDATA0 = controller#
00036e c06e      		    rjmp	INTRX_EXIT
                 
                 INTRX_CC2:
00036f 951a                  dec     r17			        ;\
000370 9310 0060 		    sts	    MIDIPHASE, r17		;/ MIDIPHASE = 0xB0
000372 9110 0062 		    lds	    r17, MIDIDATA0
                 
                 ;Store MIDI CC in table
000374 93af      			push 	r26					; store contents of r27 and r26 on stack
000375 93bf      			push	r27
                 
000376 3310      			cpi		r17, $30			; Just save a controller # < $30
000377 f020      			brlo	INTRX_GOSAVE
                 
000378 3410      			cpi		r17, $40			; save, update old knob value and status
000379 f018      			brlo	INTRX_KNOB
                 
00037a 3510      			cpi		r17, $50			; save, update old switch value and status
00037b f0d0      			brlo	INTRX_SW
                 
                 INTRX_GOSAVE:
00037c c03e      			rjmp	INTRX_SAVE			; Save all other controller # > $50
                 
                 INTRX_KNOB:
                 			; save the value in the MIDI table
00037d e3aa      			ldi 	r26,low(MIDICC)			
00037e e0b1        			ldi 	r27,high(MIDICC)
00037f 0fa1        			add 	r26,r17
000380 1db8        			adc 	r27,zero
000381 0f00        			lsl 	r16					; shift MIDI data to 0..254 to match knob value
000382 930c        			st 		x,r16				; store in MIDI CC table
                 
                 			; Get ADC_X and write it into OLD_ADC_X
000383 5310      			subi	r17, $30			; reduce to 0..15
000384 7017      			cbr		r17, $f8			; Clear highest 5 bits, leaving knob 0..7		
                 
000385 e8ae      			ldi 	r26,low(ADC_0)			
000386 e0b0        			ldi 	r27,high(ADC_0)
000387 0fa1        			add 	r26,r17
000388 1db8        			adc 	r27,zero
000389 910c      			ld		r16, x				; Fetch ADC_X into r16
                 
00038a e9a6      			ldi 	r26,low(OLD_ADC_0)			
00038b e0b0        			ldi 	r27,high(OLD_ADC_0)
00038c 0fa1        			add 	r26,r17
00038d 1db8        			adc 	r27,zero
00038e 930c      			st		x, r16				; Store ADC_X in OLD_ADC_X
                 
                 			; Clear KNOBX_STATUS (knob not moved)
00038f e6ac      			ldi 	r26,low(KNOB0_STATUS)			
000390 e0b0        			ldi 	r27,high(KNOB0_STATUS)
000391 0fa1        			add 	r26,r17
000392 1db8        			adc 	r27,zero
000393 e010      			ldi		r17, 0
000394 931c      			st		x, r17				; Clear KNOBX_STATUS
000395 c02b      			rjmp	INTRX_CCEND
                 
                 INTRX_SW:
000396 5410      		subi	r17, $40			; MIDI CC # --> switch offset 0..15
                 ;- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
                 		
                 INTRX_SWITCH1:		
                 		
000397 7017      		cbr		r17, $f8			; Clear highest 5 bits, leaving switch 0..7
000398 91a0 0078 		lds		r26, PATCH_SWITCH1
00039a fb06      		bst	    r16, 6 		; load MSB of MIDI CC value into SREG T bit	
                 		
00039b 3010      		cpi		r17, 0 
00039c f411      		brne	INTRX_SW1		
00039d f9a0      		bld		r26, 0			; Set bit in PATCH_SWITCH1
00039e c019      		rjmp	INTRX_SWEXIT
                 INTRX_SW1:
00039f 3011      		cpi		r17, 1 
0003a0 f411      		brne	INTRX_SW2		
0003a1 f9a1      		bld		r26, 1			; Set bit in PATCH_SWITCH1
0003a2 c015      		rjmp	INTRX_SWEXIT
                 INTRX_SW2:
0003a3 3012      		cpi		r17, 2 
0003a4 f411      		brne	INTRX_SW3		
0003a5 f9a2      		bld		r26, 2			; Set bit in PATCH_SWITCH1
0003a6 c011      		rjmp	INTRX_SWEXIT
                 INTRX_SW3:
0003a7 3013      		cpi		r17, 3 
0003a8 f411      		brne	INTRX_SW4		
0003a9 f9a3      		bld		r26, 3			; Set bit in PATCH_SWITCH1
0003aa c00d      		rjmp	INTRX_SWEXIT
                 INTRX_SW4:
0003ab 3014      		cpi		r17, 4 
0003ac f411      		brne	INTRX_SW5		
0003ad f9a4      		bld		r26, 4			; Set bit in PATCH_SWITCH1
0003ae c009      		rjmp	INTRX_SWEXIT
                 INTRX_SW5:
0003af 3015      		cpi		r17, 5 
0003b0 f411      		brne	INTRX_SW6		
0003b1 f9a5      		bld		r26, 5			; Set bit in PATCH_SWITCH1
0003b2 c005      		rjmp	INTRX_SWEXIT
                 INTRX_SW6:
0003b3 3016      		cpi		r17, 6 
0003b4 f411      		brne	INTRX_SW7		
0003b5 f9a6      		bld		r26, 6			; Set bit in PATCH_SWITCH1
0003b6 c001      		rjmp	INTRX_SWEXIT
                 INTRX_SW7:			
0003b7 f9a7      		bld		r26, 7			; Set bit in PATCH_SWITCH1
                 
                 INTRX_SWEXIT:					; Finished switch scan, store updated switch bytes
0003b8 93a0 0078 		sts		PATCH_SWITCH1, r26
0003ba c006      		rjmp	INTRX_CCEND
                 
                 INTRX_SAVE:
0003bb e3aa      			ldi 	r26,low(MIDICC)			
0003bc e0b1        			ldi 	r27,high(MIDICC)
0003bd 0fa1        			add 	r26,r17
0003be 1db8        			adc 	r27,zero
0003bf 0f00        			lsl 	r16					; shift MIDI data to 0..254 to match knob value
0003c0 930c        			st 		x,r16				; store in MIDI CC table
                 
                 INTRX_CCEND:
0003c1 91bf      			pop		r27					; reload old contents of r27 and r 26
0003c2 91af      			pop		r26
0003c3 c019      		    rjmp	INTRX_EXIT
                 
                 ;Ex pitch bender:
                 INTRX_PBEND:
0003c4 3e10                  cpi	    r17, 0xE0		    ;\
0003c5 f019      		    breq	INTRX_PB1		    ; \
0003c6 3e11      		    cpi	    r17, 0xE1		    ; / pitch bend
0003c7 f039      		    breq	INTRX_PB2		    ;/
0003c8 c014      			rjmp	INTRX_EXIT
                 
                 INTRX_PB1:
0003c9 9513                  inc     r17			        ;\
0003ca 9310 0060 		    sts	    MIDIPHASE, r17		;/ MIDIPHASE = 0xE1
0003cc 9300 0062 		    sts	    MIDIDATA0, r16		; MIDIDATA0 = dFine	0..127
0003ce c00e      		    rjmp	INTRX_EXIT
                 
                 INTRX_PB2:
0003cf 951a                  dec	    r17			        ;\
0003d0 9310 0060 		    sts	    MIDIPHASE, r17		;/ MIDIPHASE = 0xE0
0003d2 9110 0062 		    lds	    r17,MIDIDATA0		;\
0003d4 0f11      		    lsl	    r17			        ;/ r17 = dFine*2	0..254
0003d5 0f11      		    lsl	    r17			        ;\ r16,r17 = P.B.data
0003d6 1f00      		    rol	    r16			        ;/ 0..255,996
0003d7 5800      		    subi	r16, 128		    ; r16,r17 = -128,000..+127,996
0003d8 9310 0067 		    sts	    MIDIPBEND_L, r17	;\
0003da 9300 0068 		    sts	    MIDIPBEND_H, r16	;/ store P.BEND value
0003dc c000      		    rjmp	INTRX_EXIT
                 
                 INTRX_EXIT:
0003dd 911f                  pop	    r17
0003de 910f      		    pop	    r16			        ;\
0003df bf0f      		    out	    SREG, r16		    ;/ pop SREG
0003e0 910f      		    pop	    r16
0003e1 9a57      		    sbi	    UCR, 7			    ; RXCIE=1
0003e2 9518      
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;		S U B R O U T I N E S
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;
                 ;		ADC_START			- Get knob value
                 ;		ADC_END				- Finish getting knob value
                 ;		ASr16				- 16 bit arithmetic shift right
                 ;		SHr32				- 32 bit logical shift right
                 ;		SHL32				- 32 bit logical shift left
                 ;		MUL32X16			- 32 bit x 16 bit multiplication (unsigned)
                 ;		LOAD_32BIT			- Load 32 bit phase value from ROM
                 ;		LOAD_DELTA			- Load phase delta from ROM
                 ;		NOTERECALC			- Note number recalculation
                 ;		TAB_BYTE			- Read byte from table
                 ;		TAB_WORD			- Read word from table
                 ;		ADCTORATE			- Time to Rate conversion
                 ;		NONLINPOT			- Nonlinear potentiometer conversion (Oscillator detune)
                 ;		EEPROM_WRITE		- Write byte to non-volatile eeprom memory
                 ;		EEPROM_READ			- Read byte from non-volatile eeprom memory
                 ;		SET_MIDI_CHANNEL	- Set new MIDI channel, reset LED flash
                 ;		CLEAR_KNOB_STATUS	- Set knob status to 'unmoved' and save current knob positions
                 ;		POT_SCAN			- Scan a knob and update its value if it has been moved
                 ;		
                 
                 .INCLUDE "subroutines.inc"
                 
                 ; Meeblip anode		Version 1.10
                 ;
                 ;
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;			I/O subroutines
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;
                 ;-----------------------------------------------------------------------------
                 ;A/D conversion (start)
                 ;- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
                 ;In:	    r18 = channel #	        0..7
                 ;Out:	-
                 ;Used:	-
                 ;-----------------------------------------------------------------------------
                 ADC_START:
0003e3 b927                  out	    ADMUX, r18	        ; set multiplexer
0003e4 9a36      		    sbi	    ADCSRA, 6	        ; ADSC=1
0003e5 9508      		    ret
                 
                 ;-----------------------------------------------------------------------------
                 ;A/D conversion (end)
                 ;- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
                 ;In:	-
                 ;Out:	    r16 = result		            0..255
                 ;Used:	    SREG,r17
                 ;-----------------------------------------------------------------------------
                 ADC_END:
                 ADCE_LOOP:
0003e6 9b34                  sbis	ADCSRA, 4 	        ;\
0003e7 cffe      		    rjmp	ADCE_LOOP	        ;/ wait for ADIF==1
0003e8 9a34      		    sbi	    ADCSRA, 4 		    ; clear ADIF
0003e9 b104      		    in	    r16, ADCL	        ;\
0003ea b115      		    in	    r17, ADCH	        ;/ r17:r16 = 000000Dd:dddddddd
0003eb 9516      		    lsr	    r17		            ;\
0003ec 9507      		    ror	    r16		            ;/ r17:r16 = 0000000D:dddddddd
0003ed 9516      		    lsr	    r17		            ;\
0003ee 9507      		    ror	    r16		            ;/ r16 = Dddddddd
0003ef 9508      		    ret
                 
                 ;=============================================================================
                 ;			arithmetic subroutines
                 ;=============================================================================
                 
                 ;-----------------------------------------------------------------------------
                 ; 16 bit arithmetical shift right (division by 2^n)
                 ;- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
                 ;In:	    r17:r16 = x
                 ;	        r18 = n (shift count)		0..16
                 ;Out:	    r17:r16 = x asr n
                 ;Used:	    SREG
                 ;-----------------------------------------------------------------------------
                 ASr16:
0003f0 2322                  tst	    r18
0003f1 f031      		    breq	ASr16_EXIT
0003f2 932f      		    push	r18
                 
                 ASr16_LOOP:
0003f3 9515                  asr	    r17		            ;\
0003f4 9507      		    ror	    r16		            ;/ r17,r16 = r17,r16 asr 1
0003f5 952a      		    dec	    r18
0003f6 f7e1      		    brne	ASr16_LOOP
0003f7 912f      		    pop	    r18
                 
                 ASr16_EXIT:
0003f8 9508                  ret
                 
                 ;-----------------------------------------------------------------------------
                 ; 32 bit logical shift right
                 ;- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
                 ;In:	    r19:r18:r17:r16 = x
                 ;	        r20 = n (shift count)
                 ;Out:	    r19:r18:r17:r16 = x >> n
                 ;Used:	    SREG
                 ;-----------------------------------------------------------------------------
                 SHr32:
0003f9 2344                  tst	    r20
0003fa f041      		    breq	SHr32_EXIT
0003fb 934f      		    push	r20
                 
                 SHr32_LOOP:
0003fc 9536                  lsr	    r19
0003fd 9527      		    ror	    r18
0003fe 9517      		    ror	    r17
0003ff 9507      		    ror	    r16
000400 954a      		    dec	    r20
000401 f7d1      		    brne	SHr32_LOOP
000402 914f      		    pop	    r20
                 
                 SHr32_EXIT:
000403 9508                  ret
                 
                 ;-----------------------------------------------------------------------------
                 ; 32 bit logical shift left
                 ;- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
                 ;In:	    r19:r18:r17:r16 = x
                 ;	        r20 = n (shift count)
                 ;Out:	    r19:r18:r17:r16 = x << n
                 ;Used:	    SREG
                 ;-----------------------------------------------------------------------------
                 SHL32:
000404 2344                  tst	    r20
000405 f041      		    breq	SHL32_EXIT
000406 934f      		    push	r20
                 
                 SHL32_LOOP:
000407 0f00                  lsl	    r16
000408 1f11      		    rol	    r17
000409 1f22      		    rol	    r18
00040a 1f33      		    rol	    r19
00040b 954a      		    dec	    r20
00040c f7d1      		    brne	SHL32_LOOP
00040d 914f      		    pop	    r20
                 
                 SHL32_EXIT:
00040e 9508                  ret
                 
                 ;-----------------------------------------------------------------------------
                 ;32 bit x 16 bit multiplication (unsigned)
                 ;- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
                 ;In:	r19:r18:r17:r16 = x		0..2^32-1
                 ;	r23:r22 = y			0,yyyyyyyyyyyyyyyy  0..0,9999847
                 ;Out:	r19:r18:r17:r16 = x * y	0..2^32-1
                 ;Used:	SREG,r20-r29
                 ;-----------------------------------------------------------------------------
                 MUL32X16:
                 
                 ; multiply with high multiplier x
00040f 9f37      		mul		r19, r23		; ax
000410 01e0      		movw	r29:r28, r1:r0
000411 9f27      		mul		r18, r23		; bx
000412 01a0      		movw	r21:r20, r1:r0
000413 9f17      		mul		r17, r23		; cx
000414 01d0      		movw	r27:r26, r1:r0
000415 9f07      		mul		r16, r23		; dx
000416 2d90      		mov		r25, r0
000417 0da1      		add		r26, r1
000418 1fb4      		adc		r27, r20
000419 1fc5      		adc		r28, r21
00041a 1dd8      		adc		r29, ZERO
                 ; multiply with low multiplier y
00041b 9f36      		mul		r19, r22		; ay
00041c 01a0      		movw	r21:r20, r1:r0
00041d 9f16      		mul		r17, r22		; cy
00041e 0d90      		add		r25, r0
00041f 1da1      		adc		r26, r1
000420 1fb4      		adc		r27, r20
000421 1fc5      		adc		r28, r21
000422 1dd8      		adc		r29, ZERO
000423 9f26      		mul		r18, r22		; by
000424 01a0      		movw	r21:r20, r1:r0
000425 9f06      		mul		r16, r22		; dy
000426 2d80      		mov		r24, r0
000427 0d91      		add		r25, r1
000428 1fa4      		adc		r26, r20
000429 1fb5      		adc		r27, r21
00042a 1dc8      		adc		r28, ZERO
00042b 1dd8      		adc		r29, ZERO
                 
00042c 2f0a      		mov		r16,r26			;\
00042d 2f1b      		mov		r17,r27			; \
00042e 2f2c      		mov		r18,r28			; / x * y
00042f 2f3d      		mov		r19,r29			;/
                 
000430 9508      		ret
                 ;-----------------------------------------------------------------------------
                 ; Load 32 bit phase value from ROM
                 ;- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
                 ;In:	    r30 = index
                 ;Out:	    r19:r18:r17:r16 = value
                 ;Used:	    SREG,r0,r30,r31
                 ;-----------------------------------------------------------------------------
                 LOAD_32BIT:
000431 0fee                  lsl	    r30			        ; r30 *= 2
000432 e0f0      		    ldi	    r31, 0
000433 96bb      		    adiw	r30, DELTA_C	    ; Z = ROM address
000434 0fee      		    add	    r30, r30
000435 1fff          		adc	    r31, r31
000436 9105      			lpm		r16, z+
000437 9115      			lpm		r17, z+
000438 9125      			lpm		r18, z+
000439 9135      			lpm		r19, z+
00043a 9508      		    ret
                 
                 ;-----------------------------------------------------------------------------
                 ; Load phase delta from ROM
                 ;- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
                 ;In:	    r23,r22 = indexs = 0,0..12,0 = n,octave
                 ;Out:	    r19:r18:r17:r16 = delta
                 ;Used:	    SREG,r0,r21,r24-r31
                 ;-----------------------------------------------------------------------------
                 LOAD_DELTA:
00043b 936f                  push	r22
00043c 937f      		    push	r23
00043d 2fe7      		    mov	    r30, r23
00043e dff2          		rcall	LOAD_32BIT
00043f 2f80      		    mov	    r24, r16
000440 2f91      		    mov	    r25, r17
000441 2fa2      		    mov	    r26, r18
000442 2fb3      		    mov	    r27, r19		    ; r27-r24 = delta[n]
000443 2fe7      		    mov	    r30, r23
000444 95e3      		    inc	    r30
000445 dfeb      		    rcall	LOAD_32BIT
000446 1b08      		    sub	    r16, r24
000447 0b19      		    sbc	    r17, r25
000448 0b2a      		    sbc	    r18, r26
000449 0b3b      		    sbc	    r19, r27
00044a 938f      		    push	r24
00044b 939f      		    push	r25
00044c 93af      		    push	r26
00044d 93bf      		    push	r27
00044e 2f76      		    mov	    r23, r22
00044f e060      		    ldi	    r22, 0
000450 934f      		    push	r20
000451 dfbd      		    rcall	MUL32X16
000452 914f      		    pop	    r20
000453 91bf      		    pop	    r27
000454 91af      		    pop	    r26
000455 919f      		    pop	    r25
000456 918f      		    pop	    r24
000457 0f08          		add	    r16, r24
000458 1f19      		    adc	    r17, r25
000459 1f2a          		adc	    r18, r26
00045a 1f3b      		    adc	    r19, r27
00045b 917f      		    pop	    r23
00045c 916f      		    pop	    r22
00045d 9508      		    ret
                 
                 ;-----------------------------------------------------------------------------
                 ;note number recalculation
                 ;- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
                 ;In:	    r23 = n	                    0..139 = m12 + 12*n12
                 ;Out:	    r23 = m12                   0..11
                 ;	        r20 = n12                   0..11
                 ;Used:	    SREG
                 ;-----------------------------------------------------------------------------
                 NOTERECALC:
00045e e040                  ldi	r20,0			        ; n12 = 0
00045f c002      		    rjmp	NRC_2
                 
                 NRC_1:
000460 507c                  subi	r23, 12			    ; m12 -= 12
000461 9543      		    inc	    r20			        ; n12++
                 
                 NRC_2:
000462 307c                  cpi	    r23, 12
000463 f7e0      		    brsh	NRC_1			    ; repeat while m12 >= 12
000464 9508      		    ret
                 
                 ;-----------------------------------------------------------------------------
                 ;read a byte from a table
                 ;- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
                 ;In:	    r16 = i		                0..255
                 ;	        r31:r30 = &Tab
                 ;Out:	    r16 = Tab[i]	                0..255
                 ;Used:	    SREG,r30,r31
                 ;-----------------------------------------------------------------------------
                 TAB_BYTE:
000465 0fee                  add	    r30, r30			;\
000466 1fff      		    adc	    r31, r31		    ;/ Z = 2 * &Tab
000467 0fe0      		    add	    r30, r16
000468 1df8      		    adc	    r31, ZERO
000469 9104      		    lpm		r16, z
00046a 9508      		    ret
                 
                 ;-----------------------------------------------------------------------------
                 ;read a word from a table
                 ;- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
                 ;In:	    r16 = i			            0..255
                 ;	        r31:r30 = &Tab
                 ;Out:	    r19:r18 = Tab[i]            0..65535
                 ;Used:	    SREG,r0,r30,r31
                 ;-----------------------------------------------------------------------------
                 TAB_WORD:
00046b 0fe0                  add	    r30, r16
00046c 1df8      		    adc	    r31, ZERO
00046d 0fee      		    add	    r30, r30		    ;\
00046e 1fff      		    adc	    r31, r31		    ;/ Z = 2 * &Tab
00046f 9125      		    lpm		r18, z+				; LSByte
000470 9134      			lpm		r19, z				; MSByte
000471 9508      		    ret
                 
                 ;-----------------------------------------------------------------------------
                 ;"time" --> "rate" conversion
                 ;- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
                 ;In:	    r16 = time			        0..255
                 ;Out:	    r19:r18:r17:r16 = rate		0x001B0000..0xFFFF0000
                 ;Used:	    SREG,r0,r30,r31
                 ;-----------------------------------------------------------------------------
                 ADCTORATE:
000472 9506                  lsr	    r16
000473 9506      		    lsr	    r16
000474 9506      		    lsr	    r16			        ;0..31
000475 ece5      			ldi		r30, low( TIMETORATE)
000476 e0f0      			ldi		r31, high(TIMETORATE)
000477 dff3      		    rcall	TAB_WORD		    ;r19:r18 = rate
000478 2700      		    clr	    r16
000479 2711      		    clr	    r17
00047a 9508      		    ret
                 
                 ;-----------------------------------------------------------------------------
                 ;conversion of the "detune B" potentiometer function
                 ;- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
                 ;In:	    r16 = x		                0..255
                 ;Out:	    r17,r16 = y	                0,000..255,996
                 ;Used:	    SREG,r18-r30
                 ;-----------------------------------------------------------------------------
                 NONLINPOT:
00047b e060                  ldi	    r22, 0
00047c 2f70      		    mov	    r23, r16
00047d 3770          		cpi	    r23, 112
00047e f018      		    brlo	NLP_I
00047f 3970      		    cpi	    r23, 144
000480 f038      		    brlo	NLP_II
000481 c00c      		    rjmp	NLP_III
                 
                 ; 62.5 kHz calcs.  
                 
                 NLP_I:
000482 e000                  ldi	    r16, 0			    ;\  r18,r17:r16 = m =
000483 e210      		    ldi	    r17, 32			    ; > = 126/112 =
000484 e021      		    ldi	    r18, 1			    ;/  = 1.125
000485 e0e0          		ldi	    r30, 0			    ;\ r31,r30 = n =
000486 e0f0      		    ldi	    r31, 0			    ;/ = 0,0
000487 c00b      		    rjmp	NLP_CONT
                 
                 NLP_II:
000488 e008                  ldi	    r16, 8			    ;\  r18,r17:r16 = m =
000489 e211      		    ldi	    r17, 33			    ; > = (130-126)/(143-112) =
00048a e020          		ldi	    r18, 0			    ;/  = 0.129032258
00048b e8ec      		    ldi	    r30, 140		    ;\ r31,r30 = n =
00048c e6ff      		    ldi	    r31, 111		    ;/ = 126 - m*112 = 111.5483871
00048d c005      		    rjmp	NLP_CONT
                 
                 NLP_III:
00048e eb07                  ldi	    r16, 183		    ;\  r18,r17:r16 = m =
00048f e11d      		    ldi	    r17, 29			    ; > = (255-130)/(255-143) =
000490 e021      		    ldi	    r18, 1			    ;/  = 1.116071429
000491 e6e7          		ldi	    r30, 103		    ;\ r31,r30 = n =
000492 eef2      		    ldi	    r31, 226		    ;/ 255 - m*255 = -29.59821429
                 
                 NLP_CONT:
000493 e030                  ldi	    r19, 0
000494 df7a      		    rcall	MUL32X16
000495 0f0e      		    add	    r16, r30
000496 1f1f      		    adc	    r17, r31
000497 9508      		    ret
                 
                 ;-----------------------------------------------------------------------------
                 ; Write byte to eeprom memory
                 ;- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
                 ;In:	    r16 	= value		                0..255
                 ;			r18:r17 = eeprom memory address
                 ;Used:	    r16, r17, r18
                 ;-----------------------------------------------------------------------------
                 EEPROM_write:
                 										; Wait for completion of previous write
000498 99e1      			sbic 	EECR,EEWE
000499 cffe      			rjmp 	EEPROM_write
00049a b6bf      			in		temp_SREG, SREG		; save SREG
00049b 94f8      			cli							; disable interrupts during timed eeprom sequence
00049c bb2f      			out 	EEARH, r18 
00049d bb1e      			out 	EEARL, r17			; single byte offset from WRITE_OFFSET
00049e bb0d      			out 	EEDR,  r16			; Write data (r16) to data register
00049f 9ae2      			sbi 	EECR,EEMWE			; Write logical one to EEMWE
0004a0 9ae1      			sbi 	EECR,EEWE			; Start eeprom write by setting EEWE
0004a1 bebf      			out		SREG, temp_SREG		; restore SREG (restarts interrupts if enabled)
0004a2 9508      			ret									
                 
                 ;-----------------------------------------------------------------------------
                 ; Read byte from eeprom memory
                 ;- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
                 ;In:	    r18:r17 = eeprom memory address
                 ;Out:		r16 	= value		                0..255
                 ;Used:	    r16, r17, r18
                 ;-----------------------------------------------------------------------------
                 EEPROM_read:
                 										
0004a3 99e1      			sbic 	EECR,EEWE			; Wait for completion of previous write
0004a4 cffe      			rjmp 	EEPROM_read
0004a5 b6bf      			in		temp_SREG, SREG		; save SREG
0004a6 94f8      			cli							; disable interrupts during timed eeprom sequence
0004a7 bb2f      			out 	EEARH, r18			; Set up address (r18:r17) in address register
0004a8 bb1e      			out 	EEARL, r17
0004a9 9ae0      			sbi 	EECR, EERE			; Start eeprom read by writing EERE
0004aa b30d      			in 		r16, EEDR			; Read data from data register
0004ab bebf      			out		SREG, temp_SREG 	; restore SREG (restarts interrupts if enabled)
0004ac 9508      			ret
                 
                 ;-----------------------------------------------------------------------------
                 ; Set new MIDI channel, reset LED flash
                 ;- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
                 ; In:		r16 = New MIDI Channel
                 ; Out:		NONE
                 ; Used:		r16, r17, r18
                 ;-----------------------------------------------------------------------------
                 SET_MIDI_CHANNEL:
                 
0004ad 9300 007a 			sts	    SETMIDICHANNEL, r16		
0004af e023      			ldi		r18, $03
0004b0 ef1f      			ldi		r17, $FF				; Set eeprom address to $03FF (last byte in memory)
0004b1 dfe6      			rcall   EEPROM_WRITE			; Write r16 to eeprom for recall next time we power on
                 
                 			; Don't simply reset LED. Instead, reset the timer and set the Status to 2 (successfully set)
                 			;sbi	    PORTD, 1		        ; Clear control button parameters and leave the LED on
                 			;ldi		r16, 0					;
                 			;sts		BUTTON_STATUS, r16		; Clear midi set button
                 
                 			; blink LED double fast if midi channel has been set. 
0004b2 e003      			ldi		r16, 3
0004b3 9300 00e8 			sts		BUTTON_STATUS, r16	; Set control status to channel set success, turn on control timer
0004b5 ef0f      			ldi		r16, 255
0004b6 9300 00e6 			sts		LED_TIMER, r16
0004b8 e300      			ldi		r16, 48
0004b9 9300 00e7 			sts		LED_TIMER2, r16
0004bb 9508      			ret
                 
                 ;-----------------------------------------------------------------------------
                 ; Clear knob status
                 ; Set knob status to 'unmoved' and save current knob positions
                 ;- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
                 ;In:	    --
                 ;Out:		--
                 ;Used:	    r16
                 ;-----------------------------------------------------------------------------
                 
                 CLEAR_KNOB_STATUS:						;	set knob status to 'unmoved' and save current knob positions
0004bc 2700      			clr		r16
0004bd 9300 006c 			sts		KNOB0_STATUS, r16	; 
0004bf 9300 006d 			sts		KNOB1_STATUS, r16	; 
0004c1 9300 006e 			sts		KNOB2_STATUS, r16	; 
0004c3 9300 006f 			sts		KNOB3_STATUS, r16	; 
0004c5 9300 0070 			sts		KNOB4_STATUS, r16	; 
0004c7 9300 0071 			sts		KNOB5_STATUS, r16	; 
0004c9 9300 0072 			sts		KNOB6_STATUS, r16	; 
0004cb 9300 0073 			sts		KNOB7_STATUS, r16	; 
0004cd 9100 008e 			lds	    r16, ADC_0			; Save current pot positions for future comparison
0004cf 9300 0096 			sts	    OLD_ADC_0,r16
0004d1 9100 008f 			lds	    r16, ADC_1			 
0004d3 9300 0097 			sts	    OLD_ADC_1,r16
0004d5 9100 0090 			lds	    r16, ADC_2			 
0004d7 9300 0098 			sts	    OLD_ADC_2,r16
0004d9 9100 0091 			lds	    r16, ADC_3			 
0004db 9300 0099 			sts	    OLD_ADC_3,r16
0004dd 9100 0092 			lds	    r16, ADC_4			 
0004df 9300 009a 			sts	    OLD_ADC_4,r16
0004e1 9100 0093 			lds	    r16, ADC_5			 
0004e3 9300 009b 			sts	    OLD_ADC_5,r16
0004e5 9100 0094 			lds	    r16, ADC_6			 
0004e7 9300 009c 			sts	    OLD_ADC_6,r16
0004e9 9100 0095 			lds	    r16, ADC_7			 
0004eb 9300 009d 			sts	    OLD_ADC_7,r16	
0004ed 9508      			ret
                 
                 
                 ;-----------------------------------------------------------------------------
                 ; Scan a pot and update its value if it has been moved
                 ;- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
                 ; In: r16 - the new pot value
                 ;	  r20 - the current conversion channel (0..7) 
                 ; Out: r17 - 1 if the pot has changed, 0 otherwise
                 ; Used: r16-r20, r28, r29, SREG
                 ;-----------------------------------------------------------------------------
                 POT_SCAN:
0004ee e6cc      			ldi		r28, low(KNOB0_STATUS)
0004ef e0d0      			ldi		r29, high(KNOB0_STATUS)
0004f0 0fc4      			add		r28, r20		
0004f1 1dd8      			adc		r29, ZERO
0004f2 8128      		    ld	    r18, Y			    ; load KNOBN_STATUS value into r18
                 			
0004f3 fd20      			sbrc	r18, 0				; Check bit 0
0004f4 c014      			rjmp	LOAD_ADC			; KNOBN_STATUS is set, so just update parameter
0004f5 2f30      			mov		r19, r16
                 			
0004f6 e9c6      			ldi		r28, low(OLD_ADC_0)
0004f7 e0d0      			ldi		r29, high(OLD_ADC_0)
0004f8 0fc4      			add		r28, r20		
0004f9 1dd8      			adc		r29, ZERO
0004fa 8118      		    ld	    r17, Y			    ; load OLD_ADC_N value into r17
0004fb 1b31      			sub		r19, r17
0004fc f40a      			brpl	DEAD_CHECK
0004fd 9531      			neg		r19		
                 DEAD_CHECK:
0004fe 3035      			cpi		r19, 5				 
0004ff f038      			brlo	NO_CHANGE			; Skip ahead if pot change is < the deadzone limit
000500 6021      			sbr 	r18,1				; Update knob status bit and continue -- pot moved
000501 e6cc      			ldi		r28, low(KNOB0_STATUS)
000502 e0d0      			ldi		r29, high(KNOB0_STATUS)
000503 0fc4      			add		r28, r20		;
000504 1dd8      			adc		r29, ZERO
000505 8328      		    st      Y, r18			    ; save updated KNOBN_STATUS
000506 c002      			rjmp 	LOAD_ADC			; 
                 
                 NO_CHANGE:
000507 e010      			ldi		r17, 0			    ; flag pot unchanged
000508 9508      			ret
                 
                 LOAD_ADC:	
000509 e011      			ldi		r17, 1				; flag pot changed
                 .INCLUDE "LCD.inc"
00050a 9508      
                  * LCD.inc
                  *
                  *  Created: 15/04/2016 17.47.29
                  *   Author: Administrator
                  */ 
                 
                  .include "AsciiConversion.inc"
                 
                 ; Register defines
                 ;-----------------------------------------------------------------
                 
                 
                 .def		rmp		=	r16			; defines multipurpose register
                 .def		rbin1L 	= 	r17			; Left 90 degrees upper byte
                 .def		rbin1H	= 	r18
                 .def		rbin2L	= 	r19
                 .def		rbin2H	=	r20
                 
                 
                 ; ********************************************************
                 ; * Number conversion routines, Version 0.1 January 2002 *
                 ; * (C)2002 by http://www.avr-asm-tutorial.net           *
                 ; ********************************************************
                 ;
                 ; The following rules apply for all conversion routines:
                 ; - Errors during conversion set the T-bit in the status
                 ;   register.
                 ; - Z points to either SRAM (Z>=$0060) or to registers
                 ;   ($0001 .. $001D, exclude R0, R16 and R30/31).
                 ; - ASCII- and BCD-coded numbers with multiple digits are
                 ;   placed with higher significant digits at lower adres-
                 ;   ses. Z should always point to the most significant
                 ;   digit.
                 ; - 16-bit-binary values are generally located in the
                 ;   registers rBin1H:rBin1L. These must be defined within
                 ;   the calling program.
                 ; - Register rmp (range: R16..R29) is used within the
                 ;   routines, its content is changed.
                 ; - Register pair Z is used within the routines, its
                 ;   content is set depending on the result.
                 ; - Some routines use register R0 temporarily, its content
                 ;   is restored.
                 ; - Due to the use of the Z-Register pair the header file
                 ;   for the target processor (xxxxdef.inc) must be inclu-
                 ;   ded in the calling program or ZH (R31) and ZL (R30)
                 ;   must be defined manually. Otherwise an error message
                 ;   results, or you will get crazy things going on, when
                 ;   you run the program.
                 ; - Because subroutines and push/pop-operations are used
                 ;   within these routines you must set the stack pointer
                 ;   (SPH:SPL, resp. SPL for devices with equal or less
                 ;   than 256 Byte internal SRAM).
                 ;
                 ; ***************** Routines Overview ********************
                 ; Routines   Input        Conditions           Out, Errors
                 ; --------------------------------------------------------
                 ; AscToBin2  Z points on  stops at first non-  16-bit-bin
                 ;            first ASCII  non-decimal digit,   rBin1H:L,
                 ;            char         ignores leading      Overflow
                 ;                         blanks and zeros
                 ; Asc5ToBin2 Z points on  requires exact 5     16-bit-bin
                 ;            first ASCII  valid digits,        rBin1H:L,
                 ;            char         ignores leading      Overflow
                 ;                         blanks and zeros     and non-dec
                 ; Bcd5ToBin2 5-digit-BCD  requires exact 5     16-bit-bin
                 ;            Z points to  valid digits         rBin1H:L
                 ;            first digit                       Overflow
                 ;                                              and non-BCD
                 ; Bin2ToBcd5 16-bit-bin   Z points to first    5-digit-BCD
                 ;            in rBin1H:L  BCD digit            Z on first,
                 ;                                              no errors
                 ; Bin2ToHex4 16-bit-bin   Z points to first    4-digit-hex
                 ;            in rBin1H:L  Hex ASCII digit,     Z on first
                 ;                         hex digits A..F      no errors
                 ; Hex4ToBin2 4-digit-hex  Z points to first    16-bit-bin
                 ;            Z points to  hex ASCII digit,     rBin1H:L,
                 ;            first char   requires 4 digits,   invalid hex
                 ;                         A..F or a..f ok      digit
                 ; ******************* Conversion code ********************
                 ;
                 ; Package I: From ASCII resp. BCD to binary
                 ;
                 ; AscToBin2
                 ; =========
                 ; converts an ASCII coded number to a 2-Byte bi-
                 ; nary
                 ; In: Z points to first digit, conversion stops at first
                 ;   digit detected or if overflow of the result occurs,
                 ;   end of number must be terminated by a non-decimal
                 ;   ASCII-digit!
                 ; Out: Z points to first non-valid digit or to the digit
                 ;   where the overflow occurred, if number is valid the
                 ;   T-Flag is clear and the number is in registers
                 ;   rBin1H:rBin1L
                 ; Used registers: rBin1H:L (result), rBin2H:L (restored
                 ;   after use), rmp
                 ; Called subroutines: Bin1Mul10
                 ;
                 AscToBin2:
00050b 2722      	clr rBin1H ; Clear the result
00050c 2711      	clr rBin1L
00050d 94e8      	clt ; Clear error flag bit
                 AscToBin2a:
00050e 9101      	ld rmp,Z+ ; ignore leading blanks and zeros
00050f 3200      	cpi rmp,' ' ; blank?
000510 f3e9      	breq AscToBin2a
000511 3300      	cpi rmp,'0' ; zero?
000512 f3d9      	breq AscToBin2a
                 AscToBin2b:
000513 5300      	subi rmp,'0' ; subtract ASCII zero
000514 f058      	brcs AscToBin2d ; End of the number
000515 300a      	cpi rmp,10 ; check invalid digit
000516 f448      	brcc AscToBin2d ; No-decimal char
000517 d042      	rcall Bin1Mul10 ; Multiply binary number by 10
000518 f036      	brts AscToBin2c ; overflow, return with T-Flag set
000519 0f10      	add rBin1L,rmp ; add the digit to the binary
00051a 9101      	ld rmp,Z+ ; read next char
00051b f7b8      	brcc AscToBin2b ; no overflow to binary MSB
00051c 9523      	inc rBin1H ; Overflow to binary MSB
00051d f7a9      	brne AscToBin2b ; no overflow of binary MSB
00051e 9468      	set ; Set overflow flag
                 AscToBin2c:
00051f 9731      	sbiw ZL,1 ; Back one char, last char end/invalid
                 AscToBin2d:
000520 9508      	ret
                 ;
                 ; Asc5ToBin2
                 ; ==========
                 ; converts a 5-digit ASCII to a 16-bit-binary
                 ; In: Z points to first decimal ASCII-digit, leading
                 ;   blanks and zeros are ok. Requires exact 5 digits.
                 ; Result: T-Flag reports result:
                 ;   T=0: result in rBin1H:rBin1L, valid, Z points to
                 ;     first digit of the hex-ASCII-number
                 ;   T=1: error, Z points to the first illegal character
                 ;     or to the digit, where the overflow occurred
                 ; Used registers: rBin1H:L (result), R0 (restored after
                 ;   use), rBin2H:L (restored after use), rmp
                 ; Called subroutines: Bin1Mul10
                 ;
                 Asc5ToBin2:
000521 920f      	push R0 ; R0 is used as counter, save it first
000522 e006      	ldi rmp,6 ; five chars, one too much
000523 2e00      	mov R0,rmp
000524 2722      	clr rBin1H ; Clear result
000525 2711      	clr rBin1L
000526 94e8      	clt ; Clear T-Bit
                 Asc5ToBin2a:
000527 940a      	dec R0 ; all chars read?
000528 f091      	breq Asc5ToBin2d ; last char
000529 9101      	ld rmp,Z+ ; read a char
00052a 3200      	cpi rmp,' ' ; ignore blanks
00052b f3d9      	breq Asc5ToBin2a ; next char
00052c 3300      	cpi rmp,'0' ; ignore leading zeros
00052d f3c9      	breq Asc5ToBin2a ; next char
                 Asc5ToBin2b:
00052e 5300      	subi rmp,'0' ; treat digit
00052f f070      	brcs Asc5ToBin2e ; Last char was invalid
000530 300a      	cpi rmp,10 ; digit > 9
000531 f460      	brcc Asc5ToBin2e ; Last char invalid
000532 d027      	rcall Bin1Mul10 ; Multiply result by 10
000533 f056      	brts Asc5ToBin2e ; Overflow occurred
000534 0f10      	add rBin1L,rmp ; add the digit
000535 9101      	ld rmp,z+
000536 f410      	brcc Asc5ToBin2c ; no overflow to MSB
000537 9523      	inc rBin1H ; Overflow to MSB
000538 f029      	breq Asc5ToBin2e ; Overflow of MSB
                 Asc5ToBin2c:
000539 940a      	dec R0 ; downcount number of digits
00053a f799      	brne Asc5ToBin2b ; convert more chars
                 Asc5ToBin2d: ; End of ASCII number reached ok
00053b 9735      	sbiw ZL,5 ; Restore start position of ASCII number
00053c 900f      	pop R0 ; Restore register R0
00053d 9508      	ret
                 Asc5ToBin2e: ; Last char was invalid
00053e 9731      	sbiw ZL,1 ; Point to invalid char
00053f 900f      	pop R0 ; Restore register R0
000540 9468      	set ; Set T-Flag for error
000541 9508      	ret ; and return with error condition set
                 ;
                 ; Bcd5ToBin2
                 ; ==========
                 ; converts a 5-bit-BCD to a 16-bit-binary
                 ; In: Z points to the most signifant digit of the BCD
                 ; Out: T-flag shows general result:
                 ;   T=0: Binary in rBin1H:L is valid, Z points to the
                 ;     first digit of the BCD converted
                 ;   T=1: Error during conversion. Either the BCD was too
                 ;     big (must be 0..65535, Z points to BCD where the
                 ;     overflow occurred) or an illegal BCD was detected
                 ;     (Z points to the first non-BCD digit).
                 ; Used registers: rBin1H:L (result), R0 (restored after
                 ;   use), rBin2H:L (restored after use), rmp
                 ; Called subroutines: Bin1Mul10
                 ;
                 Bcd5ToBin2:
000542 920f      	push R0 ; Save register
000543 2722      	clr rBin1H ; Empty result
000544 2711      	clr rBin1L
000545 e005      	ldi rmp,5 ; Set counter to 5
000546 2e00      	mov R0,rmp
000547 94e8      	clt ; Clear error flag
                 Bcd5ToBin2a:
000548 9101      	ld rmp,Z+ ; Read BCD digit
000549 300a      	cpi rmp,10 ; is it valid?
00054a f458      	brcc Bcd5ToBin2c ; invalid BCD
00054b d00e      	rcall Bin1Mul10 ; Multiply result by 10
00054c f04e      	brts Bcd5ToBin2c ; Overflow occurred
00054d 0f10      	add rBin1L,rmp ; add digit
00054e f410      	brcc Bcd5ToBin2b ; No overflow to MSB
00054f 9523      	inc rBin1H ; Overflow to MSB
000550 f029      	breq Bcd5ToBin2c ; Overflow of MSB
                 Bcd5ToBin2b:
000551 940a      	dec R0 ; another digit?
000552 f7a9      	brne Bcd5ToBin2a ; Yes
000553 900f      	pop R0 ; Restore register
000554 9735      	sbiw ZL,5 ; Set to first BCD digit
000555 9508      	ret ; Return
                 Bcd5ToBin2c:
000556 9731      	sbiw ZL,1 ; back one digit
000557 900f      	pop R0 ; Restore register
000558 9468      	set ; Set T-flag, error
000559 9508      	ret ; and return
                 ;
                 ; Bin1Mul10
                 ; =========
                 ; multiplies a 16-bit-binary by 10
                 ; Sub used by: AscToBin2, Asc5ToBin2, Bcd5ToBin2
                 ; In: 16-bit-binary in rBin1H:L
                 ; Out: T-flag shows general result:
                 ;   T=0: Valid result, 16-bit-binary in rBin1H:L ok
                 ;   T=1: Overflow occurred, number too big
                 ;
                 Bin1Mul10:
00055a 934f      	push rBin2H ; Save the register of 16-bit-binary 2
00055b 933f      	push rBin2L
00055c 2f42      	mov rBin2H,rBin1H ; Copy the number
00055d 2f31      	mov rBin2L,rBin1L
00055e 0f11      	add rBin1L,rBin1L ; Multiply by 2
00055f 1f22      	adc rBin1H,rBin1H
000560 f048      	brcs Bin1Mul10b ; overflow, get out of here
                 Bin1Mul10a:
000561 0f11      	add rBin1L,rbin1L ; again multiply by 2 (4*number reached)
000562 1f22      	adc rBin1H,rBin1H
000563 f030      	brcs Bin1Mul10b ; overflow, get out of here
000564 0f13      	add rBin1L,rBin2L ; add the copied number (5*number reached)
000565 1f24      	adc rBin1H,rBin2H
000566 f018      	brcs Bin1Mul10b ;overflow, get out of here
000567 0f11      	add rBin1L,rBin1L ; again multiply by 2 (10*number reached)
000568 1f22      	adc rBin1H,rBin1H
000569 f408      	brcc Bin1Mul10c ; no overflow occurred, don't set T-flag
                 Bin1Mul10b:
00056a 9468      	set ; an overflow occurred during multplication
                 Bin1Mul10c:
00056b 913f      	pop rBin2L ; Restore the registers of 16-bit-binary 2
00056c 914f      	pop rBin2H
00056d 9508      	ret
                 ;
                 ; *************************************************
                 ;
                 ; Package II: From binary to ASCII resp. BCD
                 ;
                 ; Bin2ToAsc5
                 ; ==========
                 ; converts a 16-bit-binary to a 5 digit ASCII-coded decimal
                 ; In: 16-bit-binary in rBin1H:L, Z points to the highest
                 ;   of 5 ASCII digits, where the result goes to
                 ; Out: Z points to the beginning of the ASCII string, lea-
                 ;   ding zeros are filled with blanks
                 ; Used registers: rBin1H:L (content is not changed),
                 ;   rBin2H:L (content is changed), rmp
                 ; Called subroutines: Bin2ToBcd5
                 ;
                 Bin2ToAsc5:
00056e d01b      	rcall Bin2ToBcd5 ; convert binary to BCD
00056f e004      	ldi rmp,4 ; Counter is 4 leading digits
000570 2f30      	mov rBin2L,rmp
                 Bin2ToAsc5a:
000571 8100      	ld rmp,z ; read a BCD digit
000572 2300      	tst rmp ; check if leading zero
000573 f429      	brne Bin2ToAsc5b ; No, found digit >0
000574 e200      	ldi rmp,' ' ; overwrite with blank
000575 9301      	st z+,rmp ; store and set to next position
000576 953a      	dec rBin2L ; decrement counter
000577 f7c9      	brne Bin2ToAsc5a ; further leading blanks
000578 8100      	ld rmp,z ; Read the last BCD
                 Bin2ToAsc5b:
000579 9533      	inc rBin2L ; one more char
                 Bin2ToAsc5c:
00057a 5d00      	subi rmp,-'0' ; Add ASCII-0
00057b 9301      	st z+,rmp ; store and inc pointer
00057c 8100      	ld rmp,z ; read next char
00057d 953a      	dec rBin2L ; more chars?
00057e f7d9      	brne Bin2ToAsc5c ; yes, go on
00057f 9735      	sbiw ZL,5 ; Pointer to beginning of the BCD
000580 9508      	ret ; done
                 ;
                 ; Bin2ToAsc
                 ; =========
                 ; converts a 16-bit-binary to a 5-digit ASCII coded decimal,
                 ;   the pointer points to the first significant digit of the
                 ;   decimal, returns the number of digits
                 ; In: 16-bit-binary in rBin1H:L, Z points to first digit of
                 ;   the ASCII decimal (requires 5 digits buffer space, even
                 ;   if the number is smaller!)
                 ; Out: Z points to the first significant digit of the ASCII
                 ;   decimal, rBin2L has the number of characters (1..5)
                 ; Used registers: rBin1H:L (unchanged), rBin2H (changed),
                 ;   rBin2L (result, length of number), rmp
                 ; Called subroutines: Bin2ToBcd5, Bin2ToAsc5
                 ;
                 Bin2ToAsc:
000581 dfec      	rcall Bin2ToAsc5 ; Convert binary to ASCII
000582 e006      	ldi rmp,6 ; Counter is 6
000583 2f30      	mov rBin2L,rmp
                 Bin2ToAsca:
000584 953a      	dec rBin2L ; decrement counter
000585 9101      	ld rmp,z+ ; read char and inc pointer
000586 3200      	cpi rmp,' ' ; was a blank?
000587 f3e1      	breq Bin2ToAsca ; Yes, was a blank
000588 9731      	sbiw ZL,1 ; one char backwards
000589 9508      	ret ; done
                 ;
                 ; Bin2ToBcd5
                 ; ==========
                 ; converts a 16-bit-binary to a 5-digit-BCD
                 ; In: 16-bit-binary in rBin1H:L, Z points to first digit
                 ;   where the result goes to
                 ; Out: 5-digit-BCD, Z points to first BCD-digit
                 ; Used registers: rBin1H:L (unchanged), rBin2H:L (changed),
                 ;   rmp
                 ; Called subroutines: Bin2ToDigit
                 ;
                 Bin2ToBcd5:
00058a 932f      	push rBin1H ; Save number
00058b 931f      	push rBin1L
00058c e207      	ldi rmp,HIGH(10000) ; Start with tenthousands
00058d 2f40      	mov rBin2H,rmp
00058e e100      	ldi rmp,LOW(10000)
00058f 2f30      	mov rBin2L,rmp
000590 d014      	rcall Bin2ToDigit ; Calculate digit
000591 e003      	ldi rmp,HIGH(1000) ; Next with thousands
000592 2f40      	mov rBin2H,rmp
000593 ee08      	ldi rmp,LOW(1000)
000594 2f30      	mov rBin2L,rmp
000595 d00f      	rcall Bin2ToDigit ; Calculate digit
000596 e000      	ldi rmp,HIGH(100) ; Next with hundreds
000597 2f40      	mov rBin2H,rmp
000598 e604      	ldi rmp,LOW(100)
000599 2f30      	mov rBin2L,rmp
00059a d00a      	rcall Bin2ToDigit ; Calculate digit
00059b e000      	ldi rmp,HIGH(10) ; Next with tens
00059c 2f40      	mov rBin2H,rmp
00059d e00a      	ldi rmp,LOW(10)
00059e 2f30      	mov rBin2L,rmp
00059f d005      	rcall Bin2ToDigit ; Calculate digit
0005a0 8310      	st z,rBin1L ; Remainder are ones
0005a1 9734      	sbiw ZL,4 ; Put pointer to first BCD
0005a2 911f      	pop rBin1L ; Restore original binary
0005a3 912f      	pop rBin1H
0005a4 9508      	ret ; and return
                 ;
                 ; Bin2ToDigit
                 ; ===========
                 ; converts one decimal digit by continued subraction of a
                 ;   binary coded decimal
                 ; Used by: Bin2ToBcd5, Bin2ToAsc5, Bin2ToAsc
                 ; In: 16-bit-binary in rBin1H:L, binary coded decimal in
                 ;   rBin2H:L, Z points to current BCD digit
                 ; Out: Result in Z, Z incremented
                 ; Used registers: rBin1H:L (holds remainder of the binary),
                 ;   rBin2H:L (unchanged), rmp
                 ; Called subroutines: -
                 ;
                 Bin2ToDigit:
0005a5 2700      	clr rmp ; digit count is zero
                 Bin2ToDigita:
0005a6 1724      	cp rBin1H,rBin2H ; Number bigger than decimal?
0005a7 f038      	brcs Bin2ToDigitc ; MSB smaller than decimal
0005a8 f411      	brne Bin2ToDigitb ; MSB bigger than decimal
0005a9 1713      	cp rBin1L,rBin2L ; LSB bigger or equal decimal
0005aa f020      	brcs Bin2ToDigitc ; LSB smaller than decimal
                 Bin2ToDigitb:
0005ab 1b13      	sub rBin1L,rBin2L ; Subtract LSB decimal
0005ac 0b24      	sbc rBin1H,rBin2H ; Subtract MSB decimal
0005ad 9503      	inc rmp ; Increment digit count
0005ae cff7      	rjmp Bin2ToDigita ; Next loop
                 Bin2ToDigitc:
0005af 9301      	st z+,rmp ; Save digit and increment
0005b0 9508      	ret ; done
                 ;
                 ; **************************************************
                 ;
                 ; Package III: From binary to Hex-ASCII
                 ;
                 ; Bin2ToHex4
                 ; ==========
                 ; converts a 16-bit-binary to uppercase Hex-ASCII
                 ; In: 16-bit-binary in rBin1H:L, Z points to first
                 ;   position of the four-character Hex-ASCII
                 ; Out: Z points to the first digit of the four-character
                 ;   Hex-ASCII, ASCII digits A..F in capital letters
                 ; Used registers: rBin1H:L (unchanged), rmp
                 ; Called subroutines: Bin1ToHex2, Bin1ToHex1
                 ;
                 Bin2ToHex4:
0005b1 2f02      	mov rmp,rBin1H ; load MSB
0005b2 d004      	rcall Bin1ToHex2 ; convert byte
0005b3 2f01      	mov rmp,rBin1L
0005b4 d002      	rcall Bin1ToHex2
0005b5 9734      	sbiw ZL,4 ; Set Z to start
0005b6 9508      	ret
                 ;
                 ; Bin1ToHex2 converts an 8-bit-binary to uppercase hex
                 ; Called by: Bin2ToHex4
                 ;
                 Bin1ToHex2:
0005b7 930f      	push rmp ; Save byte
0005b8 9502      	swap rmp ; upper to lower nibble
0005b9 d001      	rcall Bin1ToHex1
0005ba 910f      	pop rmp ; Restore byte
                 Bin1ToHex1:
0005bb 700f      	andi rmp,$0F ; mask upper nibble
0005bc 5d00      	subi rmp,-'0' ; add 0 to convert to ASCII
0005bd 330a      	cpi rmp,'9'+1 ; A..F?
0005be f008      	brcs Bin1ToHex1a
0005bf 5f09      	subi rmp,-7 ; add 7 for A..F
                 Bin1ToHex1a:
0005c0 9301      	st z+,rmp ; store in target
0005c1 9508      	ret ; and return
                 ;
                 ; *******************************************
                 ;
                 ; Package IV: From Hex-ASCII to binary
                 ;
                 ; Hex4ToBin2
                 ; converts a 4-digit-hex-ascii to a 16-bit-binary
                 ; In: Z points to first digit of a Hex-ASCII-coded number
                 ; Out: T-flag has general result:
                 ;   T=0: rBin1H:L has the 16-bit-binary result, Z points
                 ;     to the first digit of the Hex-ASCII number
                 ;   T=1: illegal character encountered, Z points to the
                 ;     first non-hex-ASCII character
                 ; Used registers: rBin1H:L (result), R0 (restored after
                 ;   use), rmp
                 ; Called subroutines: Hex2ToBin1, Hex1ToBin1
                 ;
                 Hex4ToBin2:
0005c2 94e8      	clt ; Clear error flag
0005c3 d007      	rcall Hex2ToBin1 ; convert two digits hex to Byte
0005c4 f02e      	brts Hex4ToBin2a ; Error, go back
0005c5 2f20      	mov rBin1H,rmp ; Byte to result MSB
0005c6 d004      	rcall Hex2ToBin1 ; next two chars
0005c7 f016      	brts Hex4ToBin2a ; Error, go back
0005c8 2f10      	mov rBin1L,rmp ; Byte to result LSB
0005c9 9734      	sbiw ZL,4 ; result ok, go back to start
                 Hex4ToBin2a:
0005ca 9508      	ret
                 ;
                 ; Hex2ToBin1 converts 2-digit-hex-ASCII to 8-bit-binary
                 ; Called By: Hex4ToBin2
                 ;
                 Hex2ToBin1:
0005cb 920f      	push R0 ; Save register
0005cc d008      	rcall Hex1ToBin1 ; Read next char
0005cd f02e      	brts Hex2ToBin1a ; Error
0005ce 9502      	swap rmp; To upper nibble
0005cf 2e00      	mov R0,rmp ; interim storage
0005d0 d004      	rcall Hex1ToBin1 ; Read another char
0005d1 f00e      	brts Hex2ToBin1a ; Error
0005d2 2900      	or rmp,R0 ; pack the two nibbles together
                 Hex2ToBin1a:
0005d3 900f      	pop R0 ; Restore R0
0005d4 9508      	ret ; and return
                 ;
                 ; Hex1ToBin1 reads one char and converts to binary
                 ;
                 Hex1ToBin1:
0005d5 9101      	ld rmp,z+ ; read the char
0005d6 5300      	subi rmp,'0' ; ASCII to binary
0005d7 f050      	brcs Hex1ToBin1b ; Error in char
0005d8 300a      	cpi rmp,10 ; A..F
0005d9 f050      	brcs Hex1ToBin1c ; not A..F
0005da 3300      	cpi rmp,$30 ; small letters?
0005db f008      	brcs Hex1ToBin1a ; No
0005dc 5200      	subi rmp,$20 ; small to capital letters
                 Hex1ToBin1a:
0005dd 5007      	subi rmp,7 ; A..F
0005de 300a      	cpi rmp,10 ; A..F?
0005df f010      	brcs Hex1ToBin1b ; Error, is smaller than A
0005e0 3100      	cpi rmp,16 ; bigger than F?
0005e1 f010      	brcs Hex1ToBin1c ; No, digit ok
                 Hex1ToBin1b: ; Error
0005e2 9731      	sbiw ZL,1 ; one back
0005e3 9468      	set ; Set flag
                 Hex1ToBin1c:
0005e4 9508      
                  .equ    fclk                = 16000000      ; system clock frequency (for delays)
                 ////ML
                 ; register usage
                 .def    temp_lcd                = R24           ; temporary storage for LCD
                 .def	RAMtemp					= R25
                 
                 ; LCD interface (should agree with the diagram above)
                 ;   make sure that the LCD RW pin is connected to GND
                 .equ    lcd_D7_port         = PORTB         ; lcd D7 connection
                 .equ    lcd_D7_bit          = PORTB3
                 .equ    lcd_D7_ddr          = DDRB
                 
                 .equ    lcd_D6_port         = PORTB         ; lcd D6 connection
                 .equ    lcd_D6_bit          = PORTB2
                 .equ    lcd_D6_ddr          = DDRB
                 
                 .equ    lcd_D5_port         = PORTB         ; lcd D5 connection
                 .equ    lcd_D5_bit          = PORTB1
                 .equ    lcd_D5_ddr          = DDRB
                 
                 .equ    lcd_D4_port         = PORTB         ; lcd D4 connection
                 .equ    lcd_D4_bit          = PORTB0
                 .equ    lcd_D4_ddr          = DDRB
                 
                 .equ    lcd_E_port          = PORTD         ; lcd Enable pin
                 .equ    lcd_E_bit           = PORTD6
                 .equ    lcd_E_ddr           = DDRD
                 
                 .equ    lcd_RS_port         = PORTD         ; lcd Register Select pin
                 .equ    lcd_RS_bit          = PORTD5
                 .equ    lcd_RS_ddr          = DDRD
                 
                 ; LCD module information
                 .equ    lcd_LineOne         = 0x00          ; start of line 1
                 .equ    lcd_LineTwo         = 0x40          ; start of line 2
                 .equ   lcd_LineThree        = 0x14          ; start of line 3 (20x4)
                 .equ   lcd_lineFour         = 0x54          ; start of line 4 (20x4)
                 ;.equ   lcd_LineThree        = 0x10          ; start of line 3 (16x4)
                 ;.equ   lcd_lineFour         = 0x50          ; start of line 4 (16x4)
                 
                 ; LCD instructions
                 .equ    lcd_Clear           = 0b00000001    ; replace all characters with ASCII 'space'
                 .equ    lcd_Home            = 0b00000010    ; return cursor to first position on first line
                 .equ    lcd_EntryMode       = 0b00000110    ; shift cursor from left to right on read/write
                 .equ    lcd_DisplayOff      = 0b00001000    ; turn display off
                 .equ    lcd_DisplayOn       = 0b00001100    ; display on, cursor off, don't blink character
                 .equ    lcd_FunctionReset   = 0b00110000    ; reset the LCD
                 .equ    lcd_FunctionSet4bit = 0b00101000    ; 4-bit data, 2-line display, 5 x 7 font
                 .equ    lcd_SetCursor       = 0b10000000    ; set cursor position
                 
                 
                 ///////////////////////////////////////////////////////////////////////////////////////
                 
                 ///// ML: Main procedure for LCD Update
                 
                 ///////////////////////////////////////////////////////////////////////////////////////
                 MYLCD_UPDATE:
0005e5 b50c      			in	    r16, TCNT1L		    ;\
0005e6 b51d      		    in	    r17, TCNT1H		    ;/ r17:r16 = t
0005e7 9120 00a0 		    lds	    r18, TPREV_KBD_L	;\
0005e9 9130 00a1 		    lds	    r19, TPREV_KBD_H	;/ r19:r18 = t0
0005eb 1b02      		    sub	    r16, r18			;\
0005ec 0b13      		    sbc	    r17, r19			;/ r17:r16 = t - t0
0005ed 560a      		    subi	r16, LOW(KBDSCAN)	;\
0005ee 4118      		    sbci	r17, HIGH(KBDSCAN)	;/ r17:r16 = (t-t0) - 100ms
0005ef f408      		    brsh	MLP_LCDUPDATE		    ;\
0005f0 c054      		    rjmp	MLP_SKIPLCDUPDATE		;/ skip scanning if (t-t0) < 100ms
                 MLP_LCDUPDATE:
                 			//status of switches
0005f1 e030      			ldi		r19, 0
0005f2 9120 0078 			lds		r18, PATCH_SWITCH1 //take the patch of switches	
                 			//swithc 0
0005f4 fb20      			bst		r18, 0 //bit 0 to T (which can be 0 or 1)
0005f5 f930      			bld     r19, 0  //bit 0 of T in r19
0005f6 e340      			ldi		r20,0x30
0005f7 0f34      			add		r19,r20 //r19 will be 0x30 or 0x31 (ascii "0" or "1")
0005f8 9330 0126 			sts     my_LCDstring1, r19 
0005fa e030      			ldi		r19, 0
0005fb 9330 0127 			sts     my_LCDstring1+1, r19
0005fd e0f1      			ldi     ZH, high(my_LCDstring1)        ; point to the information that is to be displayed
0005fe e2e6      			ldi     ZL, low(my_LCDstring1)
0005ff e080      			ldi     temp_lcd, lcd_LineOne          ; point to where the information should be displayed
000600 940e 073c 			call    lcd_write_string_4d
                 
                 			//swithc 1
000602 fb21      			bst		r18, 1 //bit 1 to T (which can be 0 or 1)
000603 f931      			bld     r19, 1  //bit 1 of T in r19
000604 9536      			lsr		r19 //right shift--->bit 1 is now bit 0
000605 e340      			ldi		r20,0x30 //ascii ofsset for numbers
000606 0f34      			add		r19,r20 //r19 will be 0x30 or 0x31 (ascii "0" or "1")
000607 9330 0126 			sts     my_LCDstring1, r19 
000609 e030      			ldi		r19, 0
00060a 9330 0127 			sts     my_LCDstring1+1, r19
00060c e0f1      			ldi     ZH, high(my_LCDstring1)        ; point to the information that is to be displayed
00060d e2e6      			ldi     ZL, low(my_LCDstring1)
00060e e084      			ldi     temp_lcd, lcd_LineOne+4         ; point to where the information should be displayed
00060f 940e 073c 			call    lcd_write_string_4d
                 
                 			//swithc 2
000611 fb22      			bst		r18, 2 //bit 2 to T (which can be 0 or 1)
000612 f932      			bld     r19, 2  //bit 2 of T in r19
000613 9536      			lsr		r19
000614 9536      			lsr		r19 //twice right shift--->bit 2 is now bit 0
000615 e340      			ldi		r20,0x30
000616 0f34      			add		r19,r20 //r19 will be 0x30 or 0x31 (ascii "0" or "1")
000617 9330 0126 			sts     my_LCDstring1, r19 
000619 e030      			ldi		r19, 0
00061a 9330 0127 			sts     my_LCDstring1+1, r19
00061c e0f1      			ldi     ZH, high(my_LCDstring1)        ; point to the information that is to be displayed
00061d e2e6      			ldi     ZL, low(my_LCDstring1)
00061e e088      			ldi     temp_lcd, lcd_LineOne+8         ; point to where the information should be displayed
00061f 940e 073c 			call    lcd_write_string_4d
                 
                 			//swithc 3
000621 fb23      			bst		r18, 3 //bit 3 to T (which can be 0 or 1)
000622 f933      			bld     r19, 3  //bit 3 of T in r19
000623 9536      			lsr		r19
000624 9536      			lsr		r19
000625 9536      			lsr		r19 //three times right shift--->bit 3 is now bit 0
000626 e340      			ldi		r20,0x30
000627 0f34      			add		r19,r20 //r19 will be 0x30 or 0x31 (ascii "0" or "1")
000628 9330 0126 			sts     my_LCDstring1, r19 
00062a e030      			ldi		r19, 0
00062b 9330 0127 			sts     my_LCDstring1+1, r19
00062d e0f1      			ldi     ZH, high(my_LCDstring1)        ; point to the information that is to be displayed
00062e e2e6      			ldi     ZL, low(my_LCDstring1)
00062f e08c      			ldi     temp_lcd, lcd_LineOne+12         ; point to where the information should be displayed
000630 940e 073c 			call    lcd_write_string_4d
                 
                 			/////status of pots...in this case, since the pots have a value from 0 to 255, we must convert the value to ascii
000632 e71d      			ldi	r17,ATTACKTIME //<<<<--valore del primo pot (0-255)
000633 e020      			ldi	r18,$00 //so che il primo byte sar sempre 0 pocih il valore da confvertire sar 0..255
                 
000634 e0f0      			ldi ZH,0
000635 e0e0      			ldi	ZL,0
000636 df4a      			rcall Bin2ToAsc //ZL punta adesso al registro R0(valore di ZL) che il primo che contiene il dato tradotto in ascii, rBin2L dice il numero di char del avlore
                 							//in ogni caso adesso noi prendiamo r2,r3,r4 che riportano le cifre in ascii. Se una cifra  non  usato la routine riporta 0x20 (spazio) nel registro.
000637 e030      			ldi		r19, 0
000638 9220 0112 			sts		my_LCDstring2,r2
00063a 9230 0113 			sts		my_LCDstring2+1,r3
00063c 9240 0114 			sts		my_LCDstring2+2,r4
00063e 9330 0115 			sts		my_LCDstring2+3,r19
000640 e0f1      			ldi     ZH, high(my_LCDstring2)        ; point to the information that is to be displayed
000641 e1e2      			ldi     ZL, low(my_LCDstring2)
000642 e480      			ldi     temp_lcd, lcd_LineTwo         ; point to where the information should be displayed
000643 940e 073c 			call    lcd_write_string_4d
                 
                 
                 MLP_SKIPLCDUPDATE:	
000645 9508      			ret
                 
                 /////////////////////////////////////////////////////////////////////////////////////////
                 /////////////////////////////////////////////////////////////////////////////////////////
                 /////////////////////////////////////////////////////////////////////////////////////////
                 /////////////////////////////////////////////////////////////////////////////////////////
                 /////////////////////////////////////////////////////////////////////////////////////////
                 
                 MYLCD_CLEAR:
                 ; Clear Display instruction
000646 e081          ldi     temp_lcd, lcd_Clear                 ; clear display RAM
000647 940e 0758     call    lcd_write_instruction_4d
000649 e084          ldi     temp_lcd, 4                         ; 1.64 mS delay (min)
00064a 940e 0778     call    delayTx1mS
00064c 9508      	ret
                 
                 
                 LCD_START:
                 	program_author:
00064d 2e4d
00064e 614c
00064f 7473
000650 6972
000651 472d
000652 7261
000653 6572
000654 6c74
000655 6261
000656 2073
000657 0000
000658 0000      	.db         "M.Lastri-Garretlabs ",0,0,0,0
                 
                 	program_version:
000659 654d
00065a 4265
00065b 696c
00065c 2070
00065d 6e41
00065e 646f
00065f 0065      	.db         "MeeBlip Anode",0
                 
                 	program_version2:
000660 4928
000661 6174
000662 696c
000663 6e61
000664 5320
000665 7974
000666 656c
000667 7620
000668 2931
000669 0000      	.db         "(Italian Style v1)",0,0
                 
                 	program_date:
00066a 3531
00066b 4120
00066c 7270
00066d 6c69
00066e 3220
00066f 3130
000670 0036      	.db			"15 April 2016",0
                 
                 	; configure the microprocessor pins for the data lines
000671 9abb          sbi     lcd_D7_ddr, lcd_D7_bit          ; 4 data lines - output
000672 9aba          sbi     lcd_D6_ddr, lcd_D6_bit
000673 9ab9          sbi     lcd_D5_ddr, lcd_D5_bit
000674 9ab8          sbi     lcd_D4_ddr, lcd_D4_bit
                 
                 ; configure the microprocessor pins for the control lines
000675 9a8e          sbi     lcd_E_ddr,  lcd_E_bit           ; E line - output
000676 9a8d          sbi     lcd_RS_ddr, lcd_RS_bit          ; RS line - output
                 
                 ; initialize the LCD controller as determined by the equates (LCD instructions)
000677 940e 0700     call    lcd_init_4d                     ; initialize the LCD display for a 4-bit interface
                 
                 ///ML: voglio leggere la stringa dalla RAM
                 //Prima le inizializzo..
000679 e48d      ldi temp_lcd,0x4d
00067a 9380 0126 sts my_LCDstring1, temp_lcd
00067c e28e      ldi temp_lcd,0x2e
00067d 9380 0127 sts my_LCDstring1+1, temp_lcd
00067f e48c      ldi temp_lcd,0x4c
000680 9380 0128 sts my_LCDstring1+2, temp_lcd
000682 e681      ldi temp_lcd,0x61
000683 9380 0129 sts my_LCDstring1+3, temp_lcd
000685 e783      ldi temp_lcd,0x73
000686 9380 012a sts my_LCDstring1+4, temp_lcd
000688 e784      ldi temp_lcd,0x74
000689 9380 012b sts my_LCDstring1+5, temp_lcd
00068b e782      ldi temp_lcd,0x72
00068c 9380 012c sts my_LCDstring1+6, temp_lcd
00068e e689      ldi temp_lcd,0x69
00068f 9380 012d sts my_LCDstring1+7, temp_lcd
000691 e080      ldi temp_lcd,0x0
000692 9380 012e sts my_LCDstring1+8, temp_lcd
                 
                 
                 //seconda riga
000694 e487      ldi temp_lcd,0x47
000695 9380 0112 sts my_LCDstring2, temp_lcd
000697 e681      ldi temp_lcd,0x61
000698 9380 0113 sts my_LCDstring2+1, temp_lcd
00069a e782      ldi temp_lcd,0x72
00069b 9380 0114 sts my_LCDstring2+2, temp_lcd
00069d e782      ldi temp_lcd,0x72
00069e 9380 0115 sts my_LCDstring2+3, temp_lcd
0006a0 e685      ldi temp_lcd,0x65
0006a1 9380 0116 sts my_LCDstring2+4, temp_lcd
0006a3 e784      ldi temp_lcd,0x74
0006a4 9380 0117 sts my_LCDstring2+5, temp_lcd
0006a6 e68c      ldi temp_lcd,0x6c
0006a7 9380 0118 sts my_LCDstring2+6, temp_lcd
0006a9 e681      ldi temp_lcd,0x61
0006aa 9380 0119 sts my_LCDstring2+7, temp_lcd
0006ac e682      ldi temp_lcd,0x62
0006ad 9380 011a sts my_LCDstring2+8, temp_lcd
0006af e783      ldi temp_lcd,0x73
0006b0 9380 011b sts my_LCDstring2+9, temp_lcd
0006b2 e080      ldi temp_lcd,0x0
0006b3 9380 011c sts my_LCDstring2+10, temp_lcd
                 
                 //terza riga
0006b5 e48d      ldi temp_lcd,0x4d
0006b6 9380 00fe sts my_LCDstring3, temp_lcd
0006b8 e685      ldi temp_lcd,0x65
0006b9 9380 00ff sts my_LCDstring3+1, temp_lcd
0006bb e685      ldi temp_lcd,0x65
0006bc 9380 0100 sts my_LCDstring3+2, temp_lcd
0006be e682      ldi temp_lcd,0x62
0006bf 9380 0101 sts my_LCDstring3+3, temp_lcd
0006c1 e68c      ldi temp_lcd,0x6c
0006c2 9380 0102 sts my_LCDstring3+4, temp_lcd
0006c4 e689      ldi temp_lcd,0x69
0006c5 9380 0103 sts my_LCDstring3+5, temp_lcd
0006c7 e780      ldi temp_lcd,0x70
0006c8 9380 0104 sts my_LCDstring3+6, temp_lcd
0006ca e280      ldi temp_lcd,0x20
0006cb 9380 0105 sts my_LCDstring3+7, temp_lcd
0006cd e481      ldi temp_lcd,0x41
0006ce 9380 0106 sts my_LCDstring3+8, temp_lcd
0006d0 e68e      ldi temp_lcd,0x6e
0006d1 9380 0107 sts my_LCDstring3+9, temp_lcd
0006d3 e68f      ldi temp_lcd,0x6f
0006d4 9380 0108 sts my_LCDstring3+10, temp_lcd
0006d6 e684      ldi temp_lcd,0x64
0006d7 9380 0109 sts my_LCDstring3+11, temp_lcd
0006d9 e685      ldi temp_lcd,0x65
0006da 9380 010a sts my_LCDstring3+12, temp_lcd
0006dc e080      ldi temp_lcd,0x0
0006dd 9380 010b sts my_LCDstring3+13, temp_lcd
                 
                 //quarta riga
0006df e381      ldi temp_lcd,0x31
0006e0 9380 00ea sts my_LCDstring4, temp_lcd
0006e2 e382      ldi temp_lcd,0x32
0006e3 9380 00eb sts my_LCDstring4+1, temp_lcd
0006e5 e387      ldi temp_lcd,0x37
0006e6 9380 00ec sts my_LCDstring4+2, temp_lcd
0006e8 e080      ldi temp_lcd,0x0
0006e9 9380 00ed sts my_LCDstring4+3, temp_lcd
                 
                 
                 
                 ; display the first line of information
0006eb e0f1          ldi     ZH, high(my_LCDstring1)        ; point to the information that is to be displayed
0006ec e2e6          ldi     ZL, low(my_LCDstring1)
0006ed e080          ldi     temp_lcd, lcd_LineOne               ; point to where the information should be displayed
0006ee 940e 073c     call    lcd_write_string_4d
                 
                 ; display the second line of information
0006f0 e0f1          ldi     ZH, high(my_LCDstring2)       ; point to the information that is to be displayed
0006f1 e1e2          ldi     ZL, low(my_LCDstring2)
0006f2 e480          ldi     temp_lcd, lcd_LineTwo               ; point to where the information should be displayed
0006f3 940e 073c     call    lcd_write_string_4d
                 
                 ; display the third line of information
0006f5 e0f0          ldi     ZH, high(my_LCDstring3)       ; point to the information that is to be displayed
0006f6 efee          ldi     ZL, low(my_LCDstring3)
0006f7 e184          ldi     temp_lcd, lcd_LineThree               ; point to where the information should be displayed
0006f8 940e 073c     call    lcd_write_string_4d
                 
                 ////ML posizionamento di due cifre nella quarta riga, alla colonna 8
0006fa e0f0      	ldi     ZH, high(my_LCDstring4)       ; point to the information that is to be displayed
0006fb eeea          ldi     ZL, low(my_LCDstring4)
0006fc e58c          ldi     temp_lcd,lcd_LineFour+8             ; point to where the information should be displayed
0006fd 940e 073c     call    lcd_write_string_4d
                 	
0006ff 9508      	ret
                 
                  ; ============================== 4-bit LCD Subroutines ======================
                 ; Name:     lcd_init_4d
                 ; Purpose:  initialize the LCD module for a 4-bit data interface
                 ; Entry:    equates (LCD instructions) set up for the desired operation
                 ; Exit:     no parameters
                 ; Notes:    uses time delays instead of checking the busy flag
                 
                 lcd_init_4d:
                 ; Power-up delay
000700 e684          ldi     temp_lcd, 100                       ; initial 40 mSec delay
000701 940e 0778     call    delayTx1mS
                 
                 ; IMPORTANT - At this point the LCD module is in the 8-bit mode and it is expecting to receive  
                 ;    8 bits of data, one bit on each of its 8 data lines, each time the 'E' line is pulsed.
                 ;
                 ;  Since the LCD module is wired for the 4-bit mode, only the upper four data lines are connected to 
                 ;    the microprocessor and the lower four data lines are typically left open.  Therefore, when 
                 ;    the 'E' line is pulsed, the LCD controller will read whatever data has been set up on the upper 
                 ;    four data lines and the lower four data lines will be high (due to internal pull-up circuitry).
                 ;
                 ;  Fortunately the 'FunctionReset' instruction does not care about what is on the lower four bits so  
                 ;    this instruction can be sent on just the four available data lines and it will be interpreted 
                 ;    properly by the LCD controller.  The 'lcd_write_4' subroutine will accomplish this if the 
                 ;    control lines have previously been configured properly.
                 
                 ; Set up the RS and E lines for the 'lcd_write_4' subroutine.
000703 9895          cbi     lcd_RS_port, lcd_RS_bit         ; select the Instruction Register (RS low)
000704 9896          cbi     lcd_E_port, lcd_E_bit           ; make sure E is initially low
                 
                 ; Reset the LCD controller.
000705 e380          ldi     temp_lcd, lcd_FunctionReset         ; first part of reset sequence
000706 940e 0760     call    lcd_write_4
000708 e08a          ldi     temp_lcd, 10                        ; 4.1 mS delay (min)
000709 940e 0778     call    delayTx1mS
                 
00070b e380          ldi     temp_lcd, lcd_FunctionReset         ; second part of reset sequence
00070c 940e 0760     call    lcd_write_4
00070e ec88          ldi     temp_lcd, 200                       ; 100 uS delay (min)
00070f 940e 0786     call    delayTx1uS
                 
000711 e380          ldi     temp_lcd, lcd_FunctionReset         ; third part of reset sequence
000712 940e 0760     call    lcd_write_4
000714 ec88          ldi     temp_lcd, 200                       ; this delay is omitted in the data sheet
000715 940e 0786     call    delayTx1uS
                 
                 ; Preliminary Function Set instruction - used only to set the 4-bit mode.
                 ; The number of lines or the font cannot be set at this time since the controller is still in the 
                 ;   8-bit mode, but the data transfer mode can be changed since this parameter is determined by one 
                 ;   of the upper four bits of the instruction.
000717 e288          ldi     temp_lcd, lcd_FunctionSet4bit       ; set 4-bit mode
000718 940e 0760     call    lcd_write_4
00071a e580          ldi     temp_lcd, 80                        ; 40 uS delay (min)
00071b 940e 0786     call    delayTx1uS
                 
                 ; Function Set instruction
00071d e288          ldi     temp_lcd, lcd_FunctionSet4bit       ; set mode, lines, and font
00071e 940e 0758     call    lcd_write_instruction_4d
000720 e580          ldi     temp_lcd, 80                        ; 40 uS delay (min)
000721 940e 0786     call    delayTx1uS
                 
                 ; The next three instructions are specified in the data sheet as part of the initialization routine,
                 ;   so it is a good idea (but probably not necessary) to do them just as specified and then redo them
                 ;   later if the application requires a different configuration.
                 
                 ; Display On/Off Control instruction
000723 e088          ldi     temp_lcd, lcd_DisplayOff            ; turn display OFF
000724 940e 0758     call    lcd_write_instruction_4d
000726 e580          ldi     temp_lcd, 80                        ; 40 uS delay (min)
000727 940e 0786     call    delayTx1uS
                 
                 ; Clear Display instruction
000729 e081          ldi     temp_lcd, lcd_Clear                 ; clear display RAM
00072a 940e 0758     call    lcd_write_instruction_4d
00072c e084          ldi     temp_lcd, 4                         ; 1.64 mS delay (min)
00072d 940e 0778     call    delayTx1mS
                 
                 ; Entry Mode Set instruction
00072f e086          ldi     temp_lcd, lcd_EntryMode             ; set desired shift characteristics
000730 940e 0758     call    lcd_write_instruction_4d
000732 e580          ldi     temp_lcd, 80                        ; 40 uS delay (min)
000733 940e 0786     call    delayTx1uS
                 
                 ; This is the end of the LCD controller initialization as specified in the data sheet, but the display
                 ;   has been left in the OFF condition.  This is a good time to turn the display back ON.
                 
                 ; Display On/Off Control instruction
000735 e08c          ldi     temp_lcd, lcd_DisplayOn             ; turn the display ON
000736 940e 0758     call    lcd_write_instruction_4d
000738 e580          ldi     temp_lcd, 80                        ; 40 uS delay (min)
000739 940e 0786     call    delayTx1uS
00073b 9508          ret
                 
                 ; ---------------------------------------------------------------------------
                 ; Name:     lcd_write_string_4d
                 ; Purpose:  display a string of characters on the LCD
                 ; Entry:    ZH and ZL pointing to the start of the string
                 ;           (temp_lcd) contains the desired DDRAM address at which to start the display
                 ; Exit:     no parameters
                 ; Notes:    the string must end with a null (0)
                 ;           uses time delays instead of checking the busy flag
                 
                 lcd_write_string_4d:
                 ; preserve registers
00073c 93ff          push    ZH                              ; preserve pointer registers
00073d 93ef          push    ZL
                 
                 //ML: rimuovo visto che prendo dati dalla RAM
                 ; fix up the pointers for use with the 'lpm' instruction
                     ;lsl     ZL                              ; shift the pointer one bit left for the lpm instruction
                     ;rol     ZH
                 
                 ; set up the initial DDRAM address
00073e 6880          ori     temp_lcd, lcd_SetCursor             ; convert the plain address to a set cursor instruction
00073f 940e 0758     call   lcd_write_instruction_4d         ; set up the first DDRAM address
000741 e580          ldi     temp_lcd, 80                        ; 40 uS delay (min)
000742 940e 0786     call    delayTx1uS
                 
                 ; write the string of characters
                 lcd_write_string_4d_01:
                     ;lpm     temp_lcd, Z+                        ; get a character///ML: rimuovo visto che leggo dalla RAM
000744 9181      	ld    temp_lcd, Z+							; ////ML get a character from RAM
000745 3080          cpi     temp_lcd,  0                        ; check for end of string
000746 f031          breq    lcd_write_string_4d_02          ; done
                 
                 ; arrive here if this is a valid character
000747 940e 0750     call    lcd_write_character_4d          ; display the character
000749 e580          ldi     temp_lcd, 80                        ; 40 uS delay (min)
00074a 940e 0786     call    delayTx1uS
00074c cff7          rjmp    lcd_write_string_4d_01          ; not done, send another character
                 
                 ; arrive here when all characters in the message have been sent to the LCD module
                 lcd_write_string_4d_02:
00074d 91ef          pop     ZL                              ; restore pointer registers
00074e 91ff          pop     ZH
00074f 9508          ret
                 
                 ; ---------------------------------------------------------------------------
                 ; Name:     lcd_write_character_4d
                 ; Purpose:  send a byte of information to the LCD data register
                 ; Entry:    (temp_lcd) contains the data byte
                 ; Exit:     no parameters
                 ; Notes:    does not deal with RW (busy flag is not implemented)
                 
                 lcd_write_character_4d:
000750 9a95          sbi     lcd_RS_port, lcd_RS_bit         ; select the Data Register (RS high)
000751 9896          cbi     lcd_E_port, lcd_E_bit           ; make sure E is initially low
000752 940e 0760     call    lcd_write_4                     ; write the upper 4-bits of the data
000754 9582          swap    temp_lcd                            ; swap high and low nibbles
000755 940e 0760     call    lcd_write_4                     ; write the lower 4-bits of the data
000757 9508          ret
                 
                 ; ---------------------------------------------------------------------------
                 ; Name:     lcd_write_instruction_4d
                 ; Purpose:  send a byte of information to the LCD instruction register
                 ; Entry:    (temp_lcd) contains the data byte
                 ; Exit:     no parameters
                 ; Notes:    does not deal with RW (busy flag is not implemented)
                 
                 lcd_write_instruction_4d:
000758 9895          cbi     lcd_RS_port, lcd_RS_bit         ; select the Instruction Register (RS low)
000759 9896          cbi     lcd_E_port, lcd_E_bit           ; make sure E is initially low
00075a 940e 0760     call    lcd_write_4                     ; write the upper 4-bits of the instruction
00075c 9582          swap    temp_lcd                            ; swap high and low nibbles
00075d 940e 0760     call    lcd_write_4                     ; write the lower 4-bits of the instruction
00075f 9508          ret
                 
                 ; ---------------------------------------------------------------------------
                 ; Name:     lcd_write_4
                 ; Purpose:  send a nibble (4-bits) of information to the LCD module
                 ; Entry:    (temp_lcd) contains a byte of data with the desired 4-bits in the upper nibble
                 ;           (RS) is configured for the desired LCD register
                 ;           (E) is low
                 ;           (RW) is low
                 ; Exit:     no parameters
                 ; Notes:    use either time delays or the busy flag
                 
                 lcd_write_4:
                 ; set up D7
000760 9ac3          sbi     lcd_D7_port, lcd_D7_bit         ; assume that the D7 data is '1'
000761 ff87          sbrs    temp_lcd, 7                         ; check the actual data value
000762 98c3          cbi     lcd_D7_port, lcd_D7_bit         ; arrive here only if the data was actually '0'
                 
                 ; set up D6
000763 9ac2          sbi     lcd_D6_port, lcd_D6_bit         ; repeat for each data bit
000764 ff86          sbrs    temp_lcd, 6
000765 98c2          cbi     lcd_D6_port, lcd_D6_bit
                 
                 ; set up D5
000766 9ac1          sbi     lcd_D5_port, lcd_D5_bit
000767 ff85          sbrs    temp_lcd, 5
000768 98c1          cbi     lcd_D5_port, lcd_D5_bit
                 
                 ; set up D4
000769 9ac0          sbi     lcd_D4_port, lcd_D4_bit
00076a ff84          sbrs    temp_lcd, 4 
00076b 98c0          cbi     lcd_D4_port, lcd_D4_bit
                 
                 ; write the data
                                                             ; 'Address set-up time' (40 nS)
00076c 9a96          sbi     lcd_E_port, lcd_E_bit           ; Enable pin high
00076d 940e 078b     call    delay1uS                        ; implement 'Data set-up time' (80 nS) and 'Enable pulse width' (230 nS)
00076f 9896          cbi     lcd_E_port, lcd_E_bit           ; Enable pin low
000770 940e 078b     call    delay1uS                        ; implement 'Data hold time' (10 nS) and 'Enable cycle time' (500 nS)
000772 9508          ret
                 
                 ; ============================== End of 4-bit LCD Subroutines ===============
                 
                 ; ============================== Time Delay Subroutines =====================
                 ; Name:     delayYx1mS
                 ; Purpose:  provide a delay of (YH:YL) x 1 mS
                 ; Entry:    (YH:YL) = delay data
                 ; Exit:     no parameters
                 ; Notes:    the 16-bit register provides for a delay of up to 65.535 Seconds
                 ;           requires delay1mS
                 
                 delayYx1mS:
000773 940e 077d     call    delay1mS                        ; delay for 1 mS
000775 9721          sbiw    YH:YL, 1                        ; update the the delay counter
000776 f7e1          brne    delayYx1mS                      ; counter is not zero
                 
                 ; arrive here when delay counter is zero (total delay period is finished)
000777 9508          ret
                 
                 ; ---------------------------------------------------------------------------
                 ; Name:     delayTx1mS
                 ; Purpose:  provide a delay of (temp_lcd) x 1 mS
                 ; Entry:    (temp_lcd) = delay data
                 ; Exit:     no parameters
                 ; Notes:    the 8-bit register provides for a delay of up to 255 mS
                 ;           requires delay1mS
                 
                 delayTx1mS:
000778 940e 077d     call    delay1mS                        ; delay for 1 mS
00077a 958a          dec     temp_lcd                            ; update the delay counter
00077b f7e1          brne    delayTx1mS                      ; counter is not zero
                 
                 ; arrive here when delay counter is zero (total delay period is finished)
00077c 9508          ret
                 
                 ; ---------------------------------------------------------------------------
                 ; Name:     delay1mS
                 ; Purpose:  provide a delay of 1 mS
                 ; Entry:    no parameters
                 ; Exit:     no parameters
                 ; Notes:    chews up fclk/1000 clock cycles (including the 'call')
                 
                 delay1mS:
00077d 93cf          push    YL                              ; [2] preserve registers
00077e 93df          push    YH                              ; [2]
00077f e9cb          ldi     YL, low (((fclk/1000)-18)/4)    ; [1] delay counter
000780 e0df          ldi     YH, high(((fclk/1000)-18)/4)    ; [1]
                 
                 delay1mS_01:
000781 9721          sbiw    YH:YL, 1                        ; [2] update the the delay counter
000782 f7f1          brne    delay1mS_01                     ; [2] delay counter is not zero
                 
                 ; arrive here when delay counter is zero
000783 91df          pop     YH                              ; [2] restore registers
000784 91cf          pop     YL                              ; [2]
000785 9508          ret                                     ; [4]
                 
                 ; ---------------------------------------------------------------------------
                 ; Name:     delayTx1uS
                 ; Purpose:  provide a delay of (temp_lcd) x 1 uS with a 16 MHz clock frequency
                 ; Entry:    (temp_lcd) = delay data
                 ; Exit:     no parameters
                 ; Notes:    the 8-bit register provides for a delay of up to 255 uS
                 ;           requires delay1uS
                 
                 delayTx1uS:
000786 940e 078b     call    delay1uS                        ; delay for 1 uS
000788 958a          dec     temp_lcd                            ; decrement the delay counter
000789 f7e1          brne    delayTx1uS                      ; counter is not zero
                 
                 ; arrive here when delay counter is zero (total delay period is finished)
00078a 9508          ret
                 
                 ; ---------------------------------------------------------------------------
                 ; Name:     delay1uS
                 ; Purpose:  provide a delay of 1 uS with a 16 MHz clock frequency
                 ; Entry:    no parameters
                 ; Exit:     no parameters
                 ; Notes:    add another push/pop for 20 MHz clock frequency
                 
                 delay1uS:
00078b 938f          push    temp_lcd                            ; [2] these instructions do nothing except consume clock cycles
00078c 918f          pop     temp_lcd                            ; [2]
00078d 938f          push    temp_lcd                            ; [2]
00078e 918f          pop     temp_lcd                            ; [2]
00078f 9508          ret                                     ; [4]
                 
                 ; ============================== End of Time Delay Subroutines ==============
                 
                 
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;			M A I N   P R O G R A M
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;			 
                 ;-------------------------------------------------------------------------------------------------------------------
                 ; Main Program Loop
                 ;
                 ; This is where everything but sound generation happens. This loop is interrupted 40,000 times per second by the
                 ; sample interrupt routine. When it's actually allowed to get down to work, it scans the panel switches every 32 ms,
                 ; scans the knobs a lot more than that,  calculates envelopes, processes the LFO and parses MIDI input. 
                 ; 
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;
                 
                 
                 .INCLUDE "initialize.inc"				; Initialize variables, constants and start timer interrupts 
                 
                 ; Meeblip anode		Version 1.00
                 ;
                 ;-------------------------------------------------------------------------------------------------------------------
                 ; Initialization
                 ;
                 
                 RESET:
000790 94f8                  cli				            ; disable interrupts
                 
                 ;JTAG Disable - Set JTD in MCSCSR
000791 9100 0034             lds     r16, MCUCSR         ; Read MCUCSR
000793 6800                  sbr     r16, 1 << JTD       ; Set jtag disable flag
000794 bf04                  out     MCUCSR, r16         ; Write MCUCSR
000795 bf04                  out     MCUCSR, r16         ; and again as per datasheet
                 
                 ;initialize stack:
000796 e50f        			ldi 	r16, low(RAMEND)
000797 e018      			ldi 	r17, high(RAMEND)
000798 bf0d      		    out	    SPL, r16
000799 bf1e      		    out	    SPH, r17
                 
                 ;initialize variables:
00079a 2488      		    clr	    ZERO
00079b 2422      		    clr	    PHASEA_0
00079c 2433          		clr	    PHASEA_1
00079d 2444      		    clr	    PHASEA_2
00079e 2455      		    clr	    PHASEB_0
00079f 2466      		    clr	    PHASEB_1
0007a0 2477      		    clr	    PHASEB_2
0007a1 2499      			clr 	a_L					; clear DCF registers
0007a2 24aa      			clr 	a_H					;
0007a3 2722      			clr		z_L					;
0007a4 2733      			clr 	z_H					;
0007a5 27ee      			clr 	temp				;
0007a6 27ff      			clr 	temp2				;
0007a7 e005      			ldi		r16, 5
0007a8 9300 00cd 			sts 	KNOB_DEADZONE, r16	
0007aa e000      		    ldi	    r16, 0
0007ab 9300 00e8 			sts		BUTTON_STATUS, r16	; no buttons pressed
0007ad 9300 00e9 			sts		FIRMWARE, r16		; Run standard firmware
0007af 9300 0078 			sts		PATCH_SWITCH1, r16	; Default patch is null until loaded from front panel or memory
0007b1 9300 0074 			sts		SWITCH1, r16
0007b3 9300 007a 			sts		SETMIDICHANNEL, r16 ; Default MIDI channel to zero (omni)
0007b5 9300 00da 			sts		FMDEPTH, r16		; FM Depth = 0
0007b7 9300 009e 		    sts	    GATE, r16		    ; GATE = 0
0007b9 9300 009f 		    sts	    GATEEDGE, r16	    ; GATEEDGE = 0
0007bb 9300 008a 		    sts	    LEVEL, r16		    ; LEVEL = 0
0007bd 9300 00a7 		    sts	    ENV_FRAC_L, r16	    ;\
0007bf 9300 00a8 		    sts	    ENV_FRAC_H, r16	    ; > ENV = 0
0007c1 9300 00a9 		    sts	    ENV_INTEGR, r16	    ;/
0007c3 9300 008c 		    sts	    ADC_CHAN, r16	    ; ADC_CHAN = 0
0007c5 9300 0085 		    sts	    NOTE_L, r16		    ;\
0007c7 9300 0086 		    sts	    NOTE_H, r16		    ; >
0007c9 9300 0087 		    sts	    NOTE_INTG, r16	    ;/
0007cb 9300 0067 		    sts	    MIDIPBEND_L, r16    ;\
0007cd 9300 0068 		    sts	    MIDIPBEND_H, r16    ;/ P.BEND = 0
0007cf 9300 013b 		    sts	    MIDIMODWHEEL, r16   ; MOD.WHEEL = 0
0007d1 9300 006a 			sts		KNOB_SHIFT, r16		; Initialize panel shift switch = 0 (unshifted)
0007d3 9300 00e1 			sts		VCF_STATUS, r16		; Flag VCF as off (0)
0007d5 e002      		    ldi	    r16, 2
0007d6 9300 0088 		    sts	    PORTACNT, r16	    ; PORTACNT = 2
0007d8 ef0f      		    ldi	    r16, 255
0007d9 9300 006b 			sts		POWER_UP, r16		; Set power_up flag to 255 to force first initialization of panel switches
0007db 9300 00db 			sts		WRITE_MODE, r16		; Patch write mode defaults to "off" 
0007dd 9300 0089 		    sts	    LPF_I, r16		    ; no DCF
0007df 9300 0064 		    sts	    MIDINOTE, r16	    ; note# = 255
0007e1 9300 0066 		    sts	    MIDINOTEPREV, r16   ; note# = 255
0007e3 e50e      		    ldi	    r16, 0x5E		    ;\
0007e4 eb14      		    ldi	    r17, 0xB4		    ; \
0007e5 e726      		    ldi	    r18, 0x76		    ;  \ initialising of
0007e6 9300 00bc 		    sts	    SHIFTREG_0, r16		;  / shift register
0007e8 9310 00bd 		    sts	    SHIFTREG_1, r17		; /
0007ea 9320 00be 		    sts	    SHIFTREG_2, r18		;/
0007ec e000      		    ldi	    r16, 0			    ;\
0007ed e010          		ldi	    r17, 0			    ; > Amin = 0
0007ee e020      		    ldi	    r18, 0			    ;/
0007ef 9300 00bf 		    sts	    LFOBOTTOM_0, r16	;\
0007f1 9310 00c0 		    sts	    LFOBOTTOM_1, r17	; > store Amin for LFO
0007f3 9320 00c1 		    sts	    LFOBOTTOM_2, r18	;/
0007f5 ef0f      		    ldi	    r16, 255		    ;\
0007f6 ef1f      		    ldi	    r17, 255		    ; > Amax = 255,999
0007f7 ef2f      		    ldi	    r18, 255		    ;/
0007f8 9300 00c2 		    sts	    LFOTOP_0, r16		;\
0007fa 9310 00c3 		    sts	    LFOTOP_1, r17		; > store Amax for LFO
0007fc 9320 00c4 		    sts	    LFOTOP_2, r18		;/
0007fe e124      			ldi		r18, 20
0007ff 9300 00c5 			sts	    LFO2BOTTOM_0, r16	;\
000801 9310 00c6 		    sts	    LFO2BOTTOM_1, r17	; > store Amin for LFO2
000803 9320 00c7 			sts	    LFO2BOTTOM_2, r18	;/
000805 e624      			ldi		r18, 100
000806 9300 00c8 			sts	    LFO2TOP_0, r16		;\
000808 9310 00c9 		    sts	    LFO2TOP_1, r17		; > store Amax for LFO2
00080a 9320 00ca 		    sts	    LFO2TOP_2, r18		;/
                 
00080c e001      			ldi		r16, 1 
00080d 9300 006c 			sts		KNOB0_STATUS, r16		; Flag all knobs so current panel value is loaded upon power up.  
00080f 9300 006d 			sts		KNOB1_STATUS, r16		; = 1
000811 9300 006e 			sts		KNOB2_STATUS, r16		; = 1
000813 9300 006f 			sts		KNOB3_STATUS, r16		; = 1
000815 9300 0070 			sts		KNOB4_STATUS, r16		; = 1
000817 9300 0071 			sts		KNOB5_STATUS, r16		; = 1
000819 9300 0072 			sts		KNOB6_STATUS, r16		; = 1
                 					
                 			; default ENV MOD to 24 
00081b e108      			ldi		r16, 24
00081c 9300 00ae 			sts		VELOCITY_ENVMOD, r16
                 
00081e ef0f      			ldi		r16, 255
00081f 9300 0079 			sts		PATCH_SWITCH2, r16	; Default MIDI set switch to unpressed.
                 
000821 eb00      			ldi		r16, 0b10110000
000822 9300 00e3 			sts		LEVEL_H, r16
000824 e000      			ldi		r16, 0b00000000
000825 9300 00e2 			sts		LEVEL_L, r16		; Default envelope level to zero
                 
                 ;initialize sound parameters:
000827 e000      			ldi	    r16,0
000828 9300 00b0 		    sts	    LFOPHASE, r16		;
00082a 9300 00b5 			sts	    LFO2PHASE, r16		;
00082c 9300 00a6 		    sts	    ENVPHASE, r16		;
00082e 9300 007b 		    sts	    DETUNEB_FRAC, r16	;\
000830 9300 007c 		    sts	    DETUNEB_INTG, r16	;/ detune = 0
000832 9300 0069 		    sts	    LFOLEVEL, r16		;
000834 9300 016b 			sts		LFOFREQ, r16
000836 9300 0171 			sts		PORTAMENTO, r16
000838 e604      			ldi		r16, 100
000839 9300 0172 			sts		VCFENVMOD, r16		; Default VCFENVMOD to 100 unless overridden by MIDI CC
                 
                 ;initialize port A:
00083b e000      		    ldi	    r16, 0x00    		;\
00083c bb0b      			out	    PORTA, r16		    ;/ PA = zzzzzzzz
00083d e000      		    ldi	    r16, 0x00    		;\
00083e bb0a      		    out	    DDRA, r16		    ;/ PA = iiiiiiii    all inputs (panel pots)
                 
                 ;initialize port B:
00083f ef0f      		    ldi	    r16, 0xFF    		;\
000840 bb08      		    out	    PORTB, r16		    ;/ PB = pppppppp
000841 e000      		    ldi	    r16, 0x00    	    ;\
000842 bb07      		    out	    DDRB, r16		    ;/ PB = iiiiiiii    all inputs
                 
                 ; SPI outputs on port B
                 
                 ;			ldi		r16,(1<<DDB5)|(1<<DDB7) ; MOSI and SCK as outputs
000843 eb00      			ldi		r16,(1<<DDB5)|(1<<DDB7)|(1<<DDB4) ; MOSI, SS and SCK as outputs
000844 bb07      			out		DDRB, r16
                 
                 			; Enable SPI, Master, set clock rate fck/2
000845 e500      			ldi		r16,(1<<SPE)|(1<<MSTR)	; fck/4
000846 b90d      			out		SPCR, r16
                 
000847 e001      			ldi		r16, (1<<SPI2X)			; fck/2 (double SPI speed)
000848 b90e      			out		SPSR, r16
                 
                 ;initialize port C:
000849 e000      		    ldi	    r16, 0x00    	    ;\
00084a bb04      		    out	    DDRC, r16		    ;/ PB = iiiiiiii    all inputs, pull-ups enabled
00084b ef0f      		    ldi	    r16, 0xFF    		;\
00084c bb05      		    out	    PORTC, r16		    ;/ PB = pppppppp
                 
                 
                 ;initialize port D:
00084d ef0e      		    ldi	    r16, 0b11111110    		;\
00084e bb01      		    out	    DDRD, r16		    ;/ PD = oooooooi    all outputs except PD0 (MIDI-IN) 
                 			;ldi	    r16, 0b11111110    		;\
00084f e000      			ldi		r16, 0b00000000
000850 bb02      		    out	    PORTD, r16		    ;/ Disable pull-ups for Port D
                 ; Turn Power/MIDI LED on at power up
                 			
000851 9a91      			sbi	    PORTD, 1		    ; LED on
                 
                 ;initialize Timer0:
                 
000852 e301                  ldi     r16, 49             ;\  ; Set sample rate to 40.00 kHz
000853 bf0c                  out     OCr0, r16           ;/ OCr0 = 49 gives 40000.00 Hz sample rate at 400 cycles per sample loop.
000854 e00a                  ldi     r16, 0x0A           ;\ clear timer on compare,
000855 bf03                  out     TCCr0, r16          ;/ set prescaler = CK/8
                 
                 ;initialize Timer1:
000856 e004      		    ldi	    r16, 0x04    		;\ prescaler = CK/256
000857 bd0e      		    out	    TCCr1B, r16		    ;/ (clock = 32s)
                 
                 ;Timer2 PWM controlling cutoff
000858 e109                  ldi     r16, 25              ; Set filter cutoff to minimum value 
000859 bd03                  out     OCr2, r16			; load output compare register 
00085a e601      			ldi		r16, 0b01100001		; Phase correct PWM, no prescaler
00085b bd05      		    out	    TCCr2, r16			; start PWM
                 
                 ;initialize UART:
00085c e000      		    ldi	    r16, high((cpu_frequency / (baud_rate * 16)) - 1)
00085d bd00      		    out	    UBRRH, r16
00085e e10f          		ldi	    r16, low((cpu_frequency / (baud_rate * 16)) - 1)
00085f b909                  out     UBRRL, r16
                 
                 ; enable receiver and receiver interrupt
000860 e900          		ldi	    r16, (1<<RXCIE)|(1<<RXEN)   ;\
000861 b90a      		    out	    UCR, r16		            ;/ RXCIE=1, RXEN=1
                 
                 ;initialize ADC:
000862 e806      		    ldi	    r16, 0x86    		;\
000863 b906      		    out	    ADCSRA, r16		    ;/ ADEN=1, clk = 125 kHz
                 
                 ;initialize interrupts:
000864 e002      		    ldi	    r16, 0x02    		;\
000865 bf09      		    out	    TIMSK, r16		    ;/ OCIE0=1
                 
000866 9478          		sei				            ; Interrupt Enable
                 
                 ;start conversion of the first A/D channel:
000867 9120 008c 		    lds	    r18, ADC_CHAN
000869 db79      		    rcall	ADC_START
                 
                 ; Load MIDI channel from eeprom
                 
00086a e023      			ldi		r18, $03
00086b ef1f      			ldi		r17, $FF				; Set eeprom address to $03FF (last byte)
00086c dc36      			rcall   EEPROM_READ				; load MIDI CHANNEL into r16
00086d 3005      			cpi		r16, 5					
00086e f008      			brlo	LOAD_MIDI_CHANNEL		; If stored MIDI Channel is not Channel 1-4, set synth into MIDI OMNI mode.
00086f e000      			ldi		r16, 0			
                 LOAD_MIDI_CHANNEL:
000870 9300 007a 			sts		SETMIDICHANNEL, r16
                 
                 ;initialize the keyboard scan time 
000872 b50c      		    in		r16, TCNT1L		        ;\
000873 b51d      		    in		r17, TCNT1H		        ;/ r17:r16 = TCNT1 = t
000874 9300 00a0 		    sts		TPREV_KBD_L, r16
000876 9310 00a1 		    sts		TPREV_KBD_H, r17
                 
                 ; Alternate firmware check
                 ; Check if MIDI SET button is pressed on back panel at power up. If so, run alternate firmware.
000878 b303      			in		r16, PINC	; Read PORTC pin values (front panel switches)	
000879 fd00      			sbrc	r16, 0				
00087a c00c      			rjmp	STANDARD_FIRMWARE	; skip if MIDI Set button = 1 (not pressed)
                 			
00087b e001      			ldi		r16, 1
00087c 9300 00e9 			sts		FIRMWARE, r16 		; Flag alternate FIRMWARE (set to 1)
                 			
                 			; blink LED double fast if alternate firmware has been selected. 
00087e e003      			ldi		r16, 3
00087f 9300 00e8 			sts		BUTTON_STATUS, r16	; Save flash status, turn on LED flash timer 
000881 ef0f      			ldi		r16, 255
000882 9300 00e6 			sts		LED_TIMER, r16
000884 e300      			ldi		r16, 48
000885 9300 00e7 			sts		LED_TIMER2, r16
                 			
                 
000887 ddc5      rcall LCD_START
                 
                 MAINLOOP:
                 
                 ; ------------------------------------------------------------------------------------------------------------------------
                 ; Read switch values
                 ; ------------------------------------------------------------------------------------------------------------------------
                 ;
                 
                 .INCLUDE "scan_switches.inc"
                 
                 ; Meeblip anode		Version 1.00
                 ;
                 ;
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;
                 ;---------------------
                 ; scan panel switches:
                 ;---------------------
                 ;begin:
                 
000888 b50c      		    in	    r16, TCNT1L		    ;\
000889 b51d      		    in	    r17, TCNT1H		    ;/ r17:r16 = t
00088a 9120 00a0 		    lds	    r18, TPREV_KBD_L	;\
00088c 9130 00a1 		    lds	    r19, TPREV_KBD_H	;/ r19:r18 = t0
00088e 1b02      		    sub	    r16, r18			;\
00088f 0b13      		    sbc	    r17, r19			;/ r17:r16 = t - t0
000890 560a      		    subi	r16, LOW(KBDSCAN)	;\
000891 4118      		    sbci	r17, HIGH(KBDSCAN)	;/ r17:r16 = (t-t0) - 100ms
000892 f408      		    brsh	MLP_SCAN		    ;\
000893 c04b      		    rjmp	MLP_SKIPSCAN		;/ skip scanning if (t-t0) < 100ms
                 
                 MLP_SCAN:
                 
                 
                 ; Read panel switches
                 						
000894 b303      			in		r16, PINC	; Read PORTC pin values (front panel switches)	
000895 9110 0074 		    lds	    r17, SWITCH1
000897 9120 0079 			lds		r18, PATCH_SWITCH2
                 
                 ; MIDI Channel momentary switch (PORT C0)
000899 fb00      			bst		r16, 0
00089a f920      			bld		r18, SW_MIDI		; Copy Port C0 value into MIDI Channel set switch
                 
                 ; LFO Destination 	PATCH_SWITCH1, SW_LFO_DEST (PORT C4)
00089b fb04      			bst		r16, 4
00089c f913      			bld		r17, SW_LFO_DEST	; Copy PORT C4 into SW_LFO_DEST
                 			
                 ; PWM_SWEEP 		PATCH_SWITCH1, SW_PWM_SWEEP (PORT C5)
00089d fb05      			bst		r16, 5
00089e f912      			bld		r17, SW_PWM_SWEEP	; Copy PORT C5 into SW_PWM_SWEEP
                 			
                 ; Octave			PATCH_SWITCH2, SW_OSCB_OCT (PORT C6)
00089f fb06      			bst		r16, 6
0008a0 f911      			bld		r17, SW_OSCB_OCT	; Copy PORT C6 into SW_OSCB_OCT
                 
                 ; Envelope Sustain	PATCH_SWITCH2, SW_SUSTAIN (PORT C7)
0008a1 fb07      			bst		r16, 7
0008a2 f910      			bld		r17, SW_SUSTAIN	; Copy PORT C7 into SW_SUSTAIN
                 			
0008a3 9310 0074 		    sts	    SWITCH1, r17 ; Store switch settings				
0008a5 9320 0079 		    sts	    PATCH_SWITCH2, r18 ; Store MIDI switch setting
                 			
                 ; Make sure we capture switch settings at power-up, so we know when they're changed.
                 			
0008a7 9130 006b 			lds		r19, POWER_UP		; Is this the first time through this code since synth was turned on?
0008a9 ff30      			sbrs	r19, 0				
0008aa c007      			rjmp	MLP_SWITCH
0008ab 9310 0076 			sts		OLD_SWITCH1, r17	; Yes: make OLD_SWITCHx = SWITCHx (so we know when they've been flipped)
0008ad 9310 0078 			sts	    PATCH_SWITCH1, r17	; Read starup patch switch values from the front panel
0008af 2733      			clr		r19					
0008b0 9330 006b 			sts		POWER_UP, r19		; Clear the POWER_UP flag so we don't reinitialize
                 
                 
                 ; ---------------------------------------------------------------------------------------------------------------
                 ; Only update switch value if the physical switch has moved, to avoid overwriting MIDI CC parameter changes
                 ; 
                 ; ---------------------------------------------------------------------------------------------------------------
                 MLP_SWITCH:
                 			; Compare SWITCH1 to OLD_SWITCH1. Skip if unchanged.
                 
0008b2 9100 0074 			lds		r16, SWITCH1
0008b4 9110 0076 			lds		r17, OLD_SWITCH1	
0008b6 1701      			cp		r16, r17		
0008b7 f139      			breq	MLP_SWITCH_EXIT			; Switch 1 unchanged, so leave as is.
0008b8 9120 0078 			lds		r18, PATCH_SWITCH1	
                 
                 			; Compare bits in OLD_SWITCH1 and SWITCH1. If different, copy SWITCH1 bit to PATCH_SWITCH1 bit.
                 			; Perform an exclusive OR on r17 and r16. Changed bits are flagged as 1's.
0008ba 2710      			eor		r17, r16	
                 
                 ;MLP_BIT0:			
0008bb ff10      			sbrs	r17, 0				
0008bc c002      			rjmp	MLP_BIT1			; Exit if bit is not set
0008bd fb00      			bst		r16, 0
0008be f920      			bld		r18, 0				; copy bit from SWITCH1 to PATCH_SWITCH1
                 MLP_BIT1:
                 
0008bf ff11      			sbrs	r17, 1				
0008c0 c002      			rjmp	MLP_BIT2	
0008c1 fb01      			bst		r16, 1
0008c2 f921      			bld		r18, 1		
                 							
                 MLP_BIT2:
0008c3 ff12      			sbrs	r17, 2				
0008c4 c002      			rjmp	MLP_BIT3			
0008c5 fb02      			bst		r16, 2
0008c6 f922      			bld		r18, 2	
                 					
                 MLP_BIT3:
0008c7 ff13      			sbrs	r17, 3				
0008c8 c002      			rjmp	MLP_BIT4			
0008c9 fb03      			bst		r16, 3
0008ca f923      			bld		r18, 3
                 		
                 MLP_BIT4:
0008cb ff14      			sbrs	r17, 4				
0008cc c002      			rjmp	MLP_BIT5			
0008cd fb04      			bst		r16, 4
0008ce f924      			bld		r18, 4				
                 
                 MLP_BIT5:
0008cf ff15      			sbrs	r17, 5				
0008d0 c002      			rjmp	MLP_BIT6			
0008d1 fb05      			bst		r16, 5
0008d2 f925      			bld		r18, 5				
                 
                 MLP_BIT6:
0008d3 ff16      			sbrs	r17, 6				
0008d4 c002      			rjmp	MLP_BIT7			
0008d5 fb06      			bst		r16, 6
0008d6 f926      			bld		r18, 6					
                 
                 MLP_BIT7:
0008d7 ff17      			sbrs	r17, 7				
0008d8 c002      			rjmp	MLP_PATCH1SAVE			
0008d9 fb07      			bst		r16, 7
0008da f927      			bld		r18, 7		
                 
                 
                 MLP_PATCH1SAVE:	
                 
0008db 9320 0078 			sts		PATCH_SWITCH1, r18		; Store changes	to patch
0008dd 9300 0076 			sts		OLD_SWITCH1, r16		; Keep a copy of panel switches so we know if things change next time
                 			
                 MLP_SWITCH_EXIT:			
                 
                 
                 MLP_SKIPSCAN:
                 
                 ; Check MIDI Set switch
0008df 9100 00e8 			lds		r16, BUTTON_STATUS
0008e1 3003      			cpi		r16, 3						; If button has been pressed, allow LED to flash
0008e2 f079      			breq	control_exit
                 
0008e3 9150 0079 			lds		r21, PATCH_SWITCH2
0008e5 fd50      			sbrc	r21, SW_MIDI				; 0(pressed)/1(not pressed)
0008e6 c00b      			rjmp	CONTROL_EXIT				; button not pressed
                 
                 			; blink LED if MIDI button has been pressed
0008e7 e001      			ldi		r16, 1
0008e8 9300 00e8 			sts		BUTTON_STATUS, r16	; Set control status to MIDI, turn on control timer
0008ea ef0f      			ldi		r16, 255
0008eb 9300 00e6 			sts		LED_TIMER, r16
0008ed e600      			ldi		r16, 96
0008ee 9300 00e7 			sts		LED_TIMER2, r16
0008f0 2700      			clr		r16
0008f1 dbca      			rcall	CLEAR_KNOB_STATUS	; Snap to current knob positons, so we know if they're moved to set a new channel
                 
                 control_exit:
0008f2 9100 00e8 			lds		r16, BUTTON_STATUS
0008f4 2300      			tst		r16
0008f5 f0a9      			breq	MLP_LED_END			; button hasn't been pressed, so skip
                 
0008f6 9110 00e6 			lds		r17, LED_TIMER
0008f8 9120 00e7 			lds		r18, LED_TIMER2
0008fa 1b10      			sub		r17, r16			; r16 contains the button flash rate	
0008fb 0928      			sbc		r18, ZERO
                 
0008fc 2322      			tst		r18		; hit zero?
0008fd f049      			breq	hit_zero
0008fe 9310 00e6 			sts		LED_TIMER, r17
000900 9320 00e7 			sts		LED_TIMER2, r18
                 
                 			; figure out if LED should be on or off. 
000902 ff21      			sbrs	r18, 1
000903 9891      			cbi		PORTD, 1			; LED off if bit 1 in r18 is zero
000904 fd21      			sbrc	r18, 1
000905 9a91      			sbi		PORTD, 1			; LED on if bit 1 is one
                 
000906 c004      			rjmp	MLP_LED_END
                 hit_zero:	
000907 9a91      			sbi	    PORTD, 1		    ; LED on
000908 e000      			ldi		r16, 0
000909 9300 00e8 			sts		BUTTON_STATUS, r16	; Turn off button
                 
                 
                 ; ------------------------------------------------------------------------------------------------------------------------
                 ; Read potentiometer values
                 ; ------------------------------------------------------------------------------------------------------------------------
                 ;
                 
                 .INCLUDE "scan_knobs.inc"
                 
                 ; Meeblip anode		Version 1.00
                 ;
                 ;
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;
                 ;--------------------
                 ;read potentiometers:
                 ;--------------------
                 
00090b dada      		    rcall	ADC_END			    ; r16 = AD(i)
00090c 9120 008c 		    lds	    r18, ADC_CHAN		;\
00090e 9320 008d 			sts		PREV_ADC_CHAN, r18   ; keep track of which ADC channel we're processing. 
000910 e8ce      			ldi		r28, low(ADC_0)
000911 e0d0      			ldi		r29, high(ADC_0)
000912 0fc2      			add		r28, r18
000913 1dd8      			adc		r29, ZERO
000914 8308      		    st	    Y, r16			    ; AD(i) --> ADC_i
                 
                 ;next channel:
000915 9523      		    inc	    r18
000916 7027      		    andi	r18, 0x07
000917 9320 008c 		    sts	    ADC_CHAN,r18
000919 dac9      		    rcall	ADC_START	        ; start conversion of next channel
                 			
                 ; ------------------------------------------------------------------------------------------------------------------------
                 ; Read potentiometer values
                 ; ------------------------------------------------------------------------------------------------------------------------
                 ;
00091a 9140 008d 			lds		r20, PREV_ADC_CHAN	; Only process the most recently scanned pot, store ADC channel 0..7 in r20
                 
                 CHECK_0:
00091c 3040      			cpi		r20, 0				; Update knob 0, LFO Depth?
00091d f481      			brne	CHECK_1
00091e dbcf      			rcall	POT_SCAN			; If so, check if parameter should be updated with pot value in r16
00091f 2311      			tst		r17					
000920 f1a1      			breq	EXIT_POTS			; Skip update if pot hasn't been updated
000921 9300 0069 		    sts	    LFOLEVEL,r16		
000923 9300 016a 			sts		PANEL_LFOLEVEL, r16	
                 
                 			; Check if MIDI set switch has been pressed. If so, set MIDI CHANNEL
000925 9100 00e8 			lds		r16, BUTTON_STATUS
000927 2300      			tst		r16
000928 f161      			breq	EXIT_POTS				; button hasn't been pressed, so skip
000929 3003      			cpi		r16, 3
00092a f151      			breq	EXIT_POTS
00092b e004      			ldi		r16, 4					; MIDI CHANNEL 4
00092c db80      			rcall	SET_MIDI_CHANNEL
                 
00092d c074      			rjmp	END_POTS
                 
                 CHECK_1:
00092e 3041      			cpi		r20, 1				; Update knob 1, LFO rate?
00092f f471      			brne	CHECK_2
000930 dbbd      			rcall	POT_SCAN			; If so, check if parameter should be updated with pot value in r16
000931 2311      			tst		r17					
000932 f111      			breq	EXIT_POTS
000933 9300 016b 			sts	    LFOFREQ,r16
                 
                 			; Check if MIDI set switch has been pressed. If so, set MIDI CHANNEL
000935 9100 00e8 			lds		r16, BUTTON_STATUS
000937 2300      			tst		r16
000938 f0e1      			breq	EXIT_POTS				; button hasn't been pressed, so skip
000939 3003      			cpi		r16, 3
00093a f0d1      			breq	EXIT_POTS
00093b e003      			ldi		r16, 3					; MIDI CHANNEL 3
00093c db70      			rcall	SET_MIDI_CHANNEL
00093d c064      			rjmp	END_POTS
                 
                 CHECK_2:
00093e 3042      			cpi		r20, 2				; Update knob 2, Detune?
00093f f4b1      			brne	CHECK_3
000940 dbad      			rcall	POT_SCAN			; If so, check if parameter should be updated with pot value in r16
000941 2311      			tst		r17					
000942 f051      			breq	EXIT_CHECK2			; Skip update if pot hasn't been updated
000943 9300 016c 			sts		OSC_DETUNE, r16
                 
                 			; Check if MIDI set switch has been pressed. If so, set MIDI CHANNEL
000945 9100 00e8 			lds		r16, BUTTON_STATUS
000947 2300      			tst		r16
000948 f021      			breq	EXIT_CHECK2				; button hasn't been pressed, so skip
000949 3003      			cpi		r16, 3
00094a f011      			breq	EXIT_CHECK2
00094b e002      			ldi		r16, 2					; MIDI CHANNEL 2
00094c db60      			rcall	SET_MIDI_CHANNEL
                 
                 EXIT_CHECK2:
00094d 9100 016c 			lds		r16, OSC_DETUNE		; grab the patch value, just in case it hasn't been updated
00094f db2b      		    rcall	NONLINPOT		    ; AD6.1 --> DCO B detune with non-linear knob (center is tuned)
000950 5810      		    subi	r17, 128		     
000951 9300 007b 		    sts	    DETUNEB_FRAC, r16	; Value -128.000..+127.996
000953 9310 007c 		    sts	    DETUNEB_INTG, r17	
                 EXIT_POTS:
000955 c04c      			rjmp	END_POTS
                 
                 CHECK_3:
000956 3043      			cpi		r20, 3				; Update knob 3, Shape (PWM)?
000957 f4f1      			brne	CHECK_4	
000958 db95      			rcall	POT_SCAN			; If so, check if parameter should be updated with pot value in r16
000959 2311      			tst		r17					
00095a f089      			breq	EXIT_CHECK3			; Skip update if pot hasn't been updated
00095b 9300 016d 			sts     PULSE_KNOB, r16
00095d 9506      			lsr		r16					; 0..127
00095e 9506      			lsr		r16					; 0..63
00095f 9506      			lsr		r16					; 0..31
000960 9506      			lsr		r16					; 0..15
000961 9506      			lsr		r16					; 0..8
000962 9300 00d6 			sts		WAVETABLE, r16		; Knob value selects one of 8 wavetables  
                 
                 			; Check if MIDI set switch has been pressed. If so, set MIDI CHANNEL
000964 9100 00e8 			lds		r16, BUTTON_STATUS
000966 2300      			tst		r16
000967 f021      			breq	EXIT_CHECK3				; button hasn't been pressed, so skip
000968 3003      			cpi		r16, 3
000969 f011      			breq	EXIT_CHECK3
00096a e001      			ldi		r16, 1					; MIDI CHANNEL 1
00096b db41      			rcall	SET_MIDI_CHANNEL
                 
                 EXIT_CHECK3:
00096c 9100 016d 			lds		r16, PULSE_KNOB		; grab the patch value, just in case it hasn't been updated
00096e 9506      			lsr		r16					; Divide it by two (we only need 0-50% pulse)
                 										; Limit to 10-127
00096f 300a      			cpi		r16, 10
000970 f008      			brlo	CHECK_3LIMIT
000971 c001      			rjmp	CHECK_3A
                 CHECK_3LIMIT:
000972 e00a      			ldi		r16, 10				; Limit minimum Pulse width to 10
                 CHECK_3A:
000973 9300 00d8 			sts		PULSE_KNOB_LIMITED, r16
000975 c02c      			rjmp	END_POTS
                 
                 CHECK_4:
000976 3044      			cpi		r20, 4				; Update knob 4, Filter Cutoff?
000977 f431      			brne	CHECK_5		
000978 db75      			rcall	POT_SCAN			; If so, check if parameter should be updated with pot value in r16
000979 2311      			tst		r17					
00097a f139      			breq	END_POTS				; Skip update if pot hasn't been updated
00097b 9300 016e 			sts	    CUTOFF,r16					
00097d c024      			rjmp	END_POTS
                 
                 CHECK_5:	
00097e 3045      			cpi		r20, 5				; Update knob 5, Decay?
00097f f4d9      			brne	CHECK_6	
000980 db6d      			rcall	POT_SCAN			; If so, check if parameter should be updated with pot value in r16	
000981 2311      			tst		r17					
000982 f011      			breq	CHECK_5B				; Skip update if pot hasn't been updated		
000983 9300 016f 			sts	    KNOB_AMP_DECAY, r16	
                 
                 CHECK_5B:
000985 9100 016f 			lds	    r16, KNOB_AMP_DECAY 		; Grab the value, in case it hasn't been updated (IE: MIDI CC parameter update)
000987 9130 0078 			lds		r19, PATCH_SWITCH1
000989 ff30      			sbrs	r19, SW_SUSTAIN				
00098a c008      			rjmp	DCF_SUSTAIN_OFF		    ; Skip if sustain is off...
00098b ef3f      			ldi		r19, 255					; Sustain is on, so...
00098c 9330 007f 			sts		SUSTAINLEVEL, r19			; Set sustain to maximum
00098e 9330 007e 			sts		DECAYTIME, r19				; Set decay to maximum
000990 9300 0080 			sts		RELEASETIME, r16			; Set release time to value of decay knob
000992 c00f      			rjmp	END_POTS
                 
                 DCF_SUSTAIN_OFF:
000993 e030      			ldi		r19, 0						; Sustain is off, so...		
000994 9330 007f 			sts		SUSTAINLEVEL, r19			; Set sustain to minimum
000996 9300 007e 			sts		DECAYTIME, r16				; Set decay time to value of decay knob
000998 9300 0080 			sts		RELEASETIME, r16			; Set release time to value of decay knob
00099a c007      			rjmp	END_POTS			
                 			
                 CHECK_6:
00099b 3046      			cpi		r20, 6					; Update knob 6, Attack?
00099c f429      			brne	END_POTS
00099d db50      			rcall	POT_SCAN				; If so, check if parameter should be updated with pot value in r16	
00099e 2311      			tst		r17					
00099f f011      			breq	END_POTS				; Skip update if pot hasn't been updated		
0009a0 9300 0170 			sts		KNOB_AMP_ATTACK, r16    
                 
                 
                 
                 ;-------------------------------------------------------------------------------------------------------------------
                 ; MIDI velocity 
                 ;-------------------------------------------------------------------------------------------------------------------
                 ; 
                 		
                 MIDI_VELOCITY:
                 
                 			; Velocity control of filter
0009a2 9100 0063 			lds 	R16, MIDIVELOCITY		; Value is 0..127
0009a4 0f00      			lsl		r16
0009a5 9110 0172 			lds		r17, VCFENVMOD
0009a7 9f01      			mul		r16, r17
0009a8 9210 00ae 			sts		VELOCITY_ENVMOD, r1	
                 		
                 ;-------------------------------------------------------------------------------------------------------------------
                 
                 
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;			Calculate Time Delta
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;
0009aa b56c      		    in	    r22, TCNT1L		    ;\
0009ab b57d      		    in	    r23, TCNT1H		    ;/ r23:r22 = TCNT1 = t
0009ac 2f26      		    mov	    r18, r22		    ;\
0009ad 2f37          		mov	    r19, r23		    ;/ r19:r18 = t
0009ae 9100 00a2 		    lds	    r16, TPREV_L	    ;\
0009b0 9110 00a3 		    lds	    r17, TPREV_H	    ;/ r17:r16 = t0
0009b2 1b60      		    sub	    r22, r16		    ;\ r23:r22 = t - t0 = dt
0009b3 0b71      		    sbc	    r23, r17		    ;/ (1 bit = 32 s)
0009b4 9320 00a2 		    sts	    TPREV_L, r18	    ;\
0009b6 9330 00a3 		    sts	    TPREV_H, r19	    ;/ t0 = t
0009b8 9360 00a4     		sts	    DELTAT_L, r22		;\
0009ba 9370 00a5 		    sts	    DELTAT_H, r23		;/ r23:r22 = dT
                 
                 
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;			LFO  
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;
                 ;			LFO1 : 	modulates oscillator pitch or filter cutoff
                 ;			LFO2 :  sweeps PWM waveform duty cycle
                 
                 .INCLUDE "lfo.inc"
                 
                 ; Meeblip anode		Version 1.00
                 ;
                 ;
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;			LFO Generation 
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;
                 ;			LFO	 : 	modulates oscillator pitch or filter cutoff
                 ;			LFO2 :  sweeps PWM waveform duty cycle
                 
                 ;calculate dA:
0009bc 9100 016b 			lds	    r16, LFOFREQ	    ;\
                 
0009be 9110 0078 			lds	    r17, PATCH_SWITCH1	; Check LFO destination bit. 
0009c0 ff13      		    sbrs	r17, SW_LFO_DEST	; DCF is 0, DCO is 1
0009c1 c003      			rjmp	MLP_LFO_NOLIMIT		; Don't limit knob if destination is oscillators
0009c2 3d0c      			cpi		r16, 220			; If VCF LFO rate > 220, limit it
0009c3 f008      			brlo	MLP_LFO_NOLIMIT
0009c4 ed0c      			ldi		r16, 220			; Set maximum rate for LFO when destination is the VCF
                 
                 MLP_LFO_NOLIMIT:
0009c5 9500      		    com	    r16			        ;/ r16 = 255 - ADC0
0009c6 daab      		    rcall	ADCTORATE           ; r19:r18:r17:r16 = rate of rise/fall
0009c7 9160 00a4 		    lds	    r22, DELTAT_L		;\
0009c9 9170 00a5     		lds	    r23, DELTAT_H		;/ r23:r22 = dT
0009cb da43      		    rcall	MUL32X16		    ; r18:r17:r16 = dA
0009cc 9130 00b1 		    lds	    r19, LFO_FRAC_L
0009ce 9140 00b2 		    lds	    r20, LFO_FRAC_H
0009d0 9150 00b3     		lds	    r21, LFO_INTEGR
0009d2 5850      		    subi    r21, 128
0009d3 e0f0      		    ldi	    r31, 0			    ; flag = 0
0009d4 91e0 00b0 		    lds	    r30, LFOPHASE
0009d6 23ee      		    tst	    r30
0009d7 f4a1      		    brne	MLP_LFOFALL
                 
                 ;rising phase:
                 
                 MLP_LFORISE:
0009d8 9160 00c2             lds	    r22, LFOTOP_0		;\
0009da 9170 00c3 		    lds	    r23, LFOTOP_1		; > r24:r23:r22 = Amax
0009dc 9180 00c4 		    lds	    r24, LFOTOP_2		;/
0009de 0f30      		    add	    r19, r16		    ;\
0009df 1f41          		adc	    r20, r17		    ; > A += dA
0009e0 1f52      		    adc	    r21, r18		    ;/
0009e1 f020      		    brcs	MLP_LFOTOP
0009e2 1736      		    cp	    r19, r22		    ;\
0009e3 0747      		    cpc	    r20, r23		    ; > A - Amax
0009e4 0758      		    cpc	    r21, r24		    ;/
0009e5 f0c8      		    brlo	MLP_LFOX		    ; skip when A < Amax
                 
                 ;A reached top limit:
                 
                 MLP_LFOTOP:
0009e6 2f36                  mov	    r19, r22		    ;\
0009e7 2f47      		    mov	    r20, r23		    ; > A = Amax
0009e8 2f58      		    mov	    r21, r24		   	;/
0009e9 e0e1      		    ldi	    r30, 1			    ; begin of falling
0009ea e0f1      		    ldi	    r31, 1			    ; flag = 1
0009eb c013      		    rjmp	MLP_LFOX
                 
                 ;falling phase:
                 
                 MLP_LFOFALL:
0009ec 9160 00bf             lds	    r22, LFOBOTTOM_0	;\
0009ee 9170 00c0 		    lds	    r23, LFOBOTTOM_1	; > r24:r23:r22 = Amin
0009f0 9180 00c1 		    lds	    r24, LFOBOTTOM_2	;/
0009f2 1b30          		sub	    r19, r16		    ;\
0009f3 0b41      		    sbc	    r20, r17		    ; > A -= dA
0009f4 0b52      		    sbc	    r21, r18		    ;/
0009f5 f020      		    brcs	MLP_LFOBOTTOM
0009f6 1763      		    cp	    r22, r19		    ;\
0009f7 0774      		    cpc	    r23, r20		    ; > Amin - A
0009f8 0785      		    cpc 	r24, r21		    ;/
0009f9 f028      		    brlo	MLP_LFOX		    ; skip when A > Amin
                 
                 ;A reached bottom limit:
                 
                 MLP_LFOBOTTOM:
0009fa 2f36                  mov	    r19, r22		    ;\
0009fb 2f47      		    mov	    r20, r23		    ; > A = Amin
0009fc 2f58      		    mov	    r21, r24		    ;/
0009fd e0e0      		    ldi	    r30, 0			    ; begin of rising
0009fe e0f1      		    ldi	    r31, 1			    ; flag = 1
                 
                 MLP_LFOX:
0009ff 93e0 00b0             sts	    LFOPHASE, r30
000a01 5850      		    subi	r21, 128		    ; r21,r20:r19 = LFO tri wave
000a02 9330 00b1 		    sts	    LFO_FRAC_L, r19		;\
000a04 9340 00b2 		    sts	    LFO_FRAC_H, r20		; > store LFO value
000a06 9350 00b3     		sts	    LFO_INTEGR, r21		;/
                 
                 ;switch norm/rand:
                 
                 ;determine Amin i Amax:
000a08 e000      		    ldi	    r16, 0			    ;\
000a09 e010      		    ldi	    r17, 0			    ; > Amin when not LFO==tri
000a0a e020          		ldi	    r18, 0			    ;/  and not LFO==rand
                 		    
                 			; LFO random 
000a0b 91e0 0078 			lds	    r30, PATCH_SWITCH1
000a0d ffe4      			sbrs 	r30, SW_LFO_RANDOM	; LFO random if switch is set
                 
000a0e c009          		RJMP	MLP_LFOAWR
000a0f 23ff      		    tst	    r31
000a10 f0b1          		breq	MLP_LFOAX
000a11 9100 00bc 		    lds	    r16, SHIFTREG_0		;\
000a13 9110 00bd 		    lds	    r17, SHIFTREG_1		; \ Amin = pseudo-random number
000a15 9120 00be 		    lds	    r18, SHIFTREG_2		; /	0,000..127,999
000a17 772f      		    andi	r18, 0x7F		    ;/
                 
                 MLP_LFOAWR:
000a18 9300 00bf             sts	    LFOBOTTOM_0, r16	;\
000a1a 9310 00c0 		    sts	    LFOBOTTOM_1, r17	; > store Amin
000a1c 9320 00c1 		    sts	    LFOBOTTOM_2, r18	;/
000a1e 9500      		    com	    r16			        ;\
000a1f 9510      		    com	    r17			        ; > Amax = 255,999 - Amin
000a20 9520      		    com	    r18			        ;/	128,000..255,999
000a21 9300 00c2 		    sts	    LFOTOP_0, r16		;\
000a23 9310 00c3 		    sts	    LFOTOP_1, r17		; > store Amax
000a25 9320 00c4 		    sts	    LFOTOP_2, r18		;/
                 
                 
                 MLP_LFOAX:
                 ; Default to normal lfo behaviour (comment out to disable LFO random)
000a27 9100 0078 		    lds	    r16, PATCH_SWITCH1
000a29 ff04      		    sbrs 	r16, SW_LFO_RANDOM
000a2a c005      		    rjmp	MLP_LFONORM
000a2b 23ff      		    tst	    r31			        ; flag == 1 ?
000a2c f029      		    breq	MLP_LFONWR		    ; jump when not
000a2d 9150 00be 		    lds	    r21, SHIFTREG_2
000a2f c000      		    rjmp	MLP_LFOWR
                 
                 
                 MLP_LFONORM:
                 
                 ;switch tri/squ:
                 /*
                 		    lds	    r16, PATCH_SWITCH1	;\ Z=0: triangle
                 			sbrs 	r16, SW_LFO_WAVE	;/ Z=1: square
                     		rjmp	MLP_LFOWR
                 		    lsl	    r21			        ; Cy = (LFO < 0)
                 		    ldi	    r21, 127		    ;\
                 		    adc	    r21, ZERO		    ;/ r21 = -128 or +127
                 */
                 
                 MLP_LFOWR:
000a30 9350 00b4             sts	    LFOVALUE, r21
                 
                 ; Modulation wheel: Use highest value (Front panel or MIDI)
                 MLP_LFONWR:
                 
000a32 9100 016a 		    lds	    r16, PANEL_LFOLEVEL
000a34 9110 013b 		    lds	    r17, MIDIMODWHEEL
000a36 1701      		    cp	    r16, r17
000a37 f418          		brsh	MLP_LFOLWR
000a38 2f01      		    mov	    r16, r17		    ; MOD.WHEEL is greater
                 
000a39 9100 013b 			lds	    r16, MIDIMODWHEEL
                 
                 
                 MLP_LFOLWR:
000a3b 9300 0069             sts	    LFOLEVEL, r16
                 
                 MLP_LFOMWX:
                 
                             ;----
                             ;LFO2 (Used to sweep PWM waveform)
                             ;----
                 
                 ;calculate dA:	
                 			; Load fixed PWM sweep rate
000a3d eb04      			ldi		r16, 180
                 
000a3e da33      		    rcall	ADCTORATE           ; r19:r18:r17:r16 = rate of rise/fall
000a3f 9160 00a4 		    lds	    r22, DELTAT_L		;\
000a41 9170 00a5     		lds	    r23, DELTAT_H		;/ r23:r22 = dT
000a43 d9cb      		    rcall	MUL32X16		    ; r18:r17:r16 = dA
000a44 9130 00b6 		    lds	    r19, LFO2_FRAC_L
000a46 9140 00b7 		    lds	    r20, LFO2_FRAC_H
000a48 9150 00b8     		lds	    r21, LFO2_INTEGR
000a4a 5850      		    subi    r21, 128
000a4b e0f0      		    ldi	    r31, 0			    ; flag = 0
000a4c 91e0 00b5 		    lds	    r30, LFO2PHASE
000a4e 23ee      		    tst	    r30
000a4f f4a1      		    brne	MLP_LFO2FALL
                 
                 ;rising phase:
                 
                 MLP_LFO2RISE:
000a50 9160 00c8             lds	    r22, LFO2TOP_0		;\
000a52 9170 00c9 		    lds	    r23, LFO2TOP_1		; > r24:r23:r22 = Amax
000a54 9180 00ca 		    lds	    r24, LFO2TOP_2		;/
000a56 0f30      		    add	    r19, r16		    ;\
000a57 1f41          		adc	    r20, r17		    ; > A += dA
000a58 1f52      		    adc	    r21, r18		    ;/
000a59 f020      		    brcs	MLP_LFO2TOP
000a5a 1736      		    cp	    r19, r22		    ;\
000a5b 0747      		    cpc	    r20, r23		    ; > A - Amax
000a5c 0758      		    cpc	    r21, r24		    ;/
000a5d f0c8      		    brlo	MLP_LFO2X		    ; skip when A < Amax
                 
                 ;A reached top limit:
                 
                 MLP_LFO2TOP:
000a5e 2f36                  mov	    r19, r22		    ;\
000a5f 2f47      		    mov	    r20, r23		    ; > A = Amax
000a60 2f58      		    mov	    r21, r24		   	;/
000a61 e0e1      		    ldi	    r30, 1			    ; begin of falling
000a62 e0f1      		    ldi	    r31, 1			    ; flag = 1
000a63 c013      		    rjmp	MLP_LFO2X
                 
                 ;falling phase:
                 
                 MLP_LFO2FALL:
000a64 9160 00c5             lds	    r22, LFO2BOTTOM_0	;\
000a66 9170 00c6 		    lds	    r23, LFO2BOTTOM_1	; > r24:r23:r22 = Amin
000a68 9180 00c7 		    lds	    r24, LFO2BOTTOM_2	;/
000a6a 1b30          		sub	    r19, r16		    ;\
000a6b 0b41      		    sbc	    r20, r17		    ; > A -= dA
000a6c 0b52      		    sbc	    r21, r18		    ;/
000a6d f020      		    brcs	MLP_LFO2BOTTOM
000a6e 1763      		    cp	    r22, r19		    ;\
000a6f 0774      		    cpc	    r23, r20		    ; > Amin - A
000a70 0785      		    cpc 	r24, r21		    ;/
000a71 f028      		    brlo	MLP_LFO2X		    ; skip when A > Amin
                 
                 ;A reached bottom limit:
                 
                 MLP_LFO2BOTTOM:
000a72 2f36                  mov	    r19, r22		    ;\
000a73 2f47      		    mov	    r20, r23		    ; > A = Amin
000a74 2f58      		    mov	    r21, r24		    ;/
000a75 e0e0      		    ldi	    r30, 0			    ; begin of rising
000a76 e0f1      		    ldi	    r31, 1			    ; flag = 1
                 
                 MLP_LFO2X:
000a77 93e0 00b5             sts	    LFO2PHASE, r30
000a79 5850      		    subi	r21, 128		    ; r21,r20:r19 = LFO2 tri wave
000a7a 9330 00b6 		    sts	    LFO2_FRAC_L, r19	;\
000a7c 9340 00b7 		    sts	    LFO2_FRAC_H, r20	; > store LFO2 value
000a7e 9350 00b8     		sts	    LFO2_INTEGR, r21	;/
                 
000a80 5850      			subi	r21, $80			; remove sign
000a81 9350 00d7 
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;			Envelope Generation  
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;
                 ;			Envelope is routed to amplitude and filter cutoff
                 
                 .INCLUDE "envelope.inc"
                 
                 ; Meeblip anode		Version 1.10
                 ;
                 ;
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;			Envelope Generation  
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;
                 ;			Envelope is routed to amplitude and filter cutoff
                 
                 ;check envelope phase:
000a83 9110 00a6 		    lds	    r17, ENVPHASE
000a85 9100 0170 		    lds	    r16, KNOB_AMP_ATTACK
                 
000a87 3011      MLP_PHASE:  cpi	    r17, 1
000a88 f069      		    breq    MLP_ENVAR		    ; when "attack"
000a89 9100 007e 			lds		r16, DECAYTIME
000a8b 3012      			cpi		r17, 2
000a8c f049      			breq	MLP_ENVAR			; when "decay"
000a8d 9100 0080 		    lds	    r16, RELEASETIME
000a8f 3014      		    cpi	    r17, 4
000a90 f029      		    breq	MLP_ENVAR		    ; when "release"
000a91 9160 007f 			lds		r22, SUSTAINLEVEL
000a93 3013      			cpi		r17, 3			; when sustain
000a94 f139      			breq	MLP_ESUSTAIN
000a95 c03a      			rjmp	MLP_EEXIT		    ; when "stop" or "sustain"
                 
                 ;calculate dL:
                 
                 MLP_ENVAR:
000a96 d9db                  rcall	ADCTORATE           ; r19:r18:r17:r16 = rate of rise/fall
000a97 9160 00a4 		    lds	    r22, DELTAT_L		;\
000a99 9170 00a5 		    lds	    r23, DELTAT_H		;/ r23:r22 = dT
000a9b d973      		    rcall	MUL32X16		    ; r18:r17:r16 = dL
                 
                 ;add/subtract dL to/from L:
000a9c 9130 00a7 		    lds	    r19, ENV_FRAC_L		;\
000a9e 9140 00a8 		    lds	    r20, ENV_FRAC_H		; > r21:r20:r19 = L
000aa0 9150 00a9     		lds	    r21, ENV_INTEGR		;/
000aa2 9160 00a6 		    lds	    r22, ENVPHASE
000aa4 3064      		    cpi	    r22, 4
000aa5 f0d1      		    breq    MLP_ERELEASE
                 
                 MLP_EATTACK:
000aa6 3062      			cpi	    r22, 2				
000aa7 f049      		    breq    MLP_EDECAY			
000aa8 0f30      		    add	    r19, r16		    ;\
000aa9 1f41      		    adc	    r20, r17		    ; > r21:r20:r19 = L + dL
000aaa 1f52      		    adc	    r21, r18		    ;/
000aab f4f0      		    brcc	MLP_ESTORE
                 
                 ;L reached top limit:
000aac ef3f      		    ldi	    r19, 255		    ;\
000aad ef4f      		    ldi	    r20, 255		    ; > L = Lmax
000aae ef5f      		    ldi	    r21, 255		    ;/
000aaf e002      		    ldi	    r16, 2			    ; now decay
000ab0 c017      		    rjmp	MLP_ESTOREP
                 
                 MLP_EDECAY:
000ab1 1b30                  sub	    r19, r16		    ;\
000ab2 0b41      		    sbc	    r20, r17		    ; > r21:r20:r19 = L - dL
000ab3 0b52      		    sbc	    r21, r18		    ;/		
000ab4 f078      			brcs	MLP_BOTTOM 			; Exit if we went past bottom level
000ab5 9160 007f 			lds 	r22, SUSTAINLEVEL
000ab7 1765      			cp		r22, r21				
000ab8 f088      			brlo 	MLP_ESTORE			; Keep going if we haven't hit sustain level
000ab9 e003      			ldi		r16, 3			; now sustain
000aba 9300 00a6 			sts		ENVPHASE, r16		; store phase
                 MLP_ESUSTAIN:
000abc 2733      			clr		r19			; correct sustain level after decay is done
000abd 2744      			clr		r20
000abe 2f56      			mov		r21, r22
000abf c00a      			rjmp	MLP_ESTORE
                 			
                 MLP_ERELEASE:
000ac0 1b30                  sub	    r19, r16		    ;\
000ac1 0b41      		    sbc	    r20, r17		    ; > r21:r20:r19 = L - dL
000ac2 0b52      		    sbc	    r21, r18		    ;/
000ac3 f430      		    brcc	MLP_ESTORE
                 
                 ;L reached bottom limit:
                 MLP_BOTTOM:
000ac4 e030      		    ldi	    r19, 0			    ;\
000ac5 e040      		    ldi	    r20, 0			    ; > L = 0
000ac6 e050      		    ldi	    r21, 0			    ;/
000ac7 e000      		    ldi	    r16, 0			    ; stop
                 
                 MLP_ESTOREP:
000ac8 9300 00a6             sts	ENVPHASE, r16		    ; store phase
                 
                 MLP_ESTORE:
000aca 9330 00a7             sts	    ENV_FRAC_L, r19		;\
000acc 9340 00a8 		    sts	    ENV_FRAC_H, r20		; > store L
000ace 9350 00a9 		    sts	    ENV_INTEGR, r21		;/
                 
                 
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;			Note Handler  
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;            
                 ;			Processes note gating, portamento, note pitch
                 
                 .INCLUDE "note_handler.inc"
                 
                 ; Meeblip anode		Version 1.00
                 ;
                 ;
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;			Note Handler  
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;            
                 ;			Processes note gating, portamento, note pitch
                 			
                 			;-----
                             ;GATE:
                             ;-----
000ad0 9100 009e 		    lds	    r16, GATE
000ad2 2300      		    tst	    r16			        ; check GATE
000ad3 f439      		    brne	MLP_KEYON
                 
                 ;no key is pressed:
                 
                 MLP_KEYOFF:
000ad4 e004                  ldi	    r16,4			    ;\
                 
                 			; don't restart envelope release if it's already stopped.
000ad5 9110 00a6 			lds		r17, ENVPHASE
000ad7 2311      			tst		r17
000ad8 f119      			breq	MLP_NOTEON			; Don't put envelope 1 in release mode if it is already stopped	
                 
000ad9 9300 00a6 		    sts	    ENVPHASE, r16		; "release"
                 
                 ;key is pressed:
                 
                 MLP_KEYON:
000adb 9100 009f             lds	    r16, GATEEDGE
000add 2300      		    tst	    r16		            ; Z=0 when key has just been pressed
000ade f0e9      		    breq	MLP_NOTEON
                 
                 ;key has just been pressed:
000adf e000      		    ldi	    r16, 0			    ;\
000ae0 9300 009f 		    sts	    GATEEDGE, r16		;/ GATEEDGE = 0			
000ae2 9100 0088 		    lds	    r16, PORTACNT		;\
000ae4 2300      		    tst	    r16			        ; \
000ae5 f019      		    breq	MLP_KEYON1		    ;  > if ( PORTACNT != 0 )
000ae6 950a      		    dec	    r16			        ; /    PORTACNT--
000ae7 9300 0088 		    sts	    PORTACNT, r16		;/
                 
                 MLP_KEYON1:
                 
                 ;envelope starts:	   
000ae9 e001      			ldi		r16, 1
000aea 9300 00a6 		    sts	    ENVPHASE, r16		; attack
                 
                 			;ldi	    R16, 0
                 		    ;sts	    ENV_FRAC_L, R16		;\
                 		    ;sts	    ENV_FRAC_H, R16		; > ENV = 0
                 		    ;sts	    ENV_INTEGR, R16		;/
                  
                 
                 ; LFO starts when note triggered if SW_LFO_RETRIGGER = 0 (defaults to ON)
                 
                 
000aec 9100 0078 		    lds	    r16, PATCH_SWITCH1
000aee fd05      		    sbrc 	r16, SW_LFO_RETRIGGER	
000aef c00c      		    rjmp	MLP_NOTEON
                 
000af0 ef0f      		    ldi	    r16, 255		    ;\
000af1 ef1f      		    ldi	    r17, 255		    ; > A = Amax
000af2 e72f      		    ldi	    r18, 127		    ;/
000af3 9300 00b1 		    sts	    LFO_FRAC_L, r16		;\
000af5 9310 00b2 		    sts	    LFO_FRAC_H, r17		; > store A
000af7 9320 00b3 		    sts	    LFO_INTEGR, r18		;/
000af9 e001      		    ldi	    r16, 1			    ;\
000afa 9300 00b0 		    sts	    LFOPHASE, r16		;/ begin falling
                 
                 
                 MLP_NOTEON:
                             ;-------------
                             ;DCO A, DCO B:
                             ;-------------
000afc e090      		    ldi	    r25, 0			    ;\
000afd e060      		    ldi	    r22, 0			    ; > r23,r22:r25 = note# 0..127
000afe 9170 0065 		    lds	    r23, LFONOTE		;/
000b00 3f7f      		    cpi	    r23, 255
000b01 f411      			brne	MLP_NLIM2
000b02 c0b0      		    rjmp	MLP_VCOX
                 
                 ;note# limited to 36..96:
                 
                 MLP_NLIM1:
000b03 507c                  subi	r23, 12
                 
                 MLP_NLIM2:
000b04 3671                  cpi	    r23, 97
000b05 f7e8      		    brsh	MLP_NLIM1
000b06 c001      		    rjmp	MLP_NLIM4
                 
                 MLP_NLIM3:
000b07 5f74                  subi	r23, 244
                 
                 MLP_NLIM4:
000b08 3274                  cpi	    r23, 36
000b09 f3e8      		    brlo	MLP_NLIM3
                 
                 ;transpose 1 octave down:
000b0a 507c      		    subi	r23, 12			    ; n -= 12		Note range limited to 24..84
                 
                 ;portamento:
000b0b 9190 0085 		    lds	    r25, NOTE_L		    ;\
000b0d 91a0 0086 		    lds	    r26, NOTE_H		    ; > r27,r26:r25 = nCurr
000b0f 91b0 0087 		    lds	    r27, NOTE_INTG		;/
000b11 9100 0088 		    lds	    r16, PORTACNT		;\
000b13 2300          		tst	    r16			        ; > jump when it's the first note
000b14 f581      		    brne	MLP_PORTAWR	        ;/  (PORTACNT != 0)
000b15 9100 0171 		    lds	    r16, PORTAMENTO						
000b17 d95a          		rcall	ADCTORATE
000b18 936f      		    push    r22
000b19 937f      		    push	r23
000b1a 2f62      		    mov	    r22, r18		    ;\ r23:r22 = portamento rate
000b1b 2f73      		    mov	    r23, r19		    ;/ 65535..27
000b1c e000      		    ldi	    r16, 0
000b1d e010      		    ldi	    r17, 0
000b1e 9120 00a4 		    lds	    r18, DELTAT_L
000b20 9130 00a5 		    lds	    r19, DELTAT_H
000b22 e043      		    ldi	    r20, 3
000b23 d8d5      		    rcall	SHR32
000b24 d8ea      		    rcall	MUL32X16		    ; r18,r17:r16 = nDelta
000b25 917f      		    pop	    r23
000b26 916f      		    pop	    r22
000b27 2f30      		    mov	    r19, r16		    ;\
000b28 2f41      		    mov	    r20, r17		    ; > r21,r20:r19 = nDelta
000b29 2f52      		    mov	    r21, r18		    ;/
000b2a 9190 0085 		    lds	    r25, NOTE_L		    ;\
000b2c 91a0 0086 		    lds	    r26, NOTE_H		    ; > r27,r26:r25 = nCurr
000b2e 91b0 0087 		    lds	    r27, NOTE_INTG		;/
000b30 176a      		    cp	    r22, r26		    ;\ nEnd - nCurr
000b31 077b      		    cpc	    r23, r27		    ;/ Cy = (nEnd < nCurr)
000b32 f438      		    brsh	MLP_PORTAADD
                 
                 MLP_PORTAMIN:
000b33 1b93                  sub	    r25, r19			;\
000b34 0ba4      		    sbc	    r26, r20			; > nCurr -= nDelta
000b35 0bb5      		    sbc	    r27, r21			;/
000b36 176a      		    cp	    r22, r26			;\ nEnd - nCurr;
000b37 077b      		    cpc	    r23, r27		    ;/ Cy = (nEnd < nCurr)
000b38 f050      		    brlo	MLP_PORTA1
000b39 c006      		    rjmp	MLP_PORTAEND
                 
                 MLP_PORTAADD:
000b3a 0f93                  add	    r25, r19		    ;\
000b3b 1fa4      		    adc	    r26, r20		    ; > nCurr += nDelta
000b3c 1fb5      		    adc	    r27, r21		    ;/
000b3d 176a      		    cp	    r22, r26		    ;\ nEnd - nCurr;
000b3e 077b      		    cpc	    r23, r27		    ;/ Cy = (nEnd < nCurr)
000b3f f418      		    brsh	MLP_PORTA1
                 
                 MLP_PORTAEND:
000b40 e090                  ldi	    r25, 0			    ;\
000b41 2fa6      		    mov	    r26, r22			; > nCurr = nEnd
000b42 2fb7          		mov	    r27, r23			;/
                 
                 MLP_PORTA1:
000b43 2f6a                  mov	    r22, r26
000b44 2f7b      		    mov	    r23, r27
                 
                 MLP_PORTAWR:
000b45 9390 0085         	sts	NOTE_L, r25
000b47 9360 0086 		    sts	    NOTE_H, r22
000b49 9370 0087 		    sts	    NOTE_INTG, r23
                 
                 ;pitch bender (-12..+12):
000b4b 9100 0067 		    lds	    r16, MIDIPBEND_L	;\ r17,r16 = P.BEND
000b4d 9110 0068     		lds	    r17, MIDIPBEND_H	;/	-128,000..+127,996
000b4f e025      		    ldi	    r18, 5			    ;\ r17,r16 = P.BEND/32
000b50 d89f      		    rcall	ASr16			    ;/	-4,000..+3,999
000b51 2f20      		    mov	    r18, r16		    ;\ r19,r18 = P.BEND/32
000b52 2f31      		    mov	    r19, r17		    ;/	-4,000..+3,999
000b53 0f02      		    add	    r16, r18		    ;\ r17,r16 = 2/32*P.BEND
000b54 1f13      		    adc	    r17, r19		    ;/	-8,000..+7,999
000b55 0f02      		    add	    r16, r18		    ;\ r17,r16 = 3/32*P.BEND
000b56 1f13      		    adc	    r17, r19		    ;/	-12,000..+11,999
000b57 0f60      		    add	    r22, r16		    ;\
000b58 1f71      		    adc	    r23, r17		    ;/ add P.BEND
                 
                 MLP_PBX:
                 ;for "DCF KBD TRACK":
000b59 9370 008b 		    sts	    PITCH, r23		    ; n = 0..108
                 
                 
                 ;LFO modulation:
000b5b 9100 0078 		    lds	    r16, PATCH_SWITCH1	; Check LFO destination bit. 
000b5d fd03      		    sbrc	r16, SW_LFO_DEST	; DCF is 0, DCO is 1
000b5e c01f      		    rjmp		MLP_VCOLFOX		    ; exit when LFO=DCF
000b5f 9100 00b4 		    lds	    r16, LFOVALUE		; r16 = LFO	    -128..+127
000b61 9110 0069     		lds	    r17, LFOLEVEL		; r17 = LFO level	0..255
                 
000b63 9120 016b 			lds		r18, LFOFREQ		; If LFO rate is = 0, turn LFO off
000b65 3020      			cpi		r18, 0
000b66 f009      			breq	LFO_OFF
000b67 c001      			rjmp	LFO_NONLINEAR
                 LFO_OFF:
000b68 e010      			ldi		r17, 0				; Set LFO level to zero if switch is off
                 
                 LFO_NONLINEAR:
                 ;nonlinear potentiometer function:
000b69 2f21      		    mov	    r18, r17		    ; r18 = LL
000b6a 9516      		    lsr	    r17			        ; r17 = LL/2
000b6b 3820      		    cpi	    r18, 128
000b6c f010      		    brlo	MLP_OM1			    ; skip if LL = 0..127
000b6d 5810      		    subi	r17, 128		    ; r17 = 0,5*LL-128    -64..-1
000b6e 0f12      		    add	    r17, r18		    ; r17 = 1,5*LL-128    +64..254
                 
                 MLP_OM1:
000b6f 0301      			mulsu	r16, r17		; LFOVALUE*LFOLEVEL
000b70 0180      			movw	r16, r0
000b71 e024      		    ldi	    r18, 4			    ;\
000b72 d87d      		    rcall	ASr16			    ;/ r17,r16 = LFO*mod / 16
000b73 0f60      		    add	    r22, r16		    ;\
000b74 1f71      		    adc	    r23, r17		    ;/ add LFO to note #
                 
                 ;limiting to 0..108
000b75 2377      		    tst	    r23
000b76 f41a      		    brpl	MLP_VCOLFO1
000b77 e060      		    ldi	    r22, 0
000b78 e070      		    ldi	    r23, 0
000b79 c004      		    rjmp	MLP_VCOLFOX
                 
                 MLP_VCOLFO1:
000b7a 367d                  cpi	    r23, 109
000b7b f010      		    brlo	MLP_VCOLFOX
000b7c e060      		    ldi	    r22, 0
000b7d e67c      		    ldi	    r23, 108
                 
                 MLP_VCOLFOX:
000b7e 936f                  push	r22			        ;\ note# = 0..108
000b7f 937f      		    push	r23			        ;/ store for phase delta B
                 
                 ; determine the wavetable for osc A: note = 0..108
                 
                 ; Track which wavetable to use:
000b80 2f97      			mov		r25,	r23		; Store a copy of the note number in r25
000b81 509d      			subi	r25,	13			; 13..108
000b82 f408      			brcc	WTA_NOUFL
000b83 2799      			clr		r25
                 WTA_NOUFL:
000b84 9596      			lsr		r25
000b85 9596      			lsr		r25			; (108-12-1)/8 = 11
000b86 9596      			lsr		r25			; 0..11
000b87 9390 00d4 			sts		WAVETABLE_A, r25	; Save wavetable 0..11 for lookup when generating oscillator
                 
                 ;phase delta A:
                 ;octave A:
000b89 d8d4      		    rcall	NOTERECALC		    ; r23,r22 = m12 (0,0..11,996),
                 						                ; r20 = n12 (0..11)
000b8a d8b0      		    rcall	LOAD_DELTA		    ; r19:r18:r17:r16 = delta
000b8b d878      		    rcall	SHL32			    ; r19:r18:r17:r16 = delta*(2^exp)
                 
                 			  ; store delta
000b8c 9310 00ce   			sts DELTAA_0,r17
000b8e 9320 00cf   			sts DELTAA_1,r18
000b90 9330 00d0   			sts DELTAA_2,r19
                 
                 ;phase delta B:
000b92 917f      		    pop	    r23			        ;\
000b93 916f      		    pop	    r22			        ;/ n
                 
                 ;detune B:
000b94 9100 007b 		    lds	    r16, DETUNEB_FRAC	;\ r17,r16 = detuneB
000b96 9110 007c 		    lds	    r17, DETUNEB_INTG	;/ -128,000..+127,996
000b98 e024      		    ldi	    r18, 4			    ;\ r17,r16 = detuneB / 16
000b99 d856          		rcall	ASR16			    ;/ -8,0000..+7,9998
000b9a 0f60      		    add	    r22, r16		    ;\
000b9b 1f71      		    adc	    r23, r17		    ;/
                 
                 ;octave B:
000b9c 9100 0078             lds	    r16, PATCH_SWITCH1	; octave B: 0=down, 1=up
                 		    
                 			; Shift down
000b9e ef94      			ldi		r25, 244			; store value in temp register
000b9f ff01      			sbrs	r16, SW_OSCB_OCT
000ba0 0f79      		    add		r23, r25			; octave shift down
                 
                 			; Shift osc b one octave down
                 			;sbrc	r16, SW_OSCB_OCT
                 			;subi	r23, 244		    ; n += 12
                 
                 ; determine the wavetable for osc B; r23: note = 0..108,
                 ; Track which wavetable to use:
000ba1 2f97      			mov		r25, r23			; Store a copy of the note number in r25
000ba2 509d      			subi	r25, 13				; 13..108
000ba3 f408      			brcc	WTB_NOUFL
000ba4 2799      			clr		r25
                 WTB_NOUFL:
000ba5 9596      			lsr		r25
000ba6 9596      			lsr		r25					; (108-12-1)/8 = 11
000ba7 9596      			lsr		r25					; 0..11
000ba8 9390 00d5 			sts		WAVETABLE_B, r25	; Save wavetable 0..15 for lookup when generating oscillator
                 			
000baa d8b3      		    rcall	NOTERECALC		    ; r23,r22 = m12 (0,0..11,996),
                 						                ; r20 = n12 (0..11)
000bab d88f      		    rcall	LOAD_DELTA		    ; r19:r18:r17:r16 = delta
000bac d857      		    rcall	SHL32			    ; r19:r18:r17:r16 = delta*(2^exp)
                 
000bad 9310 00d1 			sts DELTAB_0,r17
000baf 9320 00d2   			sts DELTAB_1,r18
000bb1 9330 00d3   			sts DELTAB_2,r19
                 
                 
                 
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;			Filter Modulation  
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;            
                 ;			Processes filter LFO modulation and enveloping
                 
                 .INCLUDE "filter_modulation.inc"
                 
                 ; Meeblip anode		Version 1.10
                 ;
                 ;
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;			Filter Modulation  
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;            
                 ;			Processes filter LFO modulation and enveloping
                 
                             ;----
                             ;Filter
                             ;----
                 
                 	        ;LFO mod:
000bb3 e0e0      		    ldi	    r30, 0			    ;\
000bb4 e0f0      		    ldi	    r31, 0			    ;/ sum = 0
                 
000bb5 9100 0078 		    lds	    r16, PATCH_SWITCH1	; Check LFO destination bit. 
000bb7 ff03      		    sbrs	r16, SW_LFO_DEST	; DCF is 0, DCO is 1
000bb8 940c 0bcc 		    jmp		MLP_DCF0		    ; exit when LFO=DCO
000bba 9100 00b4 		    lds	    r16, LFOVALUE		; r16 = LFO	    -128..+127
000bbc 9110 0069 		    lds	    r17, LFOLEVEL		; r17 = DCF LFO MOD	0..255
000bbe 3b1a      			cpi		r17, 186
000bbf f008      			brlo	lfo_freq
000bc0 eb1a      			ldi		r17, 186			; Limit LFOLEVEL to 186 if destination is VCF
                 LFO_FREQ:
000bc1 9120 016b 			lds		r18, LFOFREQ		; If LFO rate is 0, turn LFO off
000bc3 3020      			cpi		r18, 0
000bc4 f009      			breq	LFO_OFF_DCF
000bc5 c001      			rjmp	MLP_DCF
                 
                 LFO_OFF_DCF:
000bc6 e010      			ldi		r17, 0				; Set LFO level to zero if switch is off
                 
                 MLP_DCF:
000bc7 0301      			mulsu	r16, r17
000bc8 2de1      			mov		r30, r1
000bc9 e0f0      			ldi		r31, 0
000bca 1c11      			rol		r1					; r1.7 --> Cy (sign)
000bcb 0bff      			sbc		r31, r31			; sign extension to r31
                 
                 MLP_DCF0:
                 
                 ;ENV mod:
000bcc 9100 00a9             lds	    r16, ENV_INTEGR	; Get the integer part of the envelope 
000bce 9110 00ae 			lds		r17, VELOCITY_ENVMOD ; Use MIDI velocity * envmod 			
000bd0 9f01      			mul		r16, r17
000bd1 0180      			movw 	r16,r0				; r17,r16 = AMPLITUDE ENVELOPE * ENVMOD		    
000bd2 1f00          		rol	    r16			        ; Cy = r16.7 (for rounding)
000bd3 1fe1      		    adc	    r30, r17
000bd4 1df8      		    adc	    r31, ZERO
                 
                 ;KBD TRACK:
                 /*
                 		    lds	    r16, PITCH		    ; r16 = n (12/octave)	0..96
                 		    lsl	    r16			        ; r16 = 2*n (24/octave)	0..192
                 		    subi	r16, 96	        	; r16 = 2*(n-48) (24/octave)   -96..+96
                 		    ldi	    r17, 171
                 			
                 			mulsu	r16, r17
                 			movw	r16, r0
                 		    ldi	    r18, 0			    ;\
                 		    sbrc	r17, 7			    ; > r18 = sign extension
                 		    ldi	    r18, 255		    ;/  of r17
                 		    add	    r30, r17
                 		    adc	    r31, r18
                 */
                 
                 MLP_DCF3:
                 ;CUTOFF:
000bd5 9100 016e 		    lds	    r16, CUTOFF
000bd7 2711      		    clr	    r17
000bd8 0f0e      		    add	    r16, r30
000bd9 1f1f          		adc	    r17, r31
000bda 2311      		    tst	    r17
000bdb f412      		    brpl	MLP_DCF1
000bdc e000      		    ldi	    r16, 0
000bdd c002      		    rjmp	MLP_DCF2
                 
                 MLP_DCF1:
000bde f009                  breq	MLP_DCF2
000bdf ef0f      		    ldi	    r16, 255
                 
                 MLP_DCF2:
                 				
                 			; disable old/new value check. Just update.
                 			;lds		r17, OLD_CUTOFF
                 			;cp		r16, r17
                 			;breq	MLP_VCAENV
                 
                 mlp_cutoff:
                 			;sts		OLD_CUTOFF, r16
                 
000be0 9506      			lsr	    r16			        ; 0..127
000be1 2f10      			mov		r17, r16			; Copy unscaled cutoff to r17
000be2 e4e5      			ldi		r30, low( TAB_VCF)	;\
000be3 e0f0      			ldi		r31, high( TAB_VCF)	;/ Z = &Tab
000be4 d880      			rcall	TAB_BYTE		; r16 = 1.. 255
000be5 9300 0089 			sts		LPF_I, r16		; Store Lowpass F value (from exponential table)
                 
                 mlp_output_cutoff:
                 
                 			; Scale analog filter so it's slightly open at lowest knob level (avoids low end filter emphasis)
000be7 2f01      			mov		r16, r17		; Copy unscaled cutoff back to r16
000be8 e8e5      			ldi		r30, low( TAB_VCF2)	;\
000be9 e0f0      			ldi		r31, high( TAB_VCF2)	;/ Z = &Tab
000bea d87a      			rcall	TAB_BYTE		; r16 = 1.. 255
                 
000beb bd03      
                 
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;			DCA Output  
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;            
                 ;			Look up DCA value and output the DCA level amount to the second channel of the DAC chip. 
                 
                 .INCLUDE "dca_output.inc"	
                 
                 ; Meeblip anode		Version 1.10
                 ;
                 ;
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;			DCA Output  
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;            
                 ;			Look up DCA value and output the DCA level amount to the second channel of the DAC chip. 
                 
                 
                             ;---------------
                             ;sound level:
                             ;---------------
                 
                 MLP_VCAENV:
000bec 9100 00a9             lds	    r16, ENV_INTEGR		; 
000bee eee5      			ldi		r30, low( TAB_VCA)	;\
000bef e0f0      			ldi		r31, high( TAB_VCA)	;/ Z = &Tab
000bf0 d874      			rcall	TAB_BYTE			; r0 = 2..255 (load LEVEL into r16)
                 MLP_VCAOK:
000bf1 9300 008a 			sts		LEVEL,r16
                 
                 			; Non-zero starting level for DAC B to minimize envelope pop
                 
000bf3 e6e0      			ldi		r30, 96		; Add 96 to level
000bf4 0f0e      			add		r16, r30	
000bf5 f408      			brcc	MLP_DCAOUT  ; if value is less than 255, output it
000bf6 ef0f      			ldi		r16, 255	; if carry bit is set, force level to 255
                 
                 
                 MLP_DCAOUT:
                 
                 			; DCA LEVEL is in r16. Now pack it in two bytes for the DCA. 
                 			; Control bit mask 0001 0001
                 			;ldi		r17, 0b00010001 	; Write data to P0
                 
                 			; Control bit mask xxxx1011
000bf7 e01b      			ldi		r17, 0b00001011 		; outputs signal through DACB 
                 
                 ; Shift MSB data word in r17:r16 left 4 bits, so it's packed 1011 dddd dddd xxxx
                 
                 ; Use DACB for DCA LEVEL amount
000bf8 0f00      			lsl	    r16
000bf9 1f11      		    rol	    r17		; shifted 1 bit left
000bfa 0f00      			lsl	    r16
000bfb 1f11      		    rol	    r17		; shifted 2 bits left
000bfc 0f00      			lsl	    r16
000bfd 1f11      		    rol	    r17		; shifted 3 bits left
000bfe 0f00      			lsl	    r16
000bff 1f11      		    rol	    r17		; shifted 4 bits left
                 
                 			; Pack LEVEL into two bytes for output to the DAC in the sample loop
000c00 9310 00e3 			sts		LEVEL_H, r17
000c02 9300 00e2 
                 		
                 
                 ;-----------------------------------
                 ;pseudo-random shift register:
                 ;-----------------------------------
                 	        ;BIT = SHIFTREG.23 xor SHIFTREG.18
                 	        ;SHIFTREG = (SHIFTREG << 1) + BIT
000c04 9100 00bc 		    lds	    r16, SHIFTREG_0
000c06 9110 00bd 		    lds	    r17, SHIFTREG_1
000c08 9120 00be 		    lds	    r18, SHIFTREG_2
000c0a fb27          		bst	    r18, 7			    ;\
000c0b f930      		    bld	    r19, 0			    ;/ r19.0 = SHIFTREG.23
000c0c fb22      		    bst	    r18, 2			    ;\
000c0d f940      		    bld	    r20, 0			    ;/ r20.0 = SHIFTREG.18
000c0e 2734      		    eor	    r19, r20			    ;r19.0 = BIT
000c0f 9536      		    lsr	    r19			        ; Cy = BIT
000c10 1f00      		    rol	    r16			        ;\
000c11 1f11      		    rol	    r17			        ; > r18:r17:r16 =
000c12 1f22      		    rol	    r18			        ;/  = (SHIFTREG << 1) + BIT
000c13 9300 00bc 		    sts	    SHIFTREG_0, r16
000c15 9310 00bd 		    sts	    SHIFTREG_1, r17
000c17 9320 00be 		    sts	    SHIFTREG_2, r18
                 
                 ;------------------------
                 ;....ML try to refresh display:
                 ;------------------------
                 ;rcall MYLCD_CLEAR
000c19 d9cb      rcall MYLCD_UPDATE
                 
                 
                 ;------------------------
                 ;back to the main loop:
                 ;------------------------
000c1a cc6d      		    rjmp	MAINLOOP
                 
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;
                 ;			Wavetable data  
                 ;
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;            
                 ;			Bandlimited sawtooth wavetables (each table is 256 bytes long, unsigned integer)
                 
                 .INCLUDE "wavetables.inc"
                 
                 ; Meeblip anode		Version 1.00
                 ;
                 ;
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;			Wavetables  
                 ;-------------------------------------------------------------------------------------------------------------------
                 ;            
                 ;			Bandlimited sawtooth wavetables (each table is 256 bytes long, unsigned integer)
                 
                 INV_SAW0:
                 
                 	; base freqency: 25.96 Hz, discretes: 701, rms: 7.95, min: -0.87, max: 0.87
                 
000c1b 1280
000c1c 1511
000c1d 1616
000c1e 1816      	.db	  128,   18,   17,   21,    22,   22,   22,   24
000c1f 1919
000c20 1b1a
000c21 1d1c
000c22 1f1e      	.db	   25,   25,   26,   27,    28,   29,   30,   31
000c23 2020
000c24 2221
000c25 2423
000c26 2625      	.db	   32,   32,   33,   34,    35,   36,   37,   38
000c27 2727
000c28 2928
000c29 2b2a
000c2a 2d2c      	.db	   39,   39,   40,   41,    42,   43,   44,   45
                 
000c2b 2e2d
000c2c 302f
000c2d 3231
000c2e 3433      	.db	   45,   46,   47,   48,    49,   50,   51,   52
000c2f 3534
000c30 3736
000c31 3938
000c32 3a3a      	.db	   52,   53,   54,   55,    56,   57,   58,   58
000c33 3c3b
000c34 3e3d
000c35 403f
000c36 4141      	.db	   59,   60,   61,   62,    63,   64,   65,   65
000c37 4342
000c38 4544
000c39 4746
000c3a 4847      	.db	   66,   67,   68,   69,    70,   71,   71,   72
                 
000c3b 4a49
000c3c 4c4b
000c3d 4d4d
000c3e 4f4e      	.db	   73,   74,   75,   76,    77,   77,   78,   79
000c3f 5150
000c40 5352
000c41 5453
000c42 5655      	.db	   80,   81,   82,   83,    83,   84,   85,   86
000c43 5857
000c44 5959
000c45 5b5a
000c46 5d5c      	.db	   87,   88,   89,   89,    90,   91,   92,   93
000c47 5f5e
000c48 6060
000c49 6261
000c4a 6463      	.db	   94,   95,   96,   96,    97,   98,   99,  100
                 
000c4b 6665
000c4c 6766
000c4d 6968
000c4e 6b6a      	.db	  101,  102,  102,  103,   104,  105,  106,  107
000c4f 6d6c
000c50 6e6d
000c51 706f
000c52 7271      	.db	  108,  109,  109,  110,   111,  112,  113,  114
000c53 7373
000c54 7574
000c55 7776
000c56 7978      	.db	  115,  115,  116,  117,   118,  119,  120,  121
000c57 7a7a
000c58 7c7b
000c59 7e7d
000c5a 807f      	.db	  122,  122,  123,  124,   125,  126,  127,  128
                 
000c5b 8080
000c5c 8281
000c5d 8483
000c5e 8685      	.db	  128,  128,  129,  130,   131,  132,  133,  134
000c5f 8786
000c60 8988
000c61 8b8a
000c62 8d8c      	.db	  134,  135,  136,  137,   138,  139,  140,  141
000c63 8e8d
000c64 908f
000c65 9291
000c66 9393      	.db	  141,  142,  143,  144,   145,  146,  147,  147
000c67 9594
000c68 9796
000c69 9998
000c6a 9a9a      	.db	  148,  149,  150,  151,   152,  153,  154,  154
                 
000c6b 9c9b
000c6c 9e9d
000c6d a09f
000c6e a1a0      	.db	  155,  156,  157,  158,   159,  160,  160,  161
000c6f a3a2
000c70 a5a4
000c71 a7a6
000c72 a8a7      	.db	  162,  163,  164,  165,   166,  167,  167,  168
000c73 aaa9
000c74 acab
000c75 adad
000c76 afae      	.db	  169,  170,  171,  172,   173,  173,  174,  175
000c77 b1b0
000c78 b3b2
000c79 b4b3
000c7a b6b5      	.db	  176,  177,  178,  179,   179,  180,  181,  182
                 
000c7b b8b7
000c7c b9b9
000c7d bbba
000c7e bdbc      	.db	  183,  184,  185,  185,   186,  187,  188,  189
000c7f bfbe
000c80 c0bf
000c81 c2c1
000c82 c4c3      	.db	  190,  191,  191,  192,   193,  194,  195,  196
000c83 c6c5
000c84 c7c6
000c85 c9c8
000c86 cbca      	.db	  197,  198,  198,  199,   200,  201,  202,  203
000c87 cccc
000c88 cecd
000c89 d0cf
000c8a d2d1      	.db	  204,  204,  205,  206,   207,  208,  209,  210
                 
000c8b d3d3
000c8c d5d4
000c8d d7d6
000c8e d9d8      	.db	  211,  211,  212,  213,   214,  215,  216,  217
000c8f dad9
000c90 dcdb
000c91 dedd
000c92 e0df      	.db	  217,  218,  219,  220,   221,  222,  223,  224
000c93 e1e0
000c94 e3e2
000c95 e5e4
000c96 e7e6      	.db	  224,  225,  226,  227,   228,  229,  230,  231
000c97 e8e7
000c98 eaea
000c99 ebea
000c9a eeef      	.db	  231,  232,  234,  234,   234,  235,  239,  238
                 
                 
                 INV_SAW1:
                 	; base freqency: 41.20 Hz, discrets: 442, rms: 7.95, min: -0.88, max: 0.88
                 
000c9b 1180
000c9c 1510
000c9d 1517
000c9e 1916      	.db	  128,   17,   16,   21,    23,   21,   22,   25
000c9f 1919
000ca0 1c1a
000ca1 1d1c
000ca2 1f1e      	.db	   25,   25,   26,   28,    28,   29,   30,   31
000ca3 201f
000ca4 2222
000ca5 2423
000ca6 2625      	.db	   31,   32,   34,   34,    35,   36,   37,   38
000ca7 2726
000ca8 2928
000ca9 2b2a
000caa 2c2c      	.db	   38,   39,   40,   41,    42,   43,   44,   44
                 
000cab 2e2d
000cac 302f
000cad 3231
000cae 3333      	.db	   45,   46,   47,   48,    49,   50,   51,   51
000caf 3534
000cb0 3736
000cb1 3938
000cb2 3a39      	.db	   52,   53,   54,   55,    56,   57,   57,   58
000cb3 3c3b
000cb4 3e3d
000cb5 403f
000cb6 4140      	.db	   59,   60,   61,   62,    63,   64,   64,   65
000cb7 4342
000cb8 4544
000cb9 4646
000cba 4847      	.db	   66,   67,   68,   69,    70,   70,   71,   72
                 
000cbb 4a49
000cbc 4c4b
000cbd 4d4c
000cbe 4f4e      	.db	   73,   74,   75,   76,    76,   77,   78,   79
000cbf 5150
000cc0 5352
000cc1 5453
000cc2 5655      	.db	   80,   81,   82,   83,    83,   84,   85,   86
000cc3 5857
000cc4 5959
000cc5 5b5a
000cc6 5d5c      	.db	   87,   88,   89,   89,    90,   91,   92,   93
000cc7 5f5e
000cc8 6060
000cc9 6261
000cca 6463      	.db	   94,   95,   96,   96,    97,   98,   99,  100
                 
000ccb 6665
000ccc 6766
000ccd 6968
000cce 6b6a      	.db	  101,  102,  102,  103,   104,  105,  106,  107
000ccf 6d6c
000cd0 6e6d
000cd1 706f
000cd2 7271      	.db	  108,  109,  109,  110,   111,  112,  113,  114
000cd3 7373
000cd4 7574
000cd5 7776
000cd6 7978      	.db	  115,  115,  116,  117,   118,  119,  120,  121
000cd7 7a7a
000cd8 7c7b
000cd9 7e7d
000cda 807f      	.db	  122,  122,  123,  124,   125,  126,  127,  128
                 
000cdb 8080
000cdc 8281
000cdd 8483
000cde 8685      	.db	  128,  128,  129,  130,   131,  132,  133,  134
000cdf 8786
000ce0 8988
000ce1 8b8a
000ce2 8d8c      	.db	  134,  135,  136,  137,   138,  139,  140,  141
000ce3 8e8d
000ce4 908f
000ce5 9291
000ce6 9393      	.db	  141,  142,  143,  144,   145,  146,  147,  147
000ce7 9594
000ce8 9796
000ce9 9998
000cea 9a9a      	.db	  148,  149,  150,  151,   152,  153,  154,  154
                 
000ceb 9c9b
000cec 9e9d
000ced a09f
000cee a1a0      	.db	  155,  156,  157,  158,   159,  160,  160,  161
000cef a3a2
000cf0 a5a4
000cf1 a7a6
000cf2 a8a7      	.db	  162,  163,  164,  165,   166,  167,  167,  168
000cf3 aaa9
000cf4 acab
000cf5 adad
000cf6 afae      	.db	  169,  170,  171,  172,   173,  173,  174,  175
000cf7 b1b0
000cf8 b3b2
000cf9 b4b4
000cfa b6b5      	.db	  176,  177,  178,  179,   180,  180,  181,  182
                 
000cfb b8b7
000cfc bab9
000cfd bbba
000cfe bdbc      	.db	  183,  184,  185,  186,   186,  187,  188,  189
000cff bfbe
000d00 c0c0
000d01 c2c1
000d02 c4c3      	.db	  190,  191,  192,  192,   193,  194,  195,  196
000d03 c6c5
000d04 c7c7
000d05 c9c8
000d06 cbca      	.db	  197,  198,  199,  199,   200,  201,  202,  203
000d07 cdcc
000d08 cecd
000d09 d0cf
000d0a d2d1      	.db	  204,  205,  205,  206,   207,  208,  209,  210
                 
000d0b d4d3
000d0c d5d4
000d0d d7d6
000d0e d9d8      	.db	  211,  212,  212,  213,   214,  215,  216,  217
000d0f dada
000d10 dcdb
000d11 dedd
000d12 e0de      	.db	  218,  218,  219,  220,   221,  222,  222,  224
000d13 e1e1
000d14 e3e2
000d15 e4e4
000d16 e7e6      	.db	  225,  225,  226,  227,   228,  228,  230,  231
000d17 e7e7
000d18 ebea
000d19 ebe9
000d1a eff0      	.db	  231,  231,  234,  235,   233,  235,  240,  239
                 
                 
                 INV_SAW2:
                 	; base freqency: 65.41 Hz, discrets: 278, rms: 7.95, min: -0.85, max: 0.85
                 
000d1b 1c80
000d1c 1416
000d1d 1414
000d1e 1615      	.db	  128,   28,   22,   20,    20,   20,   21,   22
000d1f 1a18
000d20 1c1b
000d21 1d1d
000d22 1e1e      	.db	   24,   26,   27,   28,    29,   29,   30,   30
000d23 201f
000d24 2221
000d25 2423
000d26 2625      	.db	   31,   32,   33,   34,    35,   36,   37,   38
000d27 2727
000d28 2928
000d29 2a29
000d2a 2c2b      	.db	   39,   39,   40,   41,    41,   42,   43,   44
                 
000d2b 2e2d
000d2c 302f
000d2d 3231
000d2e 3332      	.db	   45,   46,   47,   48,    49,   50,   50,   51
000d2f 3534
000d30 3736
000d31 3938
000d32 3a3a      	.db	   52,   53,   54,   55,    56,   57,   58,   58
000d33 3c3b
000d34 3e3d
000d35 3f3e
000d36 4140      	.db	   59,   60,   61,   62,    62,   63,   64,   65
000d37 4342
000d38 4544
000d39 4646
000d3a 4847      	.db	   66,   67,   68,   69,    70,   70,   71,   72
                 
000d3b 4a49
000d3c 4c4b
000d3d 4d4d
000d3e 4f4e      	.db	   73,   74,   75,   76,    77,   77,   78,   79
000d3f 5150
000d40 5252
000d41 5453
000d42 5655      	.db	   80,   81,   82,   82,    83,   84,   85,   86
000d43 5857
000d44 5959
000d45 5b5a
000d46 5d5c      	.db	   87,   88,   89,   89,    90,   91,   92,   93
000d47 5f5e
000d48 6160
000d49 6261
000d4a 6463      	.db	   94,   95,   96,   97,    97,   98,   99,  100
                 
000d4b 6565
000d4c 6766
000d4d 6968
000d4e 6b6a      	.db	  101,  101,  102,  103,   104,  105,  106,  107
000d4f 6d6c
000d50 6e6d
000d51 706f
000d52 7271      	.db	  108,  109,  109,  110,   111,  112,  113,  114
000d53 7473
000d54 7574
000d55 7776
000d56 7978      	.db	  115,  116,  116,  117,   118,  119,  120,  121
000d57 7a79
000d58 7c7b
000d59 7e7d
000d5a 807f      	.db	  121,  122,  123,  124,   125,  126,  127,  128
                 
000d5b 8080
000d5c 8281
000d5d 8483
000d5e 8685      	.db	  128,  128,  129,  130,   131,  132,  133,  134
000d5f 8787
000d60 8988
000d61 8b8a
000d62 8c8c      	.db	  135,  135,  136,  137,   138,  139,  140,  140
000d63 8e8d
000d64 908f
000d65 9291
000d66 9393      	.db	  141,  142,  143,  144,   145,  146,  147,  147
000d67 9594
000d68 9796
000d69 9998
000d6a 9b9a      	.db	  148,  149,  150,  151,   152,  153,  154,  155
                 
000d6b 9c9b
000d6c 9e9d
000d6d 9f9f
000d6e a1a0      	.db	  155,  156,  157,  158,   159,  159,  160,  161
000d6f a3a2
000d70 a5a4
000d71 a7a6
000d72 a8a7      	.db	  162,  163,  164,  165,   166,  167,  167,  168
000d73 aaa9
000d74 acab
000d75 aead
000d76 afae      	.db	  169,  170,  171,  172,   173,  174,  174,  175
000d77 b1b0
000d78 b3b2
000d79 b4b3
000d7a b6b5      	.db	  176,  177,  178,  179,   179,  180,  181,  182
                 
000d7b b8b7
000d7c bab9
000d7d bbba
000d7e bdbc      	.db	  183,  184,  185,  186,   186,  187,  188,  189
000d7f bfbe
000d80 c1c0
000d81 c2c2
000d82 c4c3      	.db	  190,  191,  192,  193,   194,  194,  195,  196
000d83 c6c5
000d84 c7c6
000d85 c9c8
000d86 cbca      	.db	  197,  198,  198,  199,   200,  201,  202,  203
000d87 cdcc
000d88 cece
000d89 d0cf
000d8a d2d1      	.db	  204,  205,  206,  206,   207,  208,  209,  210
                 
000d8b d4d3
000d8c d6d5
000d8d d7d7
000d8e d9d8      	.db	  211,  212,  213,  214,   215,  215,  216,  217
000d8f dad9
000d90 dcdb
000d91 dedd
000d92 e0df      	.db	  217,  218,  219,  220,   221,  222,  223,  224
000d93 e2e1
000d94 e3e2
000d95 e4e3
000d96 e6e5      	.db	  225,  226,  226,  227,   227,  228,  229,  230
000d97 eae8
000d98 eceb
000d99 ecec
000d9a e4ea      	.db	  232,  234,  235,  236,   236,  236,  234,  228
                 
                 
                 INV_SAW3:
                 	; base freqency: 103.83 Hz, discrets: 176, rms: 7.95, min: -0.92, max: 0.92
                 
000d9b 0a80
000d9c 1a0f
000d9d 1315
000d9e 1919      	.db	  128,   10,   15,   26,    21,   19,   25,   25
000d9f 1a17
000da0 1a1c
000da1 1e1c
000da2 1e1d      	.db	   23,   26,   28,   26,    28,   30,   29,   30
000da3 2021
000da4 2321
000da5 2323
000da6 2625      	.db	   33,   32,   33,   35,    35,   35,   37,   38
000da7 2826
000da8 2929
000da9 2c2a
000daa 2c2c      	.db	   38,   40,   41,   41,    42,   44,   44,   44
                 
000dab 2e2e
000dac 302f
000dad 3131
000dae 3433      	.db	   46,   46,   47,   48,    49,   49,   51,   52
000daf 3534
000db0 3737
000db1 3938
000db2 3a3a      	.db	   52,   53,   55,   55,    56,   57,   58,   58
000db3 3c3c
000db4 3e3d
000db5 3f3f
000db6 4241      	.db	   60,   60,   61,   62,    63,   63,   65,   66
000db7 4342
000db8 4544
000db9 4746
000dba 4847      	.db	   66,   67,   68,   69,    70,   71,   71,   72
                 
000dbb 4a49
000dbc 4c4b
000dbd 4d4d
000dbe 504e      	.db	   73,   74,   75,   76,    77,   77,   78,   80
000dbf 5150
000dc0 5352
000dc1 5553
000dc2 5655      	.db	   80,   81,   82,   83,    83,   85,   85,   86
000dc3 5857
000dc4 5a59
000dc5 5b5b
000dc6 5d5c      	.db	   87,   88,   89,   90,    91,   91,   92,   93
000dc7 5f5e
000dc8 6160
000dc9 6261
000dca 6463      	.db	   94,   95,   96,   97,    97,   98,   99,  100
                 
000dcb 6665
000dcc 6766
000dcd 6969
000dce 6b6a      	.db	  101,  102,  102,  103,   105,  105,  106,  107
000dcf 6c6c
000dd0 6e6e
000dd1 706f
000dd2 7271      	.db	  108,  108,  110,  110,   111,  112,  113,  114
000dd3 7473
000dd4 7574
000dd5 7776
000dd6 7978      	.db	  115,  116,  116,  117,   118,  119,  120,  121
000dd7 7a7a
000dd8 7c7b
000dd9 7e7d
000dda 7f7f      	.db	  122,  122,  123,  124,   125,  126,  127,  127
                 
000ddb 8180
000ddc 8281
000ddd 8483
000dde 8685      	.db	  128,  129,  129,  130,   131,  132,  133,  134
000ddf 8786
000de0 8988
000de1 8b8a
000de2 8c8c      	.db	  134,  135,  136,  137,   138,  139,  140,  140
000de3 8e8d
000de4 908f
000de5 9291
000de6 9492      	.db	  141,  142,  143,  144,   145,  146,  146,  148
000de7 9594
000de8 9796
000de9 9997
000dea 9a9a      	.db	  148,  149,  150,  151,   151,  153,  154,  154
                 
000deb 9c9b
000dec 9e9d
000ded 9f9f
000dee a1a0      	.db	  155,  156,  157,  158,   159,  159,  160,  161
000def a3a2
000df0 a5a4
000df1 a6a5
000df2 a8a7      	.db	  162,  163,  164,  165,   165,  166,  167,  168
000df3 aaa9
000df4 abab
000df5 adad
000df6 afae      	.db	  169,  170,  171,  171,   173,  173,  174,  175
000df7 b0b0
000df8 b3b2
000df9 b4b3
000dfa b6b5      	.db	  176,  176,  178,  179,   179,  180,  181,  182
                 
000dfb b8b7
000dfc b9b9
000dfd bbba
000dfe bdbc      	.db	  183,  184,  185,  185,   186,  187,  188,  189
000dff bebe
000e00 c1bf
000e01 c2c1
000e02 c4c3      	.db	  190,  190,  191,  193,   193,  194,  195,  196
000e03 c6c4
000e04 c7c6
000e05 c9c8
000e06 cbc9      	.db	  196,  198,  198,  199,   200,  201,  201,  203
000e07 cccc
000e08 cfcd
000e09 d0cf
000e0a d2d1      	.db	  204,  204,  205,  207,   207,  208,  209,  210
                 
000e0b d4d2
000e0c d4d4
000e0d d7d6
000e0e d8d7      	.db	  210,  212,  212,  212,   214,  215,  215,  216
000e0f dada
000e10 dddb
000e11 dddd
000e12 e0df      	.db	  218,  218,  219,  221,   221,  221,  223,  224
000e13 e2df
000e14 e2e3
000e15 e6e4
000e16 e6e4      	.db	  223,  226,  227,  226,   228,  230,  228,  230
000e17 e7e9
000e18 ede7
000e19 e6eb
000e1a f6f1      	.db	  233,  231,  231,  237,   235,  230,  241,  246
                 
                 
                 INV_SAW4:
                 	; base freqency: 164.81 Hz, discrets: 111, rms: 7.95, min: -1.00, max: 1.00
                 
000e1b 0180
000e1c 131b
000e1d 1915
000e1e 1c14      	.db	  128,    1,   27,   19,    21,   25,   20,   28
000e1f 1c16
000e20 1c19
000e21 1c1d
000e22 1d20      	.db	   22,   28,   25,   28,    29,   28,   32,   29
000e23 1f21
000e24 2222
000e25 2523
000e26 2724      	.db	   33,   31,   34,   34,    35,   37,   36,   39
000e27 2826
000e28 2928
000e29 2a2b
000e2a 2c2d      	.db	   38,   40,   40,   41,    43,   42,   45,   44
                 
000e2b 2e2e
000e2c 3030
000e2d 3231
000e2e 3432      	.db	   46,   46,   48,   48,    49,   50,   50,   52
000e2f 3634
000e30 3736
000e31 3838
000e32 3a3a      	.db	   52,   54,   54,   55,    56,   56,   58,   58
000e33 3c3c
000e34 3e3d
000e35 403f
000e36 4240      	.db	   60,   60,   61,   62,    63,   64,   64,   66
000e37 4342
000e38 4544
000e39 4646
000e3a 4848      	.db	   66,   67,   68,   69,    70,   70,   72,   72
                 
000e3b 4a4a
000e3c 4c4b
000e3d 4e4c
000e3e 504e      	.db	   74,   74,   75,   76,    76,   78,   78,   80
000e3f 5150
000e40 5352
000e41 5454
000e42 5656      	.db	   80,   81,   82,   83,    84,   84,   86,   86
000e43 5857
000e44 5a59
000e45 5c5a
000e46 5d5c      	.db	   87,   88,   89,   90,    90,   92,   92,   93
000e47 5f5e
000e48 6060
000e49 6262
000e4a 6463      	.db	   94,   95,   96,   96,    98,   98,   99,  100
                 
000e4b 6665
000e4c 6866
000e4d 6a68
000e4e 6b6a      	.db	  101,  102,  102,  104,   104,  106,  106,  107
000e4f 6d6c
000e50 6e6e
000e51 7070
000e52 7271      	.db	  108,  109,  110,  110,   112,  112,  113,  114
000e53 7473
000e54 7674
000e55 7776
000e56 7978      	.db	  115,  116,  116,  118,   118,  119,  120,  121
000e57 7a7a
000e58 7c7c
000e59 7e7d
000e5a 807f      	.db	  122,  122,  124,  124,   125,  126,  127,  128
                 
000e5b 8080
000e5c 8281
000e5d 8483
000e5e 8684      	.db	  128,  128,  129,  130,   131,  132,  132,  134
000e5f 8786
000e60 8988
000e61 8a8a
000e62 8c8c      	.db	  134,  135,  136,  137,   138,  138,  140,  140
000e63 8e8d
000e64 908f
000e65 9290
000e66 9392      	.db	  141,  142,  143,  144,   144,  146,  146,  147
000e67 9594
000e68 9696
000e69 9898
000e6a 9a9a      	.db	  148,  149,  150,  150,   152,  152,  154,  154
                 
000e6b 9c9b
000e6c 9e9d
000e6d a09e
000e6e a1a0      	.db	  155,  156,  157,  158,   158,  160,  160,  161
000e6f a3a2
000e70 a4a4
000e71 a6a6
000e72 a8a7      	.db	  162,  163,  164,  164,   166,  166,  167,  168
000e73 aaa9
000e74 acaa
000e75 adac
000e76 afae      	.db	  169,  170,  170,  172,   172,  173,  174,  175
000e77 b0b0
000e78 b2b2
000e79 b4b4
000e7a b6b5      	.db	  176,  176,  178,  178,   180,  180,  181,  182
                 
000e7b b8b6
000e7c bab8
000e7d bbba
000e7e bdbc      	.db	  182,  184,  184,  186,   186,  187,  188,  189
000e7f bebe
000e80 c0c0
000e81 c2c1
000e82 c4c3      	.db	  190,  190,  192,  192,   193,  194,  195,  196
000e83 c6c4
000e84 c8c6
000e85 c9c8
000e86 caca      	.db	  196,  198,  198,  200,   200,  201,  202,  202
000e87 cccc
000e88 cece
000e89 d0cf
000e8a d2d0      	.db	  204,  204,  206,  206,   207,  208,  208,  210
                 
000e8b d4d2
000e8c d6d3
000e8d d7d5
000e8e d8d8      	.db	  210,  212,  211,  214,   213,  215,  216,  216
000e8f d9da
000e90 dbdc
000e91 dedd
000e92 e1de      	.db	  218,  217,  220,  219,   221,  222,  222,  225
000e93 e3df
000e94 e4e0
000e95 e4e3
000e96 e4e7      	.db	  223,  227,  224,  228,   227,  228,  231,  228
000e97 e4ea
000e98 e7ec
000e99 edeb
000e9a ffe5      	.db	  234,  228,  236,  231,   235,  237,  229,  255
                 
                 
                 INV_SAW5:
                 	; base freqency: 261.62 Hz, discrets: 70, rms: 7.95, min: -1.00, max: 1.00
                 
000e9b 1a80
000e9c 1801
000e9d 111e
000e9e 1d13      	.db	  128,   26,    1,   24,    30,   17,   19,   29
000e9f 151b
000ea0 1f1a
000ea1 1a1b
000ea2 2120      	.db	   27,   21,   26,   31,    27,   26,   32,   33
000ea3 1f1e
000ea4 2324
000ea5 2421
000ea6 2527      	.db	   30,   31,   36,   35,    33,   36,   39,   37
000ea7 2925
000ea8 2829
000ea9 2c2a
000eaa 2b2c      	.db	   37,   41,   41,   40,    42,   44,   44,   43
                 
000eab 2f2e
000eac 2f2e
000ead 3232
000eae 3332      	.db	   46,   47,   46,   47,    50,   50,   50,   51
000eaf 3535
000eb0 3835
000eb1 3839
000eb2 3b39      	.db	   53,   53,   53,   56,    57,   56,   57,   59
000eb3 3b3c
000eb4 3f3d
000eb5 3f3e
000eb6 4241      	.db	   60,   59,   61,   63,    62,   63,   65,   66
000eb7 4342
000eb8 4545
000eb9 4745
000eba 4848      	.db	   66,   67,   69,   69,    69,   71,   72,   72
                 
000ebb 4b49
000ebc 4b4b
000ebd 4e4d
000ebe 4f4e      	.db	   73,   75,   75,   75,    77,   78,   78,   79
000ebf 5150
000ec0 5251
000ec1 5554
000ec2 5655      	.db	   80,   81,   81,   82,    84,   85,   85,   86
000ec3 5858
000ec4 5a58
000ec5 5b5b
000ec6 5e5c      	.db	   88,   88,   88,   90,    91,   91,   92,   94
000ec7 5e5e
000ec8 6160
000ec9 6261
000eca 6464      	.db	   94,   94,   96,   97,    97,   98,  100,  100
                 
000ecb 6664
000ecc 6767
000ecd 6968
000ece 6b6a      	.db	  100,  102,  103,  103,   104,  105,  106,  107
000ecf 6d6b
000ed0 6e6e
000ed1 716f
000ed2 7171      	.db	  107,  109,  110,  110,   111,  113,  113,  113
000ed3 7473
000ed4 7574
000ed5 7777
000ed6 7977      	.db	  115,  116,  116,  117,   119,  119,  119,  121
000ed7 7a7a
000ed8 7d7b
000ed9 7d7d
000eda 807f      	.db	  122,  122,  123,  125,   125,  125,  127,  128
                 
000edb 8080
000edc 8381
000edd 8383
000ede 8685      	.db	  128,  128,  129,  131,   131,  131,  133,  134
000edf 8786
000ee0 8989
000ee1 8b89
000ee2 8c8c      	.db	  134,  135,  137,  137,   137,  139,  140,  140
000ee3 8f8d
000ee4 8f8f
000ee5 9291
000ee6 9392      	.db	  141,  143,  143,  143,   145,  146,  146,  147
000ee7 9595
000ee8 9796
000ee9 9998
000eea 9a99      	.db	  149,  149,  150,  151,   152,  153,  153,  154
                 
000eeb 9c9c
000eec 9e9c
000eed 9f9f
000eee a2a0      	.db	  156,  156,  156,  158,   159,  159,  160,  162
000eef a2a2
000ef0 a5a4
000ef1 a6a5
000ef2 a8a8      	.db	  162,  162,  164,  165,   165,  166,  168,  168
000ef3 aaa8
000ef4 abab
000ef5 aeac
000ef6 afaf      	.db	  168,  170,  171,  171,   172,  174,  175,  175
000ef7 b1b0
000ef8 b2b2
000ef9 b5b3
000efa b5b5      	.db	  176,  177,  178,  178,   179,  181,  181,  181
                 
000efb b8b7
000efc b9b8
000efd bbbb
000efe bdbb      	.db	  183,  184,  184,  185,   187,  187,  187,  189
000eff bebe
000f00 c1bf
000f01 c1c2
000f02 c5c3      	.db	  190,  190,  191,  193,   194,  193,  195,  197
000f03 c5c4
000f04 c8c7
000f05 c8c7
000f06 cbcb      	.db	  196,  197,  199,  200,   199,  200,  203,  203
000f07 cdcb
000f08 cece
000f09 d1ce
000f0a d1d2      	.db	  203,  205,  206,  206,   206,  209,  210,  209
                 
000f0b d5d2
000f0c d4d4
000f0d d8d6
000f0e d7d7      	.db	  210,  213,  212,  212,   214,  216,  215,  215
000f0f dbdb
000f10 dcd9
000f11 dddf
000f12 e1dc      	.db	  219,  219,  217,  220,   223,  221,  220,  225
000f13 dfe2
000f14 e6e0
000f15 e1e5
000f16 ebe6      	.db	  226,  223,  224,  230,   229,  225,  230,  235
000f17 e3e5
000f18 efed
000f19 e8e2
000f1a e6ff      	.db	  229,  227,  237,  239,   226,  232,  255,  230
                 
                 
                 INV_SAW6:
                 	; base freqency: 415.30 Hz, discrets: 44, rms: 7.95, min: -1.00, max: 1.00
                 
000f1b 3980
000f1c 000b
000f1d 1d0d
000f1e 1b21      	.db	  128,   57,   11,    0,    13,   29,   33,   27
000f1f 1313
000f20 2019
000f21 1d21
000f22 1b1a      	.db	   19,   19,   25,   32,    33,   29,   26,   27
000f23 2420
000f24 2124
000f25 2220
000f26 2826      	.db	   32,   36,   36,   33,    32,   34,   38,   40
000f27 2628
000f28 2826
000f29 2d2b
000f2a 2b2c      	.db	   40,   38,   38,   40,    43,   45,   44,   43
                 
000f2b 2e2b
000f2c 3231
000f2d 3031
000f2e 3431      	.db	   43,   46,   49,   50,    49,   48,   49,   52
000f2f 3636
000f30 3535
000f31 3937
000f32 3b3b      	.db	   54,   54,   53,   53,    55,   57,   59,   59
000f33 3b3a
000f34 3f3c
000f35 4040
000f36 403f      	.db	   58,   59,   60,   63,    64,   64,   63,   64
000f37 4442
000f38 4545
000f39 4545
000f3a 4947      	.db	   66,   68,   69,   69,    69,   69,   71,   73
                 
000f3b 4a4a
000f3c 4b4a
000f3d 4e4d
000f3e 4f4f      	.db	   74,   74,   74,   75,    77,   78,   79,   79
000f3f 504f
000f40 5452
000f41 5454
000f42 5654      	.db	   79,   80,   82,   84,    84,   84,   84,   86
000f43 5958
000f44 5959
000f45 5b5a
000f46 5e5d      	.db	   88,   89,   89,   89,    90,   91,   93,   94
000f47 5e5e
000f48 615f
000f49 6362
000f4a 6363      	.db	   94,   94,   95,   97,    98,   99,   99,   99
                 
000f4b 6664
000f4c 6867
000f4d 6868
000f4e 6c6a      	.db	  100,  102,  103,  104,   104,  104,  106,  108
000f4f 6d6c
000f50 6e6d
000f51 716f
000f52 7271      	.db	  108,  109,  109,  110,   111,  113,  113,  114
000f53 7372
000f54 7675
000f55 7777
000f56 7877      	.db	  114,  115,  117,  118,   119,  119,  119,  120
000f57 7b7a
000f58 7c7c
000f59 7e7c
000f5a 807f      	.db	  122,  123,  124,  124,   124,  126,  127,  128
                 
000f5b 8080
000f5c 8281
000f5d 8484
000f5e 8584      	.db	  128,  128,  129,  130,   132,  132,  132,  133
000f5f 8886
000f60 8989
000f61 8a89
000f62 8d8b      	.db	  134,  136,  137,  137,   137,  138,  139,  141
000f63 8e8e
000f64 8f8f
000f65 9291
000f66 9393      	.db	  142,  142,  143,  143,   145,  146,  147,  147
000f67 9494
000f68 9896
000f69 9898
000f6a 9a99      	.db	  148,  148,  150,  152,   152,  152,  153,  154
                 
000f6b 9d9c
000f6c 9d9d
000f6d 9f9e
000f6e a2a1      	.db	  156,  157,  157,  157,   158,  159,  161,  162
000f6f a2a2
000f70 a5a3
000f71 a7a6
000f72 a7a7      	.db	  162,  162,  163,  165,   166,  167,  167,  167
000f73 aaa8
000f74 acac
000f75 acac
000f76 b0ae      	.db	  168,  170,  172,  172,   172,  172,  174,  176
000f77 b1b1
000f78 b2b1
000f79 b5b3
000f7a b6b6      	.db	  177,  177,  177,  178,   179,  181,  182,  182
                 
000f7b b7b6
000f7c bbb9
000f7d bbbb
000f7e bcbb      	.db	  182,  183,  185,  187,   187,  187,  187,  188
000f7f c0be
000f80 c0c1
000f81 c1c0
000f82 c5c4      	.db	  190,  192,  193,  192,   192,  193,  196,  197
000f83 c5c6
000f84 c7c5
000f85 cbc9
000f86 cacb      	.db	  198,  197,  197,  199,   201,  203,  203,  202
000f87 ccca
000f88 d0cf
000f89 cecf
000f8a d2cf      	.db	  202,  204,  207,  208,   207,  206,  207,  210
                 
000f8b d5d5
000f8c d3d4
000f8d d8d5
000f8e dada      	.db	  213,  213,  212,  211,   213,  216,  218,  218
000f8f d8d8
000f90 deda
000f91 dfe0
000f92 dcdc      	.db	  216,  216,  218,  222,   224,  223,  220,  220
000f93 e5e0
000f94 e3e6
000f95 e0df
000f96 ede7      	.db	  224,  229,  230,  227,   223,  224,  231,  237
000f97 e5ed
000f98 e3df
000f99 fff3
000f9a c7f5      	.db	  237,  229,  223,  227,   243,  255,  245,  199
                 
                 
                 INV_SAW7:
                 	; base freqency: 659.25 Hz, discrets: 28, rms: 7.95, min: -0.99, max: 0.99
                 
000f9b 5180
000f9c 0e29
000f9d 0302
000f9e 170c      	.db	  128,   81,   41,   14,     2,    3,   12,   23
000f9f 2420
000fa0 1d22
000fa1 1518
000fa2 1a16      	.db	   32,   36,   34,   29,    24,   21,   22,   26
000fa3 2420
000fa4 2626
000fa5 2124
000fa6 2120      	.db	   32,   36,   38,   38,    36,   33,   32,   33
000fa7 2824
000fa8 2c2b
000fa9 2b2c
000faa 292a      	.db	   36,   40,   43,   44,    44,   43,   42,   41
                 
000fab 2c2a
000fac 322f
000fad 3333
000fae 3233      	.db	   42,   44,   47,   50,    51,   51,   51,   50
000faf 3231
000fb0 3734
000fb1 3b39
000fb2 3a3b      	.db	   49,   50,   52,   55,    57,   59,   59,   58
000fb3 3a3a
000fb4 3d3b
000fb5 413f
000fb6 4242      	.db	   58,   58,   59,   61,    63,   65,   66,   66
000fb7 4242
000fb8 4342
000fb9 4745
000fba 4a49      	.db	   66,   66,   66,   67,    69,   71,   73,   74
                 
000fbb 4a4a
000fbc 4a4a
000fbd 4c4b
000fbe 504e      	.db	   74,   74,   74,   74,    75,   76,   78,   80
000fbf 5251
000fc0 5152
000fc1 5352
000fc2 5654      	.db	   81,   82,   82,   81,    82,   83,   84,   86
000fc3 5958
000fc4 595a
000fc5 5a59
000fc6 5c5b      	.db	   88,   89,   90,   89,    89,   90,   91,   92
000fc7 605e
000fc8 6161
000fc9 6161
000fca 6362      	.db	   94,   96,   97,   97,    97,   97,   98,   99
                 
000fcb 6664
000fcc 6968
000fcd 6969
000fce 6969      	.db	  100,  102,  104,  105,   105,  105,  105,  105
000fcf 6c6a
000fd0 6f6e
000fd1 7170
000fd2 7171      	.db	  106,  108,  110,  111,   112,  113,  113,  113
000fd3 7271
000fd4 7674
000fd5 7877
000fd6 7979      	.db	  113,  114,  116,  118,   119,  120,  121,  121
000fd7 7979
000fd8 7c7a
000fd9 7f7d
000fda 8080      	.db	  121,  121,  122,  124,   125,  127,  128,  128
                 
000fdb 8080
000fdc 8180
000fdd 8483
000fde 8786      	.db	  128,  128,  128,  129,   131,  132,  134,  135
000fdf 8787
000fe0 8887
000fe1 8a89
000fe2 8e8c      	.db	  135,  135,  135,  136,   137,  138,  140,  142
000fe3 8f8f
000fe4 8f8f
000fe5 9190
000fe6 9492      	.db	  143,  143,  143,  143,   144,  145,  146,  148
000fe7 9796
000fe8 9797
000fe9 9797
000fea 9a98      	.db	  150,  151,  151,  151,   151,  151,  152,  154
                 
000feb 9d9c
000fec 9f9e
000fed 9f9f
000fee a09f      	.db	  156,  157,  158,  159,   159,  159,  159,  160
000fef a4a2
000ff0 a6a5
000ff1 a7a7
000ff2 a7a6      	.db	  162,  164,  165,  166,   167,  167,  166,  167
000ff3 aaa8
000ff4 adac
000ff5 afae
000ff6 aeae      	.db	  168,  170,  172,  173,   174,  175,  174,  174
000ff7 b0af
000ff8 b4b2
000ff9 b6b5
000ffa b6b6      	.db	  175,  176,  178,  180,   181,  182,  182,  182
                 
000ffb b6b6
000ffc b9b7
000ffd bdbb
000ffe bebe      	.db	  182,  182,  183,  185,   187,  189,  190,  190
000fff bebe
001000 bfbe
001001 c3c1
001002 c6c5      	.db	  190,  190,  190,  191,   193,  195,  197,  198
001003 c6c6
001004 c5c5
001005 c9c7
001006 cecc      	.db	  198,  198,  197,  197,   199,  201,  204,  206
001007 cecf
001008 cdcd
001009 cecd
00100a d4d1      	.db	  207,  206,  205,  205,   205,  206,  209,  212
                 
00100b d7d6
00100c d5d6
00100d d4d4
00100e d8d5      	.db	  214,  215,  214,  213,   212,  212,  213,  216
00100f dfdc
001010 dfe0
001011 dadc
001012 dcda      	.db	  220,  223,  224,  223,   220,  218,  218,  220
001013 e6e0
001014 ebea
001015 e3e8
001016 dcde      	.db	  224,  230,  234,  235,   232,  227,  222,  220
001017 e9e0
001018 fdf4
001019 f2fe
00101a afd7      	.db	  224,  233,  244,  253,   254,  242,  215,  175
                 
                 
                 INV_SAW8:
                 	; base freqency: 1046.50 Hz, discrets: 18, rms: 7.95, min: -0.98, max: 0.98
                 
00101b 6180
00101c 2b44
00101d 0b18
00101e 0304      	.db	  128,   97,   68,   43,    24,   11,    4,    3
00101f 0c06
001020 1c14
001021 2622
001022 2728      	.db	    6,   12,   20,   28,    34,   38,   40,   39
001023 2225
001024 1c1e
001025 1b1b
001026 211d      	.db	   37,   34,   30,   28,    27,   27,   29,   33
001027 2824
001028 2e2b
001029 2f2f
00102a 2c2e      	.db	   36,   40,   43,   46,    47,   47,   46,   44
                 
00102b 2a2b
00102c 2b2a
00102d 2f2c
00102e 3431      	.db	   43,   42,   42,   43,    44,   47,   49,   52
00102f 3836
001030 3939
001031 3839
001032 3737      	.db	   54,   56,   57,   57,    57,   56,   55,   55
001033 3837
001034 3c3a
001035 403e
001036 4442      	.db	   55,   56,   58,   60,    62,   64,   66,   68
001037 4544
001038 4444
001039 4444
00103a 4544      	.db	   68,   69,   68,   68,    68,   68,   68,   69
                 
00103b 4847
00103c 4c4a
00103d 4f4e
00103e 5050      	.db	   71,   72,   74,   76,    78,   79,   80,   80
00103f 5050
001040 5050
001041 5251
001042 5553      	.db	   80,   80,   80,   80,    81,   82,   83,   85
001043 5957
001044 5b5a
001045 5c5c
001046 5c5c      	.db	   87,   89,   90,   91,    92,   92,   92,   92
001047 5c5c
001048 5e5d
001049 6160
00104a 6563      	.db	   92,   92,   93,   94,    96,   97,   99,  101
                 
00104b 6766
00104c 6868
00104d 6868
00104e 6968      	.db	  102,  103,  104,  104,   104,  104,  104,  105
00104f 6b69
001050 6e6c
001051 7170
001052 7473      	.db	  105,  107,  108,  110,   112,  113,  115,  116
001053 7474
001054 7474
001055 7575
001056 7776      	.db	  116,  116,  116,  116,   117,  117,  118,  119
001057 7a79
001058 7e7c
001059 807f
00105a 8080      	.db	  121,  122,  124,  126,   127,  128,  128,  128
                 
00105b 8080
00105c 8080
00105d 8281
00105e 8684      	.db	  128,  128,  128,  128,   129,  130,  132,  134
00105f 8987
001060 8b8a
001061 8c8b
001062 8c8c      	.db	  135,  137,  138,  139,   139,  140,  140,  140
001063 8c8c
001064 8f8d
001065 9290
001066 9594      	.db	  140,  140,  141,  143,   144,  146,  148,  149
001067 9797
001068 9898
001069 9898
00106a 9998      	.db	  151,  151,  152,  152,   152,  152,  152,  153
                 
00106b 9b9a
00106c 9f9d
00106d a2a0
00106e a4a3      	.db	  154,  155,  157,  159,   160,  162,  163,  164
00106f a4a4
001070 a4a4
001071 a5a4
001072 a7a6      	.db	  164,  164,  164,  164,   164,  165,  166,  167
001073 aba9
001074 aead
001075 b0af
001076 b0b0      	.db	  169,  171,  173,  174,   175,  176,  176,  176
001077 b0b0
001078 b1b0
001079 b4b2
00107a b8b6      	.db	  176,  176,  176,  177,   178,  180,  182,  184
                 
00107b bbb9
00107c bcbc
00107d bcbc
00107e bbbc      	.db	  185,  187,  188,  188,   188,  188,  188,  187
00107f bcbc
001080 c0be
001081 c4c2
001082 c8c6      	.db	  188,  188,  190,  192,   194,  196,  198,  200
001083 c9c9
001084 c8c9
001085 c7c7
001086 c8c7      	.db	  201,  201,  201,  200,   199,  199,  199,  200
001087 ccca
001088 d1cf
001089 d5d4
00108a d6d6      	.db	  202,  204,  207,  209,   212,  213,  214,  214
                 
00108b d4d5
00108c d1d2
00108d d2d1
00108e d8d5      	.db	  213,  212,  210,  209,   209,  210,  213,  216
00108f dfdc
001090 e5e3
001091 e4e5
001092 dee2      	.db	  220,  223,  227,  229,   229,  228,  226,  222
001093 d9db
001094 dad8
001095 e4de
001096 f4ec      	.db	  219,  217,  216,  218,   222,  228,  236,  244
001097 fdfa
001098 f5fc
001099 d5e8
00109a 9fbc      	.db	  250,  253,  252,  245,   232,  213,  188,  159
                 
                 
                 INV_SAW9:
                 	; base freqency: 1661.21 Hz, discrets: 11, rms: 7.95, min: -0.97, max: 0.97
                 
00109b 6d80
00109c 495a
00109d 2a38
00109e 141e      	.db	  128,  109,   90,   73,    56,   42,   30,   20
00109f 080c
0010a0 0505
0010a1 0906
0010a2 120d      	.db	   12,    8,    5,    5,     6,    9,   13,   18
0010a3 1d18
0010a4 2622
0010a5 2c2a
0010a6 2f2e      	.db	   24,   29,   34,   38,    42,   44,   46,   47
0010a7 2d2e
0010a8 2a2c
0010a9 2729
0010aa 2526      	.db	   46,   45,   44,   42,    41,   39,   38,   37
                 
0010ab 2524
0010ac 2726
0010ad 2c29
0010ae 312f      	.db	   36,   37,   38,   39,    41,   44,   47,   49
0010af 3734
0010b0 3b39
0010b1 3d3c
0010b2 3d3d      	.db	   52,   55,   57,   59,    60,   61,   61,   61
0010b3 3d3d
0010b4 3b3c
0010b5 3b3b
0010b6 3b3b      	.db	   61,   61,   60,   59,    59,   59,   59,   59
0010b7 3d3c
0010b8 413f
0010b9 4543
0010ba 4947      	.db	   60,   61,   63,   65,    67,   69,   71,   73
                 
0010bb 4d4b
0010bc 4f4e
0010bd 504f
0010be 5050      	.db	   75,   77,   78,   79,    79,   80,   80,   80
0010bf 4f50
0010c0 4f4f
0010c1 504f
0010c2 5250      	.db	   80,   79,   79,   79,    79,   80,   80,   82
0010c3 5453
0010c4 5856
0010c5 5c5a
0010c6 5f5e      	.db	   83,   84,   86,   88,    90,   92,   94,   95
0010c7 6260
0010c8 6362
0010c9 6363
0010ca 6363      	.db	   96,   98,   98,   99,    99,   99,   99,   99
                 
0010cb 6363
0010cc 6463
0010cd 6564
0010ce 6867      	.db	   99,   99,   99,  100,   100,  101,  103,  104
0010cf 6b6a
0010d0 6f6d
0010d1 7271
0010d2 7574      	.db	  106,  107,  109,  111,   113,  114,  116,  117
0010d3 7675
0010d4 7776
0010d5 7777
0010d6 7777      	.db	  117,  118,  118,  119,   119,  119,  119,  119
0010d7 7777
0010d8 7978
0010d9 7b7a
0010da 7f7d      	.db	  119,  119,  120,  121,   122,  123,  125,  127
                 
0010db 8180
0010dc 8583
0010dd 8786
0010de 8988      	.db	  128,  129,  131,  133,   134,  135,  136,  137
0010df 8989
0010e0 8989
0010e1 8989
0010e2 8a8a      	.db	  137,  137,  137,  137,   137,  137,  138,  138
0010e3 8b8b
0010e4 8e8c
0010e5 918f
0010e6 9593      	.db	  139,  139,  140,  142,   143,  145,  147,  149
0010e7 9896
0010e8 9b99
0010e9 9c9c
0010ea 9d9d      	.db	  150,  152,  153,  155,   156,  156,  157,  157
                 
0010eb 9d9d
0010ec 9d9d
0010ed 9d9d
0010ee 9e9e      	.db	  157,  157,  157,  157,   157,  157,  158,  158
0010ef a1a0
0010f0 a4a2
0010f1 a8a6
0010f2 acaa      	.db	  160,  161,  162,  164,   166,  168,  170,  172
0010f3 aead
0010f4 b0b0
0010f5 b1b1
0010f6 b1b1      	.db	  173,  174,  176,  176,   177,  177,  177,  177
0010f7 b0b0
0010f8 b0b0
0010f9 b1b1
0010fa b3b2      	.db	  176,  176,  176,  176,   177,  177,  178,  179
                 
0010fb b7b5
0010fc bbb9
0010fd bfbd
0010fe c3c1      	.db	  181,  183,  185,  187,   189,  191,  193,  195
0010ff c5c4
001100 c5c5
001101 c5c5
001102 c3c4      	.db	  196,  197,  197,  197,   197,  197,  196,  195
001103 c3c3
001104 c3c3
001105 c5c4
001106 c9c7      	.db	  195,  195,  195,  195,   196,  197,  199,  201
001107 cfcc
001108 d4d1
001109 d9d7
00110a dbda      	.db	  204,  207,  209,  212,   215,  217,  218,  219
                 
00110b dbdc
00110c d9da
00110d d6d7
00110e d3d4      	.db	  220,  219,  218,  217,   215,  214,  212,  211
00110f d1d2
001110 d4d2
001111 dad6
001112 e3de      	.db	  210,  209,  210,  212,   214,  218,  222,  227
001113 eee8
001114 f7f3
001115 fbfa
001116 f8fb      	.db	  232,  238,  243,  247,   250,  251,  251,  248
001117 ecf4
001118 d6e2
001119 b7c8
00111a 93a6      	.db	  244,  236,  226,  214,   200,  183,  166,  147
                 
                 
                 INV_SAW10:
                 	; base freqency: 2637.01 Hz, discrets: 7, rms: 7.95, min: -0.94, max: 0.94
                 
00111b 7480
00111c 5b68
00111d 4550
00111e 313a      	.db	  128,  116,  104,   91,    80,   69,   58,   49
00111f 2028
001120 141a
001121 0c0f
001122 080a      	.db	   40,   32,   26,   20,    15,   12,   10,    8
001123 0808
001124 0b09
001125 110e
001126 1814      	.db	    8,    8,    9,   11,    14,   17,   20,   24
001127 201c
001128 2723
001129 2e2a
00112a 3330      	.db	   28,   32,   35,   39,    42,   46,   48,   51
                 
00112b 3635
00112c 3838
00112d 3939
00112e 3838      	.db	   53,   54,   56,   56,    57,   57,   56,   56
00112f 3637
001130 3536
001131 3334
001132 3232      	.db	   55,   54,   54,   53,    52,   51,   50,   50
001133 3232
001134 3333
001135 3534
001136 3937      	.db	   50,   50,   51,   51,    52,   53,   55,   57
001137 3d3b
001138 413f
001139 4543
00113a 4a48      	.db	   59,   61,   63,   65,    67,   69,   72,   74
                 
00113b 4d4c
00113c 504f
00113d 5251
00113e 5353      	.db	   76,   77,   79,   80,    81,   82,   83,   83
00113f 5353
001140 5353
001141 5353
001142 5253      	.db	   83,   83,   83,   83,    83,   83,   83,   82
001143 5252
001144 5353
001145 5454
001146 5655      	.db	   82,   82,   83,   83,    84,   84,   85,   86
001147 5958
001148 5c5b
001149 605e
00114a 6462      	.db	   88,   89,   91,   92,    94,   96,   98,  100
                 
00114b 6766
00114c 6b69
00114d 6d6c
00114e 6f6e      	.db	  102,  103,  105,  107,   108,  109,  110,  111
00114f 7070
001150 7171
001151 7171
001152 7171      	.db	  112,  112,  113,  113,   113,  113,  113,  113
001153 7171
001154 7271
001155 7272
001156 7473      	.db	  113,  113,  113,  114,   114,  114,  115,  116
001157 7674
001158 7877
001159 7b7a
00115a 7f7d      	.db	  116,  118,  119,  120,   122,  123,  125,  127
                 
00115b 8180
00115c 8583
00115d 8886
00115e 8a89      	.db	  128,  129,  131,  133,   134,  136,  137,  138
00115f 8c8c
001160 8e8d
001161 8e8e
001162 8f8f      	.db	  140,  140,  141,  142,   142,  142,  143,  143
001163 8f8f
001164 8f8f
001165 8f8f
001166 908f      	.db	  143,  143,  143,  143,   143,  143,  143,  144
001167 9190
001168 9392
001169 9594
00116a 9997      	.db	  144,  145,  146,  147,   148,  149,  151,  153
                 
00116b 9c9a
00116c a09e
00116d a4a2
00116e a7a5      	.db	  154,  156,  158,  160,   162,  164,  165,  167
00116f aaa8
001170 acab
001171 adac
001172 aead      	.db	  168,  170,  171,  172,   172,  173,  173,  174
001173 aeae
001174 adad
001175 adad
001176 adad      	.db	  174,  174,  173,  173,   173,  173,  173,  173
001177 adad
001178 aead
001179 b0af
00117a b3b1      	.db	  173,  173,  173,  174,   175,  176,  177,  179
                 
00117b b6b4
00117c bbb8
00117d bfbd
00117e c3c1      	.db	  180,  182,  184,  187,   189,  191,  193,  195
00117f c7c5
001180 cbc9
001181 cdcc
001182 cecd      	.db	  197,  199,  201,  203,   204,  205,  205,  206
001183 cece
001184 cdce
001185 cbcc
001186 caca      	.db	  206,  206,  206,  205,   204,  203,  202,  202
001187 c8c9
001188 c7c8
001189 c8c7
00118a cac8      	.db	  201,  200,  200,  199,   199,  200,  200,  202
                 
00118b cdcb
00118c d2d0
00118d d9d6
00118e e0dd      	.db	  203,  205,  208,  210,   214,  217,  221,  224
00118f e8e4
001190 efec
001191 f5f2
001192 f8f7      	.db	  228,  232,  236,  239,   242,  245,  247,  248
001193 f8f8
001194 f4f6
001195 ecf1
001196 e0e6      	.db	  248,  248,  246,  244,   241,  236,  230,  224
001197 cfd8
001198 bbc6
001199 a5b0
00119a 8c98      	.db	  216,  207,  198,  187,   176,  165,  152,  140
                 
                 
                 INV_SAW11:
                 	; base freqency: 4185.98 Hz, discrets: 5, rms: 7.95, min: -0.92, max: 0.92
                 
00119b 7780
00119c 656e
00119d 545d
00119e 444c      	.db	  128,  119,  110,  101,    93,   84,   76,   68
00119f 353c
0011a0 292f
0011a1 1e23
0011a2 161a      	.db	   60,   53,   47,   41,    35,   30,   26,   22
0011a3 1013
0011a4 0c0e
0011a5 0b0b
0011a6 0b0b      	.db	   19,   16,   14,   12,    11,   11,   11,   11
0011a7 0e0c
0011a8 1210
0011a9 1714
0011aa 1d1a      	.db	   12,   14,   16,   18,    20,   23,   26,   29
                 
0011ab 2320
0011ac 2926
0011ad 2f2c
0011ae 3532      	.db	   32,   35,   38,   41,    44,   47,   50,   53
0011af 3a37
0011b0 3d3c
0011b1 403f
0011b2 4342      	.db	   55,   58,   60,   61,    63,   64,   66,   67
0011b3 4443
0011b4 4444
0011b5 4444
0011b6 4344      	.db	   67,   68,   68,   68,    68,   68,   68,   67
0011b7 4243
0011b8 4142
0011b9 4141
0011ba 4040      	.db	   67,   66,   66,   65,    65,   65,   64,   64
                 
0011bb 4040
0011bc 4140
0011bd 4241
0011be 4443      	.db	   64,   64,   64,   65,    65,   66,   67,   68
0011bf 4645
0011c0 4948
0011c1 4d4b
0011c2 514f      	.db	   69,   70,   72,   73,    75,   77,   79,   81
0011c3 5553
0011c4 5957
0011c5 5c5b
0011c6 605e      	.db	   83,   85,   87,   89,    91,   92,   94,   96
0011c7 6362
0011c8 6665
0011c9 6867
0011ca 6969      	.db	   98,   99,  101,  102,   103,  104,  105,  105
                 
0011cb 6b6a
0011cc 6b6b
0011cd 6b6b
0011ce 6c6c      	.db	  106,  107,  107,  107,   107,  107,  108,  108
0011cf 6b6b
0011d0 6b6b
0011d1 6c6b
0011d2 6c6c      	.db	  107,  107,  107,  107,   107,  108,  108,  108
0011d3 6d6c
0011d4 6e6d
0011d5 706f
0011d6 7271      	.db	  108,  109,  109,  110,   111,  112,  113,  114
0011d7 7573
0011d8 7876
0011d9 7b79
0011da 7f7d      	.db	  115,  117,  118,  120,   121,  123,  125,  127
                 
0011db 8180
0011dc 8583
0011dd 8887
0011de 8b8a      	.db	  128,  129,  131,  133,   135,  136,  138,  139
0011df 8e8d
0011e0 908f
0011e1 9291
0011e2 9393      	.db	  141,  142,  143,  144,   145,  146,  147,  147
0011e3 9494
0011e4 9494
0011e5 9595
0011e6 9595      	.db	  148,  148,  148,  148,   149,  149,  149,  149
0011e7 9495
0011e8 9594
0011e9 9595
0011ea 9595      	.db	  149,  148,  148,  149,   149,  149,  149,  149
                 
0011eb 9796
0011ec 9897
0011ed 9a99
0011ee 9d9b      	.db	  150,  151,  151,  152,   153,  154,  155,  157
0011ef a09e
0011f0 a4a2
0011f1 a7a5
0011f2 aba9      	.db	  158,  160,  162,  164,   165,  167,  169,  171
0011f3 afad
0011f4 b3b1
0011f5 b7b5
0011f6 bab8      	.db	  173,  175,  177,  179,   181,  183,  184,  186
0011f7 bcbb
0011f8 bebd
0011f9 bfbf
0011fa c0c0      	.db	  187,  188,  189,  190,   191,  191,  192,  192
                 
0011fb c0c0
0011fc bfc0
0011fd bfbf
0011fe bebe      	.db	  192,  192,  192,  191,   191,  191,  190,  190
0011ff bdbd
001200 bcbc
001201 bcbc
001202 bcbc      	.db	  189,  189,  188,  188,   188,  188,  188,  188
001203 bdbd
001204 c0be
001205 c3c1
001206 c6c4      	.db	  189,  189,  190,  192,   193,  195,  196,  198
001207 cbc9
001208 d1ce
001209 d7d4
00120a ddda      	.db	  201,  203,  206,  209,   212,  215,  218,  221
                 
00120b e3e0
00120c e9e6
00120d eeec
00120e f2f0      	.db	  224,  227,  230,  233,   236,  238,  240,  242
00120f f5f4
001210 f5f5
001211 f4f5
001212 f0f2      	.db	  244,  245,  245,  245,   245,  244,  242,  240
001213 eaed
001214 e2e6
001215 d7dd
001216 cbd1      	.db	  237,  234,  230,  226,   221,  215,  209,  203
001217 bcc4
001218 acb4
001219 9ba3
00121a 8992      	.db	  196,  188,  180,  172,   163,  155,  146,  137
                 
                 ; 16 wavetables. Each is 256 bytes, 16-bit signed samples.
                 WAVES:
                 ; WAVETABLE BANK A
                 ;
                 ; sawtooth
00121b 0000
00121c 0100
00121d 0200
00121e 02ff
00121f 03ff
001220 04ff
001221 0600
001222 06ff
001223 0801
001224 08ff
001225 0a00
001226 0b00
001227 0c00
001228 0d00
001229 0e00
00122a 0f00
00122b 1000
00122c 10ff
00122d 1200
00122e 1300
00122f 13ff
001230 1500
001231 1600
001232 1701
001233 1800
001234 1900
001235 1a00
001236 1b00
001237 1c00
001238 1d00
001239 1e00
00123a 1f01
00123b 2000
00123c 2100
00123d 2200
00123e 2300
00123f 2400
001240 2500
001241 2600
001242 2700
001243 2800
001244 2900
001245 29ff
001246 2b00
001247 2bff
001248 2d00
001249 2dff
00124a 2eff
00124b 2fff
00124c 30ff
00124d 31ff
00124e 32ff
00124f 3401
001250 34fe
001251 3601
001252 36fd
001253 3802
001254 38fc
001255 3a03
001256 3afb
001257 3c04
001258 3cfa
001259 3e05
00125a 3efa
00125b 4007
00125c 40f8
00125d 4206
00125e 42f9
00125f 4405
001260 44fb
001261 4603
001262 46fe
001263 4800
001264 4901
001265 49fa
001266 4b08
001267 4bf2
001268 4d10
001269 4dea
00126a 4f1b
00126b 4fe0
00126c 5124
00126d 51d5
00126e 532f
00126f 53cb
001270 5536
001271 55c4
001272 573c
001273 57c1
001274 593d
001275 59c3
001276 5b38
001277 5bcc
001278 5d2a
001279 5dde
00127a 5f15
00127b 5ff8
00127c 60f6
00127d 621c
00127e 62cd
00127f 6448
001280 649d
001281 667d
001282 6666
001283 68b5
001284 682c
001285 6aef
001286 69f4
001287 6d26
001288 6bc0
001289 6f52
00128a 6d9b
00128b 7170
00128c 6f88
00128d 7376
00128e 7191
00128f 755a
001290 73c3
001291 770f
001292 762c
001293 7880
001294 78ed
001295 797b
001296 7c51
001297 7980
001298 7fff
001299 7629
00129a 7fff
00129b cba0
00129c 8001
00129d 8e41
00129e 8000
00129f 8abd
0012a0 8000
0012a1 8a79
0012a2 834c
0012a3 8b16
0012a4 8676
0012a5 8c15
0012a6 8957
0012a7 8d4d
0012a8 8c09
0012a9 8eaf
0012aa 8e94
0012ab 9035
0012ac 90ff
0012ad 91d8
0012ae 934d
0012af 9397
0012b0 9581
0012b1 956e
0012b2 97a0
0012b3 975a
0012b4 99aa
0012b5 9958
0012b6 9ba6
0012b7 9b62
0012b8 9d97
0012b9 9d74
0012ba 9f80
0012bb 9f8e
0012bc a166
0012bd a1a9
0012be a34b
0012bf a3c4
0012c0 a52f
0012c1 a5de
0012c2 a719
0012c3 a7f4
0012c4 a906
0012c5 aa03
0012c6 aaf7
0012c7 ac0f
0012c8 aced
0012c9 ae18
0012ca aee8
0012cb b01b
0012cc b0e6
0012cd b21b
0012ce b2e7
0012cf b41a
0012d0 b4e9
0012d1 b616
0012d2 b6ee
0012d3 b812
0012d4 b8f2
0012d5 ba0d
0012d6 baf6
0012d7 bc09
0012d8 bcfa
0012d9 be05
0012da befd
0012db c003
0012dc c0ff
0012dd c201
0012de c302
0012df c400
0012e0 c502
0012e1 c5fe
0012e2 c702
0012e3 c7ff
0012e4 c903
0012e5 c9ff
0012e6 cb02
0012e7 cbff
0012e8 cd02
0012e9 cdff
0012ea cf01
0012eb cfff
0012ec d101
0012ed d1ff
0012ee d301
0012ef d400
0012f0 d501
0012f1 d600
0012f2 d701
0012f3 d800
0012f4 d900
0012f5 da00
0012f6 db00
0012f7 dc00
0012f8 dd01
0012f9 de00
0012fa df01
0012fb e001
0012fc e0ff
0012fd e200
0012fe e301
0012ff e400
001300 e500
001301 e600
001302 e700
001303 e801
001304 e900
001305 ea00
001306 eb00
001307 ec00
001308 ed00
001309 ee00
00130a ef00
00130b f000
00130c f100
00130d f200
00130e f301
00130f f401
001310 f500
001311 f600
001312 f701
001313 f800
001314 f900
001315 fa00
001316 fb00
001317 fc00
001318 fd01
001319 fe00
00131a ff00      .dw 0,   256,   512,   767,  1023,  1279,  1536,  1791,  2049,   2303,  2560,  2816,  3072,  3328,  3584,  3840,  4096,  4351,  4608,   4864,  5119,  5376,  5632,  5889,  6144,  6400,  6656,  6912,  7168,   7424,  7680,  7937,  8192,  8448,  8704,  8960,                   9216,  9472,  9728,   9984, 10240, 10496, 10751, 11008, 11263, 11520, 11775, 12031, 12287,  12543, 12799, 13055, 13313, 13566, 13825, 14077, 14338, 14588, 14851,  15099, 15364, 15610, 15877, 16122, 16391, 16632, 16902, 17145, 17413,  17659, 17923, 18174,00131b 00a2
00131c 02d6
00131d 0509
00131e 073f
00131f 0978
001320 0baf
001321 0de9
001322 1023
001323 1260
001324 1499
001325 16d7
001326 1916
001327 1b55
001328 1d92
001329 1fd5
00132a 2214
00132b 2456
00132c 2696
00132d 28d9
00132e 2b1a
00132f 2d5e
001330 2fa0
001331 31e7
001332 342a
001333 366f
001334 38b4
001335 3afb
001336 3d3e
001337 3f85
001338 41cc
001339 4410
00133a 465a
00133b 489e
00133c 4ae7
00133d 4d2d
00133e 4f77
00133f 51bb
001340 5407
001341 5649
001342 5897
001343 5ad9
001344 5d28
001345 5f67
001346 61b8
001347 63f8
001348 664b
001349 6889
00134a 6adc
00134b 6d1b
00134c 6f6d
00134d 71ac
00134e 7400
00134f 763f
001350 7892
001351 7acd
001352 7d3c
001353 7e2d
001354 6e49
001355 518a
001356 3ae8
001357 2d62
001358 25a6
001359 211a
00135a 1eb1
00135b 1d6c
00135c 1d00
00135d 1cff
00135e 1d5e
00135f 1de9
001360 1ea1
001361 1f77
001362 205d
001363 215f
001364 2266
001365 238e
001366 24ad
001367 25f1
001368 272a
001369 2889
00136a 29d7
00136b 2b4c
00136c 2cae
00136d 2e38
00136e 2faf
00136f 314b
001370 32d6
001371 3480
001372 3621
001373 37d7
001374 398d
001375 3b4a
001376 3d19
001377 3ed8
001378 40bd
001379 4281
00137a 447e
00137b 4640
00137c 4855
00137d 4a14
00137e 4c3f
00137f 4dfb
001380 503f
001381 51f5
001382 544f
001383 55fe
001384 586c
001385 5a19
001386 5c98
001387 5e42
001388 60cd
001389 6274
00138a 6516
00138b 6653
00138c 59ea
00138d 496d
00138e 2ee5
00138f 153c
001390 ff01
001391 eca5
001392 df91
001393 d4e9
001394 cd85
001395 c741
001396 c330
001397 bf96
001398 bd82
001399 bb8e
00139a baad
00139b b9c1
00139c b999
00139d b959
00139e b9a2
00139f b9d4
0013a0 ba62
0013a1 bae3
0013a2 bb9e
0013a3 bc57
0013a4 bd2e
0013a5 be10
0013a6 befd
0013a7 bfff
0013a8 c0fd
0013a9 c217
0013aa c323
0013ab c452
0013ac c56e
0013ad c6ac
0013ae c7d4
0013af c921
0013b0 ca57
0013b1 cbb0
0013b2 ccf6
0013b3 ce55
0013b4 cfa7
0013b5 d112
0013b6 d272
0013b7 d3e5
0013b8 d553
0013b9 d6cb
0013ba d845
0013bb d9c7
0013bc db4e
0013bd dcd4
0013be de67
0013bf dff3
0013c0 e192
0013c1 e328
0013c2 e4cf
0013c3 e66b
0013c4 e81b
0013c5 e9bd
0013c6 eb76
0013c7 ed21
0013c8 eee3
0013c9 f093
0013ca f25d
0013cb f415
0013cc f5e4
0013cd f7a3
0013ce f97a
0013cf fb3f
0013d0 fd1c
0013d1 fee4
0013d2 00e0
0013d3 0165
0013d4 f114
0013d5 d3ef
0013d6 bce5
0013d7 af01
0013d8 a6e3
0013d9 a1fb
0013da 9f36
0013db 9d99
0013dc 9cd5
0013dd 9c81
0013de 9c91
0013df 9ccb
0013e0 9d39
0013e1 9dbd
0013e2 9e61
0013e3 9f16
0013e4 9fe2
0013e5 a0bb
0013e6 a1a5
0013e7 a2a0
0013e8 a3a6
0013e9 a4bd
0013ea a5dd
0013eb a70e
0013ec a847
0013ed a98e
0013ee aadf
0013ef ac3f
0013f0 ada4
0013f1 af15
0013f2 b08f
0013f3 b216
0013f4 b3a0
0013f5 b539
0013f6 b6d5
0013f7 b87d
0013f8 ba2a
0013f9 bbe1
0013fa bd9d
0013fb bf61
0013fc c129
0013fd c2f9
0013fe c4d1
0013ff c6ab
001400 c88e
001401 ca72
001402 cc5e
001403 ce4e
001404 d043
001405 d23c
001406 d439
001407 d639
001408 d83e
001409 da47
00140a dc53
00140b de61
00140c e074
00140d e28a
00140e e4a2
00140f e6be
001410 e8da
001411 eaf9
001412 ed1b
001413 ef40
001414 f166
001415 f38e
001416 f5b8
001417 f7e4
001418 fa12
001419 fc42
00141a fe72       18432, 18689, 18938, 19208, 19442, 19728, 19946,  20251, 20448, 20772, 20949, 21295, 21451, 21814, 21956, 22332, 22465,  22845, 22979, 23352, 23500, 23850, 24030, 24341, 24568, 24822, 25116,  25293, 25672, 25757, 26237, 26214, 26805, 26668, 27375, 27124,                  27942,  27584, 28498, 28059, 29040, 28552, 29558, 29073, 30042, 29635, 30479,  30252, 30848, 30957, 31099, 31825, 31104, 32767, 30249, 32767,-13408, -32767,-29119,-32768,-30019,-32768,-30087,-31924,-29930,-31114,-29675, -30377,-29363,-29687,-29009,-2903600141b 0000
00141c 7fff
00141d 75f4
00141e 7fff
00141f 7b60
001420 7fff
001421 7d81
001422 7fff
001423 7eb5
001424 7fff
001425 7f7d
001426 7fff
001427 7fff
001428 7fc5
001429 7fff
00142a 7f7a
00142b 7fff
00142c 7f4d
00142d 7fff
00142e 7f39
00142f 7fff
001430 7f39
001431 7fff
001432 7f47
001433 7fff
001434 7f5e
001435 7fff
001436 7f7b
001437 7fff
001438 7f9b
001439 7fff
00143a 7fbb
00143b 7fff
00143c 7fd7
00143d 7fff
00143e 7ff0
00143f 7fff
001440 7fff
001441 7ff3
001442 7fff
001443 7fe8
001444 7fff
001445 7fe0
001446 7fff
001447 7fde
001448 7fff
001449 7fde
00144a 7fff
00144b 7fe2
00144c 7fff
00144d 7fe7
00144e 7fff
00144f 7fee
001450 7fff
001451 7ff3
001452 7fff
001453 7ff9
001454 7fff
001455 7ffd
001456 7ffe
001457 7fff
001458 7ffc
001459 7fff
00145a 7ffb
00145b 7fff
00145c 7ffa
00145d 7fff
00145e 7ffc
00145f 7fff
001460 7fff
001461 7ffe
001462 7fff
001463 7ffa
001464 7fff
001465 7ff4
001466 7fff
001467 7fed
001468 7fff
001469 7fe8
00146a 7fff
00146b 7fe3
00146c 7fff
00146d 7fdf
00146e 7fff
00146f 7fdd
001470 7fff
001471 7fe0
001472 7fff
001473 7fe7
001474 7fff
001475 7ff2
001476 7fff
001477 7fff
001478 7fef
001479 7fff
00147a 7fd7
00147b 7fff
00147c 7fba
00147d 7fff
00147e 7f9a
00147f 7fff
001480 7f7b
001481 7fff
001482 7f5e
001483 7fff
001484 7f46
001485 7fff
001486 7f39
001487 7fff
001488 7f39
001489 7fff
00148a 7f4e
00148b 7fff
00148c 7f7a
00148d 7fff
00148e 7fc4
00148f 7fff
001490 7fff
001491 7f7d
001492 7fff
001493 7eb5
001494 7fff
001495 7d81
001496 7fff
001497 7b61
001498 7fff
001499 75f4
00149a 7fff
00149b 0000
00149c 8001
00149d 8a0c
00149e 8000
00149f 849f
0014a0 8000
0014a1 827f
0014a2 8001
0014a3 814c
0014a4 8000
0014a5 8083
0014a6 8000
0014a7 8000
0014a8 803c
0014a9 8000
0014aa 8086
0014ab 8000
0014ac 80b2
0014ad 8000
0014ae 80c7
0014af 8000
0014b0 80c7
0014b1 8000
0014b2 80bb
0014b3 8000
0014b4 80a2
0014b5 8001
0014b6 8085
0014b7 8000
0014b8 8065
0014b9 8000
0014ba 8045
0014bb 8000
0014bc 8029
0014bd 8000
0014be 8010
0014bf 8000
0014c0 8000
0014c1 800e
0014c2 8000
0014c3 801a
0014c4 8000
0014c5 801f
0014c6 8000
0014c7 8022
0014c8 8000
0014c9 8022
0014ca 8000
0014cb 801e
0014cc 8000
0014cd 8019
0014ce 8000
0014cf 8013
0014d0 8000
0014d1 800d
0014d2 8000
0014d3 8007
0014d4 8000
0014d5 8002
0014d6 8001
0014d7 8001
0014d8 8004
0014d9 8000
0014da 8006
0014db 8000
0014dc 8005
0014dd 8000
0014de 8005
0014df 8000
0014e0 8001
0014e1 8002
0014e2 8000
0014e3 8007
0014e4 8001
0014e5 800d
0014e6 8000
0014e7 8012
0014e8 8000
0014e9 8018
0014ea 8000
0014eb 801d
0014ec 8000
0014ed 8021
0014ee 8000
0014ef 8022
0014f0 8001
0014f1 801f
0014f2 8001
0014f3 8019
0014f4 8000
0014f5 800d
0014f6 8000
0014f7 8000
0014f8 8011
0014f9 8000
0014fa 802a
0014fb 8001
0014fc 8045
0014fd 8000
0014fe 8065
0014ff 8000
001500 8085
001501 8000
001502 80a2
001503 8001
001504 80ba
001505 8000
001506 80c7
001507 8000
001508 80c6
001509 8000
00150a 80b2
00150b 8000
00150c 8086
00150d 8000
00150e 803c
00150f 8001
001510 8000
001511 8082
001512 8001
001513 814c
001514 8000
001515 827f
001516 8000
001517 849f
001518 8001
001519 8a0c
00151a 8000      ,-28619,-28417,-28200,-27827,-27753, -27263,-27282,-26720,-26790,-26198,-26280,-25690,-25758,-25193,-25228, -24704,-24690,-24218,-24151,-23733,-23612,-23249,-23074,-22759,-22540, -22266,-22013,-21769,-21489,-21267,-20968,-20760,-20453,-20250,-19941, -1973                 7,-19430,-19223,-18922,-18706,-18414,-18190,-17907,-17674,-17399, -17158,-16891,-16643,-16381,-16129,-15871,-15614,-15360,-15102,-14850, -14590,-14337,-14077,-13825,-13566,-13313,-13054,-12801,-12543,-12289, -12031,-11777,-11519,-11264,-11007,-10752,-104900151b 020f
00151c 14d6
00151d 2586
00151e 32fb
00151f 3e09
001520 4656
001521 4ca6
001522 50c8
001523 5364
001524 5434
001525 53a4
001526 5156
001527 4d77
001528 478a
001529 3f8a
00152a 34f5
00152b 27c7
00152c 17a3
00152d 04cc
00152e ef58
00152f d820
001530 c015
001531 a8ff
001532 94d6
001533 8651
001534 8023
001535 8517
001536 9702
001537 b649
001538 dff8
001539 0e04
00153a 3bf0
00153b 603d
00153c 71f3
00153d 6c3e
00153e 4ef9
00153f 1eb2
001540 e4ee
001541 ae2c
001542 8905
001543 819d
001544 9ef1
001545 da92
001546 20e9
001547 5bc5
001548 72ed
001549 5cad
00154a 21e6
00154b d6dc
00154c 985e
00154d 800f
00154e 9e17
00154f e757
001550 39ce
001551 6def
001552 67b4
001553 2be3
001554 d7a3
001555 9304
001556 822b
001557 b356
001558 0c77
001559 5b2f
00155a 71b0
00155b 437a
00155c ed5e
00155d 9d3f
00155e 8087
00155f ac5e
001560 07ab
001561 5a44
001562 7180
001563 4089
001564 e7ee
001565 98e6
001566 8169
001567 b350
001568 1027
001569 5f0b
00156a 7025
00156b 3c26
00156c e46e
00156d 9843
00156e 8122
00156f af3b
001570 070b
001571 5710
001572 72b6
001573 4de3
001574 0072
001575 b06f
001576 831a
001577 8ee6
001578 cef2
001579 21a3
00157a 61b3
00157b 71df
00157c 4f5e
00157d 0ce1
00157e c438
00157f 8fc3
001580 80b7
001581 9d12
001582 d8ec
001583 1d4f
001584 5611
001585 7194
001586 6ab5
001587 4809
001588 145e
001589 dce9
00158a ac92
00158b 8c4a
00158c 8044
00158d 898d
00158e a49f
00158f cbd5
001590 f658
001591 1ef6
001592 428a
001593 5cc9
001594 6cac
001595 72ca
001596 70c9
001597 68a5
001598 5c60
001599 4dc6
00159a 3e54
00159b 2f30
00159c 2132
00159d 14e1
00159e 0a9c
00159f 0295
0015a0 fce3
0015a1 f991
0015a2 f8a0
0015a3 fa11
0015a4 fde5
0015a5 0418
0015a6 0c9e
0015a7 1760
0015a8 241e
0015a9 327e
0015aa 41d4
0015ab 5140
0015ac 5f7c
0015ad 6af5
0015ae 71c5
0015af 71d7
0015b0 6932
0015b1 5655
0015b2 38ff
0015b3 131d
0015b4 e94f
0015b5 be87
0015b6 99f6
0015b7 83f5
0015b8 81b8
0015b9 9565
0015ba bccd
0015bb f1bc
0015bc 29f4
0015bd 58f1
0015be 7153
0015bf 6955
0015c0 3e24
0015c1 fc4a
0015c2 b82b
0015c3 88d7
0015c4 8350
0015c5 a93a
0015c6 ed94
0015c7 377e
0015c8 6a10
0015c9 6d33
0015ca 398e
0015cb e693
0015cc 9b7b
0015cd 801e
0015ce a31c
0015cf f168
0015d0 446d
0015d1 7170
0015d2 5af4
0015d3 0a4a
0015d4 aed9
0015d5 807e
0015d6 9cb8
0015d7 ef6b
0015d8 4853
0015d9 72a0
0015da 4ece
0015db f1cd
0015dc 99b1
0015dd 81ff
0015de b965
0015df 1865
0015e0 64b7
0015e1 6aca
0015e2 22aa
0015e3 bde4
0015e4 8246
0015e5 98c6
0015e6 ed63
0015e7 4954
0015e8 72bc
0015e9 4aec
0015ea eba4
0015eb 960c
0015ec 830d
0015ed bbcc
0015ee 1876
0015ef 62eb
0015f0 6d9f
0015f1 2f9c
0015f2 d0c9
0015f3 8ae8
0015f4 87b8
0015f5 c3d1
0015f6 1af4
0015f7 606b
0015f8 70bf
0015f9 4198
0015fa eda2
0015fb a0c7
0015fc 8000
0015fd 98d1
0015fe d9ae
0015ff 2691
001600 6075
001601 7280
001602 54c5
001603 14e0
001604 cd2f
001605 9532
001606 801c
001607 9093
001608 bd36
001609 f7cd
00160a 3103
00160b 5c60
00160c 7163
00160d 6d1e
00160e 51ca
00160f 268f
001610 f673
001611 c8d0
001612 a2e8
001613 8ab3
001614 807a
001615 835e
001616 901f
001617 a429
001618 bc11
001619 d5c1
00161a eeb1      5,-10240, -9984, -9728,  -9472, -9216, -8959, -8704, -8447, -8191, -7937, -7680, -7423, -7168,  -6912, -6656, -6400, -6143, -5888, -5632, -5376, -5120, -4864, -4608,  -4352, -4096, -3840, -3584, -3327, -3071, -2816, -2560, -2303, -2048,  -1792, -1536, -12                 80, -1024,  -767,  -512,  -256
00161b 1666
00161c 503b
00161d 4f2f
00161e 5f4d
00161f 6079
001620 6ad4
001621 6cbd
001622 74fd
001623 77d3
001624 7fa7
001625 7f6f
001626 7fff
001627 7f9b
001628 7fff
001629 7fcf
00162a 7fff
00162b 7ff8
00162c 7ff4
00162d 7fff
00162e 7fda
00162f 7fff
001630 7fc9
001631 7fff
001632 7fc1
001633 7fff
001634 7fbe
001635 7fff
001636 7fc0
001637 7fff
001638 7fc8
001639 7fff
00163a 7fd1
00163b 7fff
00163c 7fdb
00163d 7fff
00163e 7fe6
00163f 7fff
001640 7fef
001641 7fff
001642 7ff8
001643 7fff
001644 7fff
001645 7ffc
001646 7fff
001647 7ff8
001648 7fff
001649 7ff5
00164a 7fff
00164b 7ff4
00164c 7fff
00164d 7ff4
00164e 7fff
00164f 7ff7
001650 7fff
001651 7ff8
001652 7fff
001653 7ffa
001654 7fff
001655 7ffc
001656 7fff
001657 7ffe
001658 7fff
001659 7fff
00165a 7ffe
00165b 7fff
00165c 7ffc
00165d 7fff
00165e 7ffc
00165f 7fff
001660 7ffd
001661 7fff
001662 7ffe
001663 7fff
001664 7ffe
001665 7ffe
001666 7fff
001667 7ffa
001668 7fff
001669 7ff8
00166a 7fff
00166b 7ff4
00166c 7fff
00166d 7ff0
00166e 7fff
00166f 7fec
001670 7fff
001671 7fe9
001672 7fff
001673 7fe8
001674 7fff
001675 7fe9
001676 7fff
001677 7fec
001678 7fff
001679 7ff4
00167a 7fff
00167b 7ffd
00167c 7ffb
00167d 7fff
00167e 7fec
00167f 7fff
001680 7fdb
001681 7fff
001682 7fc7
001683 7fff
001684 7fb2
001685 7fff
001686 7f9e
001687 7fff
001688 7f8b
001689 7fff
00168a 7f7e
00168b 7fff
00168c 7f78
00168d 7fff
00168e 7f79
00168f 7fff
001690 7f88
001691 7fff
001692 7bc0
001693 7692
001694 7194
001695 6bf0
001696 6751
001697 5f85
001698 5b0b
001699 4d96
00169a 49c0
00169b ea39
00169c afff
00169d b0f3
00169e a0d6
00169f 9f99
0016a0 9519
0016a1 9329
0016a2 8af2
0016a3 8811
0016a4 8047
0016a5 8090
0016a6 8000
0016a7 8063
0016a8 8001
0016a9 802f
0016aa 8000
0016ab 8007
0016ac 800d
0016ad 8000
0016ae 8027
0016af 8000
0016b0 8037
0016b1 8000
0016b2 8041
0016b3 8000
0016b4 8043
0016b5 8001
0016b6 803f
0016b7 8000
0016b8 8039
0016b9 8000
0016ba 802f
0016bb 8000
0016bc 8025
0016bd 8000
0016be 801b
0016bf 8000
0016c0 8010
0016c1 8001
0016c2 8008
0016c3 8001
0016c4 8001
0016c5 8004
0016c6 8000
0016c7 8008
0016c8 8000
0016c9 800b
0016ca 8000
0016cb 800c
0016cc 8000
0016cd 800b
0016ce 8000
0016cf 800b
0016d0 8000
0016d1 8008
0016d2 8000
0016d3 8006
0016d4 8000
0016d5 8004
0016d6 8000
0016d7 8002
0016d8 8001
0016d9 8000
0016da 8003
0016db 8000
0016dc 8003
0016dd 8000
0016de 8004
0016df 8000
0016e0 8004
0016e1 8000
0016e2 8003
0016e3 8001
0016e4 8002
0016e5 8003
0016e6 8000
0016e7 8005
0016e8 8000
0016e9 8008
0016ea 8000
0016eb 800c
0016ec 8000
0016ed 8010
0016ee 8000
0016ef 8014
0016f0 8001
0016f1 8016
0016f2 8001
0016f3 8017
0016f4 8000
0016f5 8017
0016f6 8000
0016f7 8014
0016f8 8001
0016f9 800d
0016fa 8001
0016fb 8004
0016fc 8004
0016fd 8000
0016fe 8013
0016ff 8000
001700 8025
001701 8000
001702 8038
001703 8001
001704 804d
001705 8000
001706 8062
001707 8000
001708 8074
001709 8000
00170a 8082
00170b 8000
00170c 8089
00170d 8000
00170e 8088
00170f 8001
001710 807a
001711 8000
001712 8459
001713 8972
001714 8e54
001715 93fd
001716 98a1
001717 a05e
001718 a4d4
001719 b25f
00171a b695      ; blended 4 
                 .dw  162,   726,  1289,  1855,  2424,  2991,  3561,  4131,  4704,   5273,  5847,  6422,  6997,  7570,  8149,  8724,  9302,  9878, 10457,  11034, 11614, 12192, 12775, 13354, 13935, 14516, 15099, 15678, 16261,  16844, 17424, 18010, 18590, 19175, 19757, 203400171b 0287
00171c 0779
00171d 0c99
00171e 1199
00171f 16bd
001720 1bb1
001721 20b7
001722 2582
001723 2a62
001724 2ef0
001725 3387
001726 37cd
001727 3c0f
001728 4010
001729 43f6
00172a 47ac
00172b 4b33
00172c 4e9d
00172d 51c3
00172e 54f7
00172f 57b6
001730 5ab6
001731 5d12
001732 5fe4
001733 61e2
001734 6491
001735 6636
001736 68c0
001737 6a13
001738 6c7a
001739 6d86
00173a 6fc5
00173b 709b
00173c 72aa
00173d 735b
00173e 752d
00173f 75d1
001740 7753
001741 7800
001742 791b
001743 79f2
001744 7a95
001745 7ba8
001746 7bb8
001747 7d2c
001748 7c93
001749 7e7a
00174a 7d26
00174b 7f96
00174c 7d78
00174d 7fff
00174e 7d90
00174f 7fff
001750 7cfc
001751 7f78
001752 7937
001753 7c6f
001754 7549
001755 7951
001756 7129
001757 7682
001758 6c6c
001759 75ac
00175a 5905
00175b 9d41
00175c 898b
00175d 91f0
00175e 8b84
00175f 9187
001760 8c36
001761 9197
001762 8ce7
001763 91e0
001764 8dd6
001765 9254
001766 8efa
001767 92f0
001768 9056
001769 93c6
00176a 91ed
00176b 94ce
00176c 93b4
00176d 961b
00176e 95b5
00176f 97a9
001770 97eb
001771 9985
001772 9a5a
001773 9bb5
001774 9d0b
001775 9e39
001776 9ffc
001777 a116
001778 a331
001779 a45c
00177a a6bb
00177b a807
00177c aa9d
00177d ac15
00177e aedf
00177f b09d
001780 b390
001781 b59c
001782 b8b2
001783 bb12
001784 be51
001785 c110
001786 c478
001787 c790
001788 cb1e
001789 ce8e
00178a d24e
00178b d611
00178c d9fc
00178d ddfd
00178e e205
00178f e63e
001790 ea61
001791 eeb3
001792 f2da
001793 f723
001794 fb37
001795 ff66
001796 034d
001797 0743
001798 0aca
001799 0e04
00179a 1114
00179b 1419
00179c 16f8
00179d 19bc
00179e 1c5e
00179f 1ee4
0017a0 2152
0017a1 239e
0017a2 25d4
0017a3 27e6
0017a4 29e2
0017a5 2bc4
0017a6 2d92
0017a7 2f44
0017a8 30dd
0017a9 3266
0017aa 33ce
0017ab 3533
0017ac 366a
0017ad 37ac
0017ae 38b1
0017af 39d6
0017b0 3aaf
0017b1 3bb9
0017b2 3c63
0017b3 3d51
0017b4 3dd6
0017b5 3eae
0017b6 3f10
0017b7 3fcd
0017b8 4011
0017b9 40b1
0017ba 40e6
0017bb 4161
0017bc 418d
0017bd 41e3
0017be 420e
0017bf 4236
0017c0 426b
0017c1 4263
0017c2 42aa
0017c3 426b
0017c4 42ce
0017c5 424d
0017c6 42d2
0017c7 4217
0017c8 42c2
0017c9 41c5
0017ca 4291
0017cb 415d
0017cc 4250
0017cd 40e7
0017ce 41f3
0017cf 405a
0017d0 4184
0017d1 3fb9
0017d2 4117
0017d3 3ed9
0017d4 413b
0017d5 38e1
0017d6 2c44
0017d7 3007
0017d8 2f63
0017d9 32b2
0017da 317f
0017db 35e5
0017dc 32f9
0017dd 3a02
0017de 3261
0017df 4353
0017e0 fa74
0017e1 b687
0017e2 c5b5
0017e3 bb01
0017e4 c029
0017e5 ba14
0017e6 bc5b
0017e7 b84f
0017e8 b921
0017e9 b653
0017ea b62b
0017eb b432
0017ec b368
0017ed b213
0017ee b0da
0017ef affb
0017f0 ae77
0017f1 adf0
0017f2 ac4b
0017f3 ac01
0017f4 aa58
0017f5 aa3c
0017f6 a8a2
0017f7 a8a7
0017f8 a736
0017f9 a74f
0017fa a619
0017fb a646
0017fc a55c
0017fd a59c
0017fe a506
0017ff a55f
001800 a529
001801 a5ab
001802 a5de
001803 a692
001804 a733
001805 a82a
001806 a946
001807 aa95
001808 ac33
001809 adec
00180a b017
00180b b24f
00180c b511
00180d b7e1
00180e bb43
00180f beb0
001810 c2c2
001811 c6dd
001812 cba2
001813 d073
001814 d5d6
001815 db57
001816 e161
001817 e77b
001818 ee0f
001819 f49b
00181a fba3      3, 20923, 21511, 22089,  22679, 23257, 23848, 24423, 25016, 25592, 26187, 26761, 27356, 27931,  28525, 29100, 29696, 30271, 30866, 31437, 32060, 32301, 28233, 20874,  15080, 11618,  9638,  8474,  7857,  7532,  7424,  7423,  7518,  7657,   7841,  8055,  82                 85,  8543,  8806,  9102,  9389,  9713, 10026, 10377,  10711, 11084, 11438, 11832, 12207, 12619, 13014, 13440, 13857, 14295,  14733, 15178, 15641, 16088, 16573, 17025, 17534, 17984, 18517, 18964,  19519, 19963, 20543, 20981, 21583, 22014, 22636, 23065, 23700181b 01e7
00181c 054f
00181d 0632
00181e 05ae
00181f 05a2
001820 06b4
001821 0846
001822 0967
001823 0a9d
001824 0ca9
001825 0fe1
001826 1472
001827 1a6e
001828 20ff
001829 26fe
00182a 2c15
00182b 314b
00182c 37bf
00182d 3edc
00182e 44dd
00182f 49bc
001830 4fce
001831 58e4
001832 63d7
001833 6d9c
001834 7494
001835 79bf
001836 7e24
001837 7fff
001838 7ccd
001839 73ca
00183a 685c
00183b 5ed6
00183c 594d
00183d 574d
00183e 587a
00183f 5d89
001840 65d5
001841 6d89
001842 6fda
001843 6bab
001844 6506
001845 610b
001846 60a7
001847 6063
001848 5cc5
001849 557f
00184a 4c8a
00184b 4371
00184c 3a7b
00184d 31d1
00184e 2a45
00184f 24bb
001850 21b4
001851 214c
001852 22ee
001853 2527
001854 2646
001855 2561
001856 229b
001857 1e76
001858 198d
001859 1537
00185a 135c
00185b 1487
00185c 169c
00185d 1623
00185e 10d8
00185f 0732
001860 fbe0
001861 f22b
001862 ec74
001863 eb0d
001864 ebfb
001865 ecc4
001866 ec97
001867 ec5c
001868 ec7e
001869 ebd0
00186a e92e
00186b e583
00186c e32a
00186d e381
00186e e62b
00186f ea82
001870 f047
001871 f655
001872 f9f1
001873 f87a
001874 f261
001875 eb7c
001876 e7f8
001877 e8c1
001878 eb19
001879 eb35
00187a e75b
00187b e0c8
00187c d9c3
00187d d3b5
00187e cf6b
00187f ce98
001880 d363
001881 ddd9
001882 ea26
001883 f2b6
001884 f43c
001885 ef64
001886 e6f3
001887 dd46
001888 d3aa
001889 caf4
00188a c3b7
00188b bde5
00188c b8ee
00188d b441
00188e afb0
00188f abaf
001890 a978
001891 aa7b
001892 af18
001893 b629
001894 bdf3
001895 c544
001896 cb1a
001897 ce08
001898 cce1
001899 c85c
00189a c29b
00189b bd17
00189c b7c7
00189d b2ae
00189e aef4
00189f ad77
0018a0 ad49
0018a1 ace8
0018a2 accc
0018a3 af2a
0018a4 b538
0018a5 be06
0018a6 c830
0018a7 d336
0018a8 de60
0018a9 e757
0018aa eb88
0018ab eaa8
0018ac e6ff
0018ad e316
0018ae e038
0018af df0c
0018b0 e078
0018b1 e52c
0018b2 ec97
0018b3 f4d6
0018b4 fbcc
0018b5 0057
0018b6 02e4
0018b7 052a
0018b8 08bf
0018b9 0da1
0018ba 123d
0018bb 14fb
0018bc 157d
0018bd 146f
0018be 12b6
0018bf 1115
0018c0 104f
0018c1 10df
0018c2 12c2
0018c3 15d3
0018c4 19ef
0018c5 1e46
0018c6 2125
0018c7 2141
0018c8 1f1a
0018c9 1c76
0018ca 1a73
0018cb 18f2
0018cc 17d9
0018cd 17b1
0018ce 1836
0018cf 1786
0018d0 13ef
0018d1 0e2e
0018d2 08f2
0018d3 0642
0018d4 05ec
0018d5 0683
0018d6 06e0
0018d7 0681
0018d8 0585
0018d9 04e1
0018da 05a5
0018db 07a9
0018dc 094a
0018dd 08b1
0018de 052a
0018df ff39
0018e0 f7e4
0018e1 f08e
0018e2 eabe
0018e3 e700
0018e4 e463
0018e5 e201
0018e6 e087
0018e7 e169
0018e8 e4de
0018e9 e97e
0018ea ede6
0018eb f178
0018ec f321
0018ed f12f
0018ee ebca
0018ef e622
0018f0 e3ce
0018f1 e51b
0018f2 e751
0018f3 e872
0018f4 e973
0018f5 ebed
0018f6 ef50
0018f7 f198
0018f8 f1db
0018f9 f0e5
0018fa efb5
0018fb ee43
0018fc ec45
0018fd ea8d
0018fe ea6f
0018ff ebf7
001900 ed72
001901 ecff
001902 eadf
001903 e9fa
001904 ed07
001905 f339
001906 f8a5
001907 fa21
001908 f7d5
001909 f466
00190a f1ce
00190b f040
00190c ef99
00190d f00e
00190e f0a0
00190f ef9b
001910 ecd2
001911 ea65
001912 ea99
001913 ed4c
001914 f00d
001915 f178
001916 f275
001917 f3ac
001918 f4fb
001919 f78e
00191a fc99      04, 24130,  24781, 25204, 25878, 26195, 23018, 18797, 12005,  5436,  -255, -4955,  -8303,-11031,-12923,-14527,-15568,-16490,-17022,-17522,-17747,-17983, -18023,-18087,-18014,-17964,-17822,-17693,-17506,-17321,-17106,-16880, -16643,-16385,-16131,-15849,-15                 581,-15278,-14994,-14676,-14380,-14047, -13737,-13392,-13066,-12715,-12377,-12014,-11662,-11291,-10925,-10549, -10171, -9785, -9394, -9004, -8601, -8205, -7790, -7384, -6961, -6549,  -6117, -5699, -5258, -4831, -4381, -3949, -3491, -3051, -2588, -2141,  -00191b 001b
00191c 02a2
00191d 0547
00191e 0858
00191f 0bd4
001920 100e
001921 14c8
001922 1a10
001923 1fd4
001924 2676
001925 2d90
001926 3439
001927 3abe
001928 40e7
001929 46af
00192a 4c87
00192b 510f
00192c 54e5
00192d 5a92
00192e 5e7b
00192f 6233
001930 6629
001931 67b4
001932 6a54
001933 6ee6
001934 7361
001935 7598
001936 768e
001937 7890
001938 7b2e
001939 7dbc
00193a 7eaf
00193b 7f61
00193c 7fac
00193d 77d0
00193e 68d4
00193f 545f
001940 3cc4
001941 26e0
001942 1366
001943 042e
001944 f899
001945 f2dd
001946 f360
001947 f457
001948 f378
001949 f6fe
00194a fece
00194b 02b9
00194c 0219
00194d 0110
00194e ffe9
00194f fbef
001950 f378
001951 e7f0
001952 dcb4
001953 d267
001954 c964
001955 c12a
001956 b9bb
001957 b566
001958 b235
001959 acc4
00195a a554
00195b 9f73
00195c 9c99
00195d 9b67
00195e 9a50
00195f 9b1b
001960 9f89
001961 a416
001962 a701
001963 a9b7
001964 ae93
001965 b6a1
001966 c018
001967 c8ec
001968 d19d
001969 daf7
00196a e2bc
00196b e71d
00196c e98b
00196d ec1c
00196e efef
00196f f31b
001970 f408
001971 f4fa
001972 f63d
001973 f70f
001974 f762
001975 f7d7
001976 fab7
001977 0098
001978 0884
001979 1145
00197a 1bb4
00197b 2795
00197c 322c
00197d 3a4e
00197e 402f
00197f 45cb
001980 4bbc
001981 5123
001982 5613
001983 5a55
001984 5d56
001985 5e29
001986 5bed
001987 579f
001988 52d3
001989 4e1d
00198a 4925
00198b 4432
00198c 3f91
00198d 3b00
00198e 369e
00198f 3272
001990 2f1b
001991 2d2a
001992 2c71
001993 2cdb
001994 2d9a
001995 2e26
001996 2e6e
001997 2dc1
001998 2b6f
001999 2778
00199a 2272
00199b 1ca4
00199c 166a
00199d 100c
00199e 0a15
00199f 04ab
0019a0 fec3
0019a1 f800
0019a2 f097
0019a3 e884
0019a4 e05b
0019a5 d87d
0019a6 d164
0019a7 cb76
0019a8 c684
0019a9 c272
0019aa bf23
0019ab bc9d
0019ac bafa
0019ad ba55
0019ae ba97
0019af bbf6
0019b0 bec0
0019b1 c22b
0019b2 c55e
0019b3 c854
0019b4 caf7
0019b5 cd0c
0019b6 ce41
0019b7 cea2
0019b8 ce9e
0019b9 ce52
0019ba cdc2
0019bb ccc5
0019bc cb7b
0019bd ca77
0019be c9fe
0019bf ca08
0019c0 cb36
0019c1 ce68
0019c2 d3a5
0019c3 da50
0019c4 e1c9
0019c5 e9d7
0019c6 f22d
0019c7 fa19
0019c8 014f
0019c9 0817
0019ca 0e9c
0019cb 14c4
0019cc 1a3d
0019cd 1ec6
0019ce 2262
0019cf 24f7
0019d0 269e
0019d1 2782
0019d2 27c2
0019d3 27b5
0019d4 27c1
0019d5 27ca
0019d6 27a9
0019d7 27d0
0019d8 27fd
0019d9 284c
0019da 28b7
0019db 2978
0019dc 2af7
0019dd 2d1b
0019de 2fa1
0019df 31f4
0019e0 33f0
0019e1 3580
0019e2 365c
0019e3 362b
0019e4 3549
0019e5 33d7
0019e6 31fb
0019e7 2f8e
0019e8 2c2b
0019e9 2744
0019ea 1fbc
0019eb 15ff
0019ec 0bfa
0019ed 0293
0019ee f9b7
0019ef f213
0019f0 eac3
0019f1 e342
0019f2 dd3d
0019f3 d8f7
0019f4 d55a
0019f5 d271
0019f6 d09a
0019f7 cf60
0019f8 ce7c
0019f9 cdec
0019fa cdbc
0019fb cd2f
0019fc cb73
0019fd c903
0019fe c72c
0019ff c59f
001a00 c42b
001a01 c344
001a02 c1ee
001a03 bfc1
001a04 bd72
001a05 bb9e
001a06 b9ca
001a07 b7fc
001a08 b726
001a09 b733
001a0a b795
001a0b b8db
001a0c bb5c
001a0d bed5
001a0e c2ef
001a0f c7da
001a10 cdd9
001a11 d479
001a12 db7d
001a13 e241
001a14 e7cf
001a15 ec83
001a16 f10a
001a17 f4d2
001a18 f7ec
001a19 facc
001a1a fd77      1670, -1217,  -740,  -284,   224,   357, -3820,-11281,-17179,-20735, -22813,-24069,-24778,-25191,-25387,-25471,-25455,-25397,-25287,-25155, -24991,-24810,-24606,-24389,-24155,-23904,-23642,-23363,-23075,-22770, -22457,-22130,-21793,-21441,-21084,-20715,-2                 0337,-19946,-19552,-19143, -18731,-18307,-17878,-17439,-16995,-16543,-16087,-15623,-15151,-14677, -14194,-13710,-13218,-12722,-12221,-11716,-11207,-10695,-10178, -9657,  -9133, -8607, -8076, -7542, -7006, -6466, -5926, -5383, -4837, -4288,  -3738, -3186,                  -2632, -2076, -1518,  -958,  -398
                 ; square
                 .dw 0, 32767, 30196, 32767, 31584, 32767, 32129, 32767, 32437,  32767, 32637, 32767, 32767, 32709, 32767, 32634, 32767, 32589, 32767,  32569, 32767, 32569, 32767, 32583, 32767, 32606, 32767, 32635, 32767,  32667, 32767, 32699, 32767, 32727, 32767, 32752, 001a1b ca35
001a1c 21ad
001a1d 7d4d
001a1e 7285
001a1f 7465
001a20 76c6
001a21 70c8
001a22 7c8f
001a23 4291
001a24 1c99
001a25 2658
001a26 2171
001a27 2437
001a28 22a0
001a29 2371
001a2a 2322
001a2b 2310
001a2c 235f
001a2d 22df
001a2e 237a
001a2f 22c6
001a30 2382
001a31 22c0
001a32 237c
001a33 22c2
001a34 236c
001a35 22cd
001a36 2358
001a37 22da
001a38 2341
001a39 22e8
001a3a 232a
001a3b 22f6
001a3c 2314
001a3d 2302
001a3e 2300
001a3f 230a
001a40 22f0
001a41 230e
001a42 22e4
001a43 230e
001a44 22de
001a45 2309
001a46 22dc
001a47 2300
001a48 22df
001a49 22f0
001a4a 22e4
001a4b 22df
001a4c 22ee
001a4d 22cb
001a4e 22fb
001a4f 22b5
001a50 2308
001a51 229d
001a52 2314
001a53 2287
001a54 2320
001a55 2275
001a56 2326
001a57 2268
001a58 2326
001a59 2263
001a5a 231e
001a5b 2269
001a5c 2308
001a5d 227b
001a5e 22e2
001a5f 22a1
001a60 22aa
001a61 22dc
001a62 2259
001a63 2335
001a64 21e2
001a65 23b6
001a66 213a
001a67 247a
001a68 2034
001a69 25d4
001a6a 1e26
001a6b 29ab
001a6c 0e3d
001a6d f839
001a6e 096e
001a6f e914
001a70 f948
001a71 fece
001a72 ee1c
001a73 f6a4
001a74 07ad
001a75 f780
001a76 f60b
001a77 0b41
001a78 f035
001a79 f44c
001a7a f90b
001a7b 02ab
001a7c fed7
001a7d e921
001a7e ffbb
001a7f f987
001a80 ebda
001a81 0054
001a82 038b
001a83 f36f
001a84 fdb4
001a85 080f
001a86 e867
001a87 fef1
001a88 2556
001a89 20af
001a8a 23e6
001a8b 217d
001a8c 2349
001a8d 21fb
001a8e 22e0
001a8f 224c
001a90 229a
001a91 2280
001a92 226e
001a93 229a
001a94 2259
001a95 229e
001a96 2256
001a97 2292
001a98 2262
001a99 227a
001a9a 2278
001a9b 2257
001a9c 2296
001a9d 2231
001a9e 22b3
001a9f 220a
001aa0 22cf
001aa1 21ea
001aa2 22e5
001aa3 21d3
001aa4 22ed
001aa5 21c9
001aa6 22e4
001aa7 21d3
001aa8 22c4
001aa9 21f8
001aaa 2284
001aab 2244
001aac 2219
001aad 22c2
001aae 2180
001aaf 22ce
001ab0 f6b9
001ab1 fea8
001ab2 eecd
001ab3 f47f
001ab4 09ec
001ab5 f3ea
001ab6 f9c1
001ab7 0607
001ab8 f5e4
001ab9 ec76
001aba 02ad
001abb f29b
001abc ef38
001abd 0405
001abe ff91
001abf f11f
001ac0 0516
001ac1 daf0
001ac2 ec27
001ac3 fbc0
001ac4 f944
001ac5 0917
001ac6 e93e
001ac7 f8a9
001ac8 fd61
001ac9 f137
001aca ee28
001acb df30
001acc cbcd
001acd d338
001ace cf53
001acf d176
001ad0 d068
001ad1 d0c0
001ad2 d0ef
001ad3 d067
001ad4 d135
001ad5 d03c
001ad6 d159
001ad7 d02d
001ad8 d167
001ad9 d031
001ada d166
001adb d042
001adc d15c
001add d05b
001ade d14c
001adf d078
001ae0 d138
001ae1 d097
001ae2 d124
001ae3 d0b7
001ae4 d112
001ae5 d0d4
001ae6 d102
001ae7 d0ed
001ae8 d0f7
001ae9 d103
001aea d0ef
001aeb d115
001aec d0ec
001aed d123
001aee d0ed
001aef d12d
001af0 d0f1
001af1 d134
001af2 d0f8
001af3 d139
001af4 d0fe
001af5 d13d
001af6 d108
001af7 d140
001af8 d114
001af9 d143
001afa d11f
001afb d144
001afc d129
001afd d145
001afe d135
001aff d146
001b00 d142
001b01 d146
001b02 d14d
001b03 d146
001b04 d15b
001b05 d146
001b06 d168
001b07 d145
001b08 d175
001b09 d145
001b0a d17e
001b0b d14e
001b0c d17d
001b0d d167
001b0e d162
001b0f d1ac
001b10 d0f5
001b11 d288
001b12 cf40
001b13 d732
001b14 a7db
001b15 8000
001b16 8742
001b17 8000
001b18 860b
001b19 8000
001b1a 85f1      32767, 32767, 32755,  32767, 32744, 32767, 32736, 32767, 32734, 32767, 32734, 32767, 32738,  32767, 32743, 32767, 32750, 32767, 32755, 32767, 32761, 32767, 32765,  32766, 32767, 32764, 32767, 32763, 32767, 32762, 32767, 32764, 32767,  32767, 32766, 32767,                  32762, 32767, 32756, 32767, 32749, 32767, 32744,  32767, 32739, 32767, 32735, 32767, 32733, 32767, 32736, 32767, 32743,  32767, 32754, 32767, 32767, 32751, 32767, 32727, 32767, 32698, 32767,  32666, 32767, 32635, 32767, 32606, 32767, 32582, 32767, 32569,001b1b 0f23
001b1c 1ee8
001b1d 2af2
001b1e 3919
001b1f 4237
001b20 3eaf
001b21 40d6
001b22 3f7a
001b23 403a
001b24 3fd7
001b25 2d52
001b26 2a3e
001b27 2a4d
001b28 2c27
001b29 1d5a
001b2a 1363
001b2b 1649
001b2c 14de
001b2d 150a
001b2e 0235
001b2f ff06
001b30 0105
001b31 fea5
001b32 0239
001b33 f7d2
001b34 e9a7
001b35 eae7
001b36 eacf
001b37 ea50
001b38 eb36
001b39 e9fc
001b3a eb86
001b3b e99a
001b3c ec3b
001b3d e681
001b3e d552
001b3f d52e
001b40 d59c
001b41 d502
001b42 d5af
001b43 d4fe
001b44 d5ac
001b45 d508
001b46 d59a
001b47 d51e
001b48 d580
001b49 d53d
001b4a d55b
001b4b d568
001b4c d527
001b4d d5aa
001b4e d4ca
001b4f d645
001b50 d36d
001b51 e070
001b52 ecde
001b53 e96b
001b54 eb95
001b55 e9ea
001b56 eb5f
001b57 e9f3
001b58 eb87
001b59 e965
001b5a ee65
001b5b 000d
001b5c 0029
001b5d ff8a
001b5e 00e6
001b5f fe16
001b60 0cb7
001b61 171d
001b62 14b2
001b63 1505
001b64 2480
001b65 2ccd
001b66 293e
001b67 2c0b
001b68 3c59
001b69 41d2
001b6a 3e6e
001b6b 4199
001b6c 3e15
001b6d 42e3
001b6e 3412
001b6f 29fa
001b70 19d0
001b71 ff68
001b72 d986
001b73 b443
001b74 a941
001b75 8f30
001b76 8000
001b77 8031
001b78 8007
001b79 8001
001b7a 8056
001b7b 8000
001b7c 9237
001b7d 9572
001b7e 9a35
001b7f ae02
001b80 a765
001b81 bc29
001b82 bf63
001b83 c42e
001b84 d5c9
001b85 d57d
001b86 d46f
001b87 e574
001b88 ebc1
001b89 ed45
001b8a 0339
001b8b fc43
001b8c 0fd6
001b8d 144b
001b8e 2008
001b8f 2c9d
001b90 2a66
001b91 3e70
001b92 4094
001b93 3f38
001b94 4173
001b95 3205
001b96 22ba
001b97 06b3
001b98 d755
001b99 b3a4
001b9a 96e3
001b9b 8683
001b9c 8001
001b9d 814c
001b9e 8000
001b9f 8145
001ba0 8000
001ba1 904f
001ba2 95da
001ba3 984f
001ba4 ac99
001ba5 a871
001ba6 b709
001ba7 c258
001ba8 bdb4
001ba9 c58d
001baa d544
001bab d634
001bac d357
001bad dd84
001bae ebe0
001baf ead1
001bb0 e91f
001bb1 f5b4
001bb2 01fc
001bb3 ff58
001bb4 ff7b
001bb5 0da7
001bb6 180c
001bb7 12f0
001bb8 1b28
001bb9 2b75
001bba 29e6
001bbb 2bae
001bbc 28c6
001bbd 3637
001bbe 41e0
001bbf 3ef5
001bc0 40b2
001bc1 3f77
001bc2 406d
001bc3 3f9d
001bc4 405c
001bc5 3f98
001bc6 407e
001bc7 3f39
001bc8 4193
001bc9 32d7
001bca 2856
001bcb 2c40
001bcc 2945
001bcd 2c16
001bce 28ff
001bcf 2d26
001bd0 2208
001bd1 13f2
001bd2 15cf
001bd3 1535
001bd4 153c
001bd5 159b
001bd6 14d4
001bd7 1630
001bd8 1392
001bd9 1e04
001bda 2cf4
001bdb 2945
001bdc 2bc6
001bdd 29a2
001bde 2bc9
001bdf 2922
001be0 2eea
001be1 4052
001be2 3fe3
001be3 3ff8
001be4 4017
001be5 3fda
001be6 402a
001be7 3fcb
001be8 4038
001be9 3fbb
001bea 4051
001beb 3f87
001bec 40d0
001bed 2f8f
001bee 28f0
001bef 2c0c
001bf0 2922
001bf1 2cf9
001bf2 1bb2
001bf3 1444
001bf4 156e
001bf5 15d6
001bf6 03c8
001bf7 ff3f
001bf8 ffe0
001bf9 0148
001bfa f48d
001bfb e80a
001bfc ec6a
001bfd e931
001bfe ec08
001bff d77a
001c00 d58b
001c01 d470
001c02 d749
001c03 c845
001c04 be50
001c05 c08f
001c06 c087
001c07 b9fb
001c08 a786
001c09 ad9e
001c0a a293
001c0b 938a
001c0c 9741
001c0d 8db9
001c0e 8001
001c0f 8155
001c10 8000
001c11 80e5
001c12 8001
001c13 80f0
001c14 8000
001c15 852c
001c16 984b
001c17 a6fe
001c18 ba54
001c19 d159
001c1a f593       32767,  32569, 32767, 32590, 32767, 32634, 32767, 32708, 32767, 32767, 32637,  32767, 32437, 32767, 32129, 32767, 31585, 32767, 30196, 32767,     0, -32767,-30196,-32768,-31585,-32768,-32129,-32767,-32436,-32768,-32637, -32768,-32768,-32708,-32768,-32634                 ,-32768,-32590,-32768,-32569,-32768, -32569,-32768,-32581,-32768,-32606,-32767,-32635,-32768,-32667,-32768, -32699,-32768,-32727,-32768,-32752,-32768,-32768,-32754,-32768,-32742, -32768,-32737,-32768,-32734,-32768,-32734,-32768,-32738,-32768,-32743, -3276001c1b 2cfd
001c1c 455b
001c1d 3cd3
001c1e 4248
001c1f 3e33
001c20 4177
001c21 3ec3
001c22 410a
001c23 3f1b
001c24 40c2
001c25 3f58
001c26 408e
001c27 3f87
001c28 4064
001c29 3fab
001c2a 4044
001c2b 3fc8
001c2c 4029
001c2d 3fe0
001c2e 4014
001c2f 3ff3
001c30 4001
001c31 4007
001c32 3fef
001c33 401a
001c34 3fda
001c35 4030
001c36 3fc3
001c37 4049
001c38 3fa9
001c39 4065
001c3a 3f8b
001c3b 4085
001c3c 3f69
001c3d 40a6
001c3e 3f47
001c3f 40c8
001c40 3f27
001c41 40e6
001c42 3f0b
001c43 40fe
001c44 3efa
001c45 4108
001c46 3ef7
001c47 4101
001c48 3f0a
001c49 40df
001c4a 3f3b
001c4b 409b
001c4c 3f98
001c4d 401f
001c4e 403a
001c4f 3f4b
001c50 415c
001c51 3daf
001c52 43d0
001c53 3960
001c54 4dc4
001c55 bd6a
001c56 8000
001c57 8972
001c58 8000
001c59 8512
001c5a 8001
001c5b 834b
001c5c 8000
001c5d 8238
001c5e 8000
001c5f 8175
001c60 8000
001c61 80e1
001c62 8000
001c63 8070
001c64 8000
001c65 801b
001c66 8008
001c67 8000
001c68 803b
001c69 8000
001c6a 805a
001c6b 8000
001c6c 8067
001c6d 8000
001c6e 8069
001c6f 8000
001c70 8060
001c71 8000
001c72 8053
001c73 8000
001c74 8044
001c75 8000
001c76 8036
001c77 8000
001c78 802b
001c79 8001
001c7a 8029
001c7b 8000
001c7c 802e
001c7d 8000
001c7e 803a
001c7f 8000
001c80 8050
001c81 8001
001c82 806d
001c83 8000
001c84 8092
001c85 8000
001c86 80c0
001c87 8001
001c88 80f6
001c89 8000
001c8a 8144
001c8b 8000
001c8c 81e8
001c8d 8000
001c8e 8848
001c8f bed6
001c90 c080
001c91 bf6e
001c92 c0aa
001c93 bf4a
001c94 c0c2
001c95 bf3d
001c96 c0c3
001c97 bf46
001c98 c0b0
001c99 bf61
001c9a c08b
001c9b bf92
001c9c c04f
001c9d bfe0
001c9e bfea
001c9f c064
001ca0 bf2e
001ca1 c190
001ca2 bcc2
001ca3 cc48
001ca4 022f
001ca5 ff18
001ca6 fff2
001ca7 0111
001ca8 fd72
001ca9 05a8
001caa 9e04
001cab 8000
001cac 8540
001cad 8000
001cae 82f8
001caf 8000
001cb0 8210
001cb1 8000
001cb2 818a
001cb3 8000
001cb4 812b
001cb5 8001
001cb6 80e1
001cb7 8000
001cb8 80a0
001cb9 8000
001cba 805c
001cbb 8000
001cbc 8000
001cbd 804e
001cbe 8000
001cbf b602
001cc0 c339
001cc1 bdfb
001cc2 c191
001cc3 beae
001cc4 c130
001cc5 bee8
001cc6 c10a
001cc7 bf00
001cc8 c0fc
001cc9 bf08
001cca c0fc
001ccb bf02
001ccc c107
001ccd bef1
001cce c122
001ccf becb
001cd0 c15a
001cd1 be70
001cd2 c1ff
001cd3 bce9
001cd4 c962
001cd5 fff2
001cd6 ffe3
001cd7 ffea
001cd8 003c
001cd9 ffa9
001cda 006b
001cdb ff84
001cdc 008a
001cdd ff68
001cde 00a6
001cdf ff4c
001ce0 00c3
001ce1 ff2a
001ce2 00ec
001ce3 fef8
001ce4 012e
001ce5 fe9f
001ce6 01af
001ce7 fdd1
001ce8 0322
001ce9 fa66
001cea 16a8
001ceb 4566
001cec 3d30
001ced 41ce
001cee 3eb9
001cef 40ea
001cf0 3f57
001cf1 406f
001cf2 3fc1
001cf3 400d
001cf4 4021
001cf5 3fa9
001cf6 408f
001cf7 3f2c
001cf8 4124
001cf9 3e76
001cfa 420e
001cfb 3d33
001cfc 43f5
001cfd 39dc
001cfe 4bc1
001cff 0754
001d00 b35a
001d01 c6ee
001d02 bb2e
001d03 c3e1
001d04 bc36
001d05 c757
001d06 fced
001d07 012b
001d08 ff3f
001d09 0085
001d0a ffa8
001d0b 0033
001d0c ffea
001d0d fffd
001d0e 0016
001d0f ffde
001d10 002b
001d11 ffd3
001d12 0029
001d13 ffe3
001d14 0009
001d15 0017
001d16 ffbb
001d17 008d
001d18 feff
001d19 01de
001d1a fbf6      8,-32749,-32768,-32755,-32768,-32761,-32768,-32766,-32767,-32767, -32764,-32768,-32762,-32768,-32763,-32768,-32763,-32768,-32767,-32766, -32768,-32761,-32767,-32755,-32768,-32750,-32768,-32744,-32768,-32739, -32768,-32735,-32768,-32734,-32767,-32737,-3276                 7,-32743,-32768,-32755, -32768,-32768,-32751,-32768,-32726,-32767,-32699,-32768,-32667,-32768, -32635,-32768,-32606,-32767,-32582,-32768,-32569,-32768,-32570,-32768, -32590,-32768,-32634,-32768,-32708,-32767,-32768,-32638,-32767,-32436, -32768,-32129,-327001d1b 053f
001d1c 4c32
001d1d 4d35
001d1e 5c6e
001d1f 5efd
001d20 68b1
001d21 6bf2
001d22 738f
001d23 77bd
001d24 7f13
001d25 7fdc
001d26 7fff
001d27 7ff5
001d28 7ff8
001d29 7fff
001d2a 7fda
001d2b 7fff
001d2c 7fc5
001d2d 7fff
001d2e 7fba
001d2f 7fff
001d30 7fb6
001d31 7fff
001d32 7fb9
001d33 7fff
001d34 7fbf
001d35 7fff
001d36 7fc9
001d37 7fff
001d38 7fd5
001d39 7fff
001d3a 7fe1
001d3b 7fff
001d3c 7feb
001d3d 7fff
001d3e 7ff5
001d3f 7fff
001d40 7ffd
001d41 7ffe
001d42 7fff
001d43 7ff9
001d44 7fff
001d45 7ff5
001d46 7fff
001d47 7ff3
001d48 7fff
001d49 7ff3
001d4a 7fff
001d4b 7ff4
001d4c 7fff
001d4d 7ff5
001d4e 7fff
001d4f 7ff8
001d50 7fff
001d51 7ff9
001d52 7fff
001d53 7ffb
001d54 7fff
001d55 7ffd
001d56 7fff
001d57 7ffe
001d58 7fff
001d59 7ffe
001d5a 7fff
001d5b 7fff
001d5c 7fff
001d5d 7ffe
001d5e 7fff
001d5f 7ffd
001d60 7fff
001d61 7ffd
001d62 7fff
001d63 7ffc
001d64 7fff
001d65 7ffb
001d66 7fff
001d67 7ff9
001d68 7fff
001d69 7ffa
001d6a 7fff
001d6b 7ffa
001d6c 7fff
001d6d 7ffb
001d6e 7fff
001d6f 7ffd
001d70 7ffe
001d71 7fff
001d72 7ffa
001d73 7fff
001d74 7ff5
001d75 7fff
001d76 7fee
001d77 7fff
001d78 7fe6
001d79 7fff
001d7a 7fe0
001d7b 7fff
001d7c 7fda
001d7d 7fff
001d7e 7fd5
001d7f 7fff
001d80 7fd4
001d81 7fff
001d82 7fd6
001d83 7fff
001d84 7fdd
001d85 7fff
001d86 7fea
001d87 7fff
001d88 7ffc
001d89 7ff5
001d8a 7fff
001d8b 7fd8
001d8c 7fff
001d8d 7fb6
001d8e 7fff
001d8f 7f8c
001d90 7fff
001d91 7f5d
001d92 7fff
001d93 7f21
001d94 7fff
001d95 7ccb
001d96 7a11
001d97 73f3
001d98 7201
001d99 6b08
001d9a 68fa
001d9b 6088
001d9c 5dd1
001d9d 523e
001d9e 4dd2
001d9f 2f35
001da0 c64c
001da1 b07d
001da2 a9e4
001da3 9fac
001da4 9b61
001da5 930c
001da6 8f6a
001da7 87a3
001da8 82f0
001da9 8000
001daa 8114
001dab 8000
001dac 80dd
001dad 8000
001dae 80b1
001daf 8000
001db0 8088
001db1 8000
001db2 8063
001db3 8000
001db4 803f
001db5 8001
001db6 8021
001db7 8000
001db8 8009
001db9 8003
001dba 8000
001dbb 8014
001dbc 8000
001dbd 801f
001dbe 8000
001dbf 8024
001dc0 8000
001dc1 8027
001dc2 8000
001dc3 8026
001dc4 8000
001dc5 8021
001dc6 8000
001dc7 801c
001dc8 8000
001dc9 8016
001dca 8000
001dcb 8010
001dcc 8000
001dcd 800a
001dce 8000
001dcf 8005
001dd0 8000
001dd1 8001
001dd2 8003
001dd3 8000
001dd4 8005
001dd5 8000
001dd6 8006
001dd7 8001
001dd8 8008
001dd9 8000
001dda 8007
001ddb 8000
001ddc 8006
001ddd 8000
001dde 8006
001ddf 8000
001de0 8004
001de1 8000
001de2 8002
001de3 8002
001de4 8001
001de5 8004
001de6 8000
001de7 8007
001de8 8000
001de9 800a
001dea 8000
001deb 800c
001dec 8000
001ded 800e
001dee 8000
001def 800f
001df0 8001
001df1 800f
001df2 8001
001df3 800e
001df4 8000
001df5 800b
001df6 8000
001df7 8006
001df8 8001
001df9 8000
001dfa 800a
001dfb 8001
001dfc 8013
001dfd 8000
001dfe 8021
001dff 8000
001e00 802f
001e01 8000
001e02 803c
001e03 8001
001e04 8048
001e05 8000
001e06 8051
001e07 8000
001e08 8057
001e09 8000
001e0a 8056
001e0b 8000
001e0c 804d
001e0d 8000
001e0e 803c
001e0f 8001
001e10 82f8
001e11 8707
001e12 8a5d
001e13 8ec7
001e14 91e9
001e15 97a0
001e16 9a91
001e17 a2bb
001e18 a554
001e19 b33c
001e1a b499      68,-31585,-32767,-30196,-32768
                 ;fm synth 2
001e1b 0726
001e1c 28e0
001e1d 2eb9
001e1e 1998
001e1f 0afc
001e20 2d4f
001e21 43c3
001e22 3825
001e23 2016
001e24 219a
001e25 3c39
001e26 4953
001e27 450a
001e28 328d
001e29 3141
001e2a 468a
001e2b 5262
001e2c 4a28
001e2d 3785
001e2e 3cb2
001e2f 5045
001e30 5390
001e31 43bc
001e32 3a1a
001e33 4ad8
001e34 55f8
001e35 5046
001e36 4654
001e37 44a6
001e38 486e
001e39 4eb9
001e3a 55a6
001e3b 532c
001e3c 4c5d
001e3d 4e1c
001e3e 54be
001e3f 5658
001e40 5a7e
001e41 5e70
001e42 5e27
001e43 5c4b
001e44 5ee6
001e45 633e
001e46 65ce
001e47 6880
001e48 6b4e
001e49 6ce6
001e4a 690f
001e4b 69e8
001e4c 71b8
001e4d 7715
001e4e 7226
001e4f 6b78
001e50 6f80
001e51 7923
001e52 78e2
001e53 753d
001e54 6f4b
001e55 75e7
001e56 7971
001e57 79a0
001e58 73cb
001e59 7513
001e5a 78d1
001e5b 782e
001e5c 734f
001e5d 7323
001e5e 7842
001e5f 7604
001e60 731e
001e61 6ac5
001e62 69bc
001e63 6885
001e64 7538
001e65 6cc7
001e66 5bc4
001e67 4c99
001e68 7858
001e69 3b3e
001e6a a1cf
001e6b 8ffc
001e6c 479a
001e6d 3d46
001e6e 894a
001e6f 81e5
001e70 924a
001e71 abc0
001e72 867e
001e73 8125
001e74 8261
001e75 8405
001e76 82f9
001e77 8000
001e78 81be
001e79 806e
001e7a 8326
001e7b 8000
001e7c 814e
001e7d 8000
001e7e 85a8
001e7f 83d2
001e80 8271
001e81 8001
001e82 8663
001e83 8e6a
001e84 8d36
001e85 8548
001e86 8978
001e87 94d9
001e88 add1
001e89 aa6f
001e8a 9f60
001e8b 9fe1
001e8c dba6
001e8d 2acf
001e8e 03c7
001e8f cfeb
001e90 11a9
001e91 4f0c
001e92 4787
001e93 1b8b
001e94 2783
001e95 5278
001e96 53e3
001e97 28b3
001e98 07e7
001e99 30d3
001e9a 470c
001e9b 21ee
001e9c d999
001e9d ca43
001e9e ec64
001e9f eaf8
001ea0 bdd4
001ea1 ab85
001ea2 b632
001ea3 b6f2
001ea4 a539
001ea5 9e29
001ea6 a7a5
001ea7 a7ee
001ea8 9db9
001ea9 9a62
001eaa a14e
001eab a4e4
001eac a49b
001ead a48e
001eae a7b1
001eaf ac5f
001eb0 b215
001eb1 b371
001eb2 b6fe
001eb3 cd77
001eb4 f9a0
001eb5 f982
001eb6 d4a5
001eb7 e622
001eb8 2a6c
001eb9 46b0
001eba 3ea9
001ebb 3652
001ebc 3b5c
001ebd 49f3
001ebe 5337
001ebf 57bb
001ec0 5431
001ec1 54a7
001ec2 569b
001ec3 54d4
001ec4 4ba2
001ec5 4ea7
001ec6 59bc
001ec7 59eb
001ec8 439a
001ec9 2d7c
001eca 4176
001ecb 52af
001ecc 459a
001ecd 1649
001ece 065b
001ecf 242c
001ed0 23f1
001ed1 03b2
001ed2 e87e
001ed3 e277
001ed4 e13d
001ed5 f3ea
001ed6 ea48
001ed7 c7f2
001ed8 c332
001ed9 e439
001eda e80d
001edb c60c
001edc c114
001edd d19e
001ede daa1
001edf d33f
001ee0 d15d
001ee1 d781
001ee2 e5cc
001ee3 ebd4
001ee4 e264
001ee5 e0cf
001ee6 f0d5
001ee7 fe11
001ee8 0a1b
001ee9 153b
001eea 10ff
001eeb 0b55
001eec 1811
001eed 1ff8
001eee 23ec
001eef 2a19
001ef0 22c3
001ef1 0069
001ef2 01c1
001ef3 2b53
001ef4 397c
001ef5 16fd
001ef6 e01d
001ef7 e5d2
001ef8 15cb
001ef9 2f04
001efa fd3a
001efb c5d9
001efc ca88
001efd ff93
001efe 0485
001eff ce7b
001f00 c3f7
001f01 d7eb
001f02 d554
001f03 bf46
001f04 c50a
001f05 dcf5
001f06 d7be
001f07 bcf7
001f08 b6e0
001f09 c68a
001f0a dbc3
001f0b db07
001f0c cc5a
001f0d c2e3
001f0e c2d6
001f0f da05
001f10 f856
001f11 e882
001f12 ccbb
001f13 dd35
001f14 0278
001f15 f7e2
001f16 de34
001f17 fe26
001f18 1e55
001f19 0cec
001f1a ef46      .dw 527,  5334,  9606, 13051, 15881, 18006, 19622, 20680, 21348,  21556, 21412, 20822, 19831, 18314, 16266, 13557, 10183,  6051,  1228,  -4264,-10208,-16363,-22273,-27434,-31151,-32733,-31465,-26878,-18871,  -8200,  3588, 15344, 24637, 29171, 27710, 20217                 ,  7858, -6930,-20948, -30459,-32355,-24847, -9582,  8425, 23493, 29421, 23725,  8678,-10532, -26530,-32753,-25065, -6313, 14798, 28143, 26548, 11235,-10333,-27900, -32213,-19626,  3191, 23343, 29104, 17274, -4770,-25281,-32633,-21410,   1963, 23108, 2905001f1b 0568
001f1c 1977
001f1d 2cb3
001f1e 3ea7
001f1f 4e3f
001f20 5b35
001f21 653d
001f22 6c8e
001f23 7162
001f24 7442
001f25 75ab
001f26 762d
001f27 7630
001f28 7619
001f29 7610
001f2a 7623
001f2b 761d
001f2c 759e
001f2d 7403
001f2e 707f
001f2f 6a0c
001f30 5fac
001f31 5059
001f32 3b9e
001f33 2181
001f34 03d2
001f35 e3ec
001f36 c2fc
001f37 a535
001f38 8ea4
001f39 827d
001f3a 827f
001f3b 8eea
001f3c a65f
001f3d c643
001f3e eb0b
001f3f 10d0
001f40 33db
001f41 510f
001f42 664b
001f43 7288
001f44 75de
001f45 7153
001f46 669f
001f47 57c2
001f48 46ce
001f49 3592
001f4a 2589
001f4b 17a3
001f4c 0c77
001f4d 0434
001f4e fee8
001f4f fc71
001f50 fcb5
001f51 ff9a
001f52 0508
001f53 0ce3
001f54 16f8
001f55 22ee
001f56 303e
001f57 3e3c
001f58 4c1b
001f59 5904
001f5a 6429
001f5b 6ce1
001f5c 72b4
001f5d 756e
001f5e 751e
001f5f 720f
001f60 6cc3
001f61 65d9
001f62 5e02
001f63 55f3
001f64 4e4d
001f65 47a9
001f66 4272
001f67 3f13
001f68 3dbd
001f69 3e9f
001f6a 41b6
001f6b 46f0
001f6c 4e03
001f6d 5682
001f6e 5fb5
001f6f 68a9
001f70 701f
001f71 749f
001f72 7486
001f73 6e42
001f74 6095
001f75 4af2
001f76 2dfe
001f77 0c0f
001f78 e889
001f79 c4e8
001f7a a55d
001f7b 8e47
001f7c 81e9
001f7d 812c
001f7e 8b40
001f7f 9e69
001f80 b7fd
001f81 d540
001f82 f369
001f83 1041
001f84 2a05
001f85 3fc6
001f86 5109
001f87 5e05
001f88 671f
001f89 6d26
001f8a 70c5
001f8b 72d4
001f8c 73cb
001f8d 743c
001f8e 7433
001f8f 73ee
001f90 730c
001f91 717d
001f92 6e98
001f93 6a27
001f94 6374
001f95 5a5f
001f96 4e78
001f97 3fec
001f98 2ec6
001f99 1ba5
001f9a 0717
001f9b f1fb
001f9c dd3a
001f9d c98a
001f9e b7e3
001f9f a87b
001fa0 9c0b
001fa1 921a
001fa2 8b21
001fa3 8605
001fa4 8337
001fa5 8134
001fa6 80ae
001fa7 8000
001fa8 8053
001fa9 8013
001faa 810d
001fab 81dc
001fac 84da
001fad 88d8
001fae 9093
001faf 9ae0
001fb0 aa5c
001fb1 bd7d
001fb2 d5ed
001fb3 f17a
001fb4 fd9b
001fb5 1723
001fb6 33c6
001fb7 4cb1
001fb8 62cc
001fb9 703e
001fba 7559
001fbb 6de0
001fbc 5bbb
001fbd 3e15
001fbe 1a3d
001fbf f394
001fc0 ce99
001fc1 acf2
001fc2 9453
001fc3 850b
001fc4 803a
001fc5 83ae
001fc6 8e44
001fc7 9d2e
001fc8 aece
001fc9 c0fc
001fca d283
001fcb e244
001fcc efa4
001fcd fa52
001fce 020c
001fcf 06ff
001fd0 08fc
001fd1 0857
001fd2 04dd
001fd3 fef6
001fd4 f674
001fd5 ebde
001fd6 df2d
001fd7 d129
001fd8 c21b
001fd9 b2ff
001fda a470
001fdb 9779
001fdc 8cc6
001fdd 852f
001fde 810c
001fdf 80af
001fe0 83ec
001fe1 8a69
001fe2 9375
001fe3 9e48
001fe4 a9ee
001fe5 b584
001fe6 c041
001fe7 c974
001fe8 d0a9
001fe9 d579
001fea d7b6
001feb d734
001fec d3ed
001fed cde0
001fee c539
001fef ba4b
001ff0 adbc
001ff1 a074
001ff2 93c1
001ff3 8929
001ff4 8263
001ff5 8116
001ff6 869a
001ff7 93c2
001ff8 a892
001ff9 c432
001ffa e4e0
001ffb 0811
001ffc 2ab7
001ffd 49a2
001ffe 61d7
001fff 7110
002000 75fb
002001 706e
002002 6179
002003 4b25
002004 3047
002005 13f1
002006 f932
002007 e0a1
002008 cacf
002009 b8c9
00200a aaa7
00200b a021
00200c 98a8
00200d 93aa
00200e 90a4
00200f 8f31
002010 8f1b
002011 9054
002012 92f4
002013 9730
002014 9d4d
002015 a5a1
002016 b056
002017 bd96
002018 cd29
002019 decd
00201a f17d      6, 16521, -6162,-26394,-32407,-19632,  4135, 24331,  28709, 15398, -7058,-26557,-32478,-20677,  1803, 22288, 29366, 19939,    114,-20369,-31974,-28954,-12558,  8611, 25011, 29151, 20318,  3297, -15304,-28733,-32585,-25326,-10004,  7503, 22033, 29076, 2731                 7, 18441,   5214, -8983,-21358,-29622,-32700,-30323,-23393,-13355, -2472,  7926,  17034, 23753, 27820, 29386, 28873, 26789, 23648, 19910, 15956, 12080,   8498,  5345,  2716,   661,  -797, -1647, -1888, -1519,  -539,  1048,   3230,  5984,  9246, 12926, 16800201b 0dd3
00201c 3647
00201d 5b3d
00201e 74e0
00201f 7f96
002020 7ca9
002021 70b8
002022 6163
002023 534b
002024 49aa
002025 45d9
002026 47df
002027 4e9e
002028 586b
002029 6331
00202a 6cf4
00202b 7470
00202c 7935
00202d 7b9e
00202e 7c2e
00202f 7ae0
002030 76c2
002031 6db0
002032 5d47
002033 4377
002034 207d
002035 f77a
002036 ce2c
002037 aabc
002038 9169
002039 83df
00203a 8001
00203b 8202
00203c 85c4
00203d 885e
00203e 8877
00203f 863d
002040 830a
002041 808b
002042 8027
002043 823c
002044 8629
002045 8a57
002046 8d19
002047 8d10
002048 8a02
002049 84f1
00204a 80a5
00204b 8123
00204c 8ae0
00204d a0ca
00204e c2d7
00204f ebb1
002050 1414
002051 3836
002052 53c1
002053 65ac
002054 6fdb
002055 7473
002056 7564
002057 7336
002058 6dc1
002059 6457
00205a 56fe
00205b 469d
00205c 3540
00205d 25a3
00205e 1a27
00205f 148b
002060 1612
002061 1f2c
002062 2fae
002063 45b2
002064 5dc8
002065 727b
002066 7e70
002067 7e6c
002068 7286
002069 5e01
00206a 45e1
00206b 2f0f
00206c 1d33
00206d 1250
00206e 0ee9
00206f 12f1
002070 1d6e
002071 2ce0
002072 3ee9
002073 511a
002074 610c
002075 6d1e
002076 74fb
002077 7935
002078 7abe
002079 7a16
00207a 76bd
00207b 6f32
00207c 6168
00207d 4c06
00207e 2f0c
00207f 0ca5
002080 e910
002081 c89c
002082 aeb6
002083 9ca4
002084 9196
002085 8bfd
002086 8a4e
002087 8bcd
002088 90ca
002089 9a2d
00208a a8ca
00208b bc5e
00208c d371
00208d eb6b
00208e 0149
00208f 12db
002090 1e74
002091 2340
002092 20e2
002093 1745
002094 0690
002095 ef98
002096 d49f
002097 b8f6
002098 a07f
002099 8e71
00209a 83f0
00209b 8025
00209c 80ad
00209d 8286
00209e 837d
00209f 82b6
0020a0 80dc
0020a1 800a
0020a2 82e0
0020a3 8b7f
0020a4 9abd
0020a5 af5b
0020a6 c684
0020a7 dccf
0020a8 ef1b
0020a9 fb64
0020aa 00a0
0020ab fe5e
0020ac f4d3
0020ad e4d1
0020ae d03b
0020af b977
0020b0 a3e2
0020b1 927f
0020b2 8701
0020b3 8163
0020b4 8000
0020b5 8089
0020b6 8100
0020b7 809c
0020b8 8000
0020b9 8146
0020ba 8731
0020bb 943d
0020bc a91f
0020bd c48b
0020be e308
0020bf 0091
0020c0 19f0
0020c1 2ce1
0020c2 38bc
0020c3 3da1
0020c4 3bee
0020c5 33e1
0020c6 25be
0020c7 1266
0020c8 fb6d
0020c9 e35d
0020ca ccf7
0020cb ba46
0020cc acbc
0020cd a49e
0020ce a1c7
0020cf a439
0020d0 ac80
0020d1 bbc0
0020d2 d26e
0020d3 f166
0020d4 17b8
0020d5 3de0
0020d6 5c2e
0020d7 702a
0020d8 7abf
0020d9 7ef1
0020da 7ff1
0020db 7fff
0020dc 7ffd
0020dd 7f86
0020de 7d6e
0020df 7877
0020e0 700e
0020e1 64db
0020e2 58b6
0020e3 4e1a
0020e4 4782
0020e5 469d
0020e6 4c3f
0020e7 57d4
0020e8 6718
0020e9 75f0
0020ea 7f0b
0020eb 7dbf
0020ec 6f7c
0020ed 5585
0020ee 341a
0020ef 1151
0020f0 f201
0020f1 d94c
0020f2 c87d
0020f3 bf24
0020f4 bc7f
0020f5 bfc2
0020f6 c84f
0020f7 d555
0020f8 e583
0020f9 f6fa
0020fa 0769
0020fb 14c6
0020fc 1d6c
0020fd 200e
0020fe 1bd3
0020ff 0ffb
002100 fc88
002101 e1fc
002102 c326
002103 a4a9
002104 8ccc
002105 80c7
002106 836f
002107 9373
002108 abd3
002109 c61e
00210a dcb5
00210b ecb9
00210c f4eb
00210d f5b5
00210e efd5
00210f e4af
002110 d5eb
002111 c5de
002112 b6ed
002113 aaf6
002114 a2f2
002115 9f59
002116 a05c
002117 a6e8
002118 b449
002119 ca5c
00211a e8e3      52, 20800, 24444, 27381, 29125, 29143,  26930, 22101, 14591,  4893, -5809,-16761,-26122,-31755,-32328,-27291, -17203, -3652, 10740, 22769, 29011, 26965, 15908,  -950,-18389,-30505, -31920,-22214, -4716, 14206, 27152, 27955, 14734, -6509,-25733,-32738, -23                 780, -3736, 17517, 29040, 23284,  2634,-20775,-32642,-25416, -4245,  18515, 29344, 20174, -3635,-26191,-32257,-18075,  6245, 25783, 27338,   8874,-16924,-32186,-26426, -4765, 18772, 29372, 19180, -5212,-27124, -31987,-17460,  6262, 25323, 28063, 12188,-1200211b 4b51
00211c 7a5c
00211d 66ef
00211e 7224
00211f 676c
002120 6e6b
002121 666a
002122 6b6f
002123 6506
002124 6899
002125 6375
002126 65ea
002127 61bd
002128 635d
002129 5fe7
00212a 60de
00212b 5e02
00212c 5e76
00212d 5c06
00212e 5c24
00212f 59e9
002130 59ed
002131 57bd
002132 57cd
002133 557b
002134 55b8
002135 532a
002136 53b3
002137 50d2
002138 51bb
002139 4e69
00213a 4fcb
00213b 4c01
00213c 4de0
00213d 4992
00213e 4c0a
00213f 46d6
002140 4b4e
002141 3c9e
002142 c489
002143 b933
002144 bfc8
002145 bc67
002146 c160
002147 bec3
002148 c340
002149 c10a
00214a c525
00214b c354
00214c c70a
00214d c5a2
00214e c8eb
00214f c7f2
002150 cad2
002151 ca3e
002152 ccbb
002153 cc85
002154 ceae
002155 cec6
002156 d0a7
002157 d0f9
002158 d2ab
002159 d31f
00215a d4c2
00215b d537
00215c d6e1
00215d d741
00215e d90b
00215f d942
002160 db48
002161 db2c
002162 dd95
002163 dcfc
002164 e007
002165 de97
002166 e2f4
002167 dee2
002168 ed1c
002169 1d66
00216a 1b3f
00216b 1ae2
00216c 19a3
00216d 186c
00216e 17c1
00216f 1617
002170 15c1
002171 13e0
002172 13ac
002173 11b6
002174 1188
002175 0f93
002176 0f62
002177 0d79
002178 0d33
002179 0b63
00217a 0b02
00217b 0951
00217c 08cf
00217d 0740
00217e 069d
00217f 052f
002180 046d
002181 031a
002182 0244
002183 00f6
002184 0000
002185 0003
002186 fff9
002187 000a
002188 fff4
002189 000d
00218a fff1
00218b 0010
00218c ffef
00218d 0012
00218e ffee
00218f 0011
002190 fff0
002191 000f
002192 fff2
002193 000d
002194 fff5
002195 000a
002196 fff8
002197 0007
002198 fffa
002199 0003
00219a ffff
00219b ffff
00219c 0005
00219d fff7
00219e 00a4
00219f 01c3
0021a0 02d2
0021a1 03df
0021a2 04f8
0021a3 05fd
0021a4 071f
0021a5 081d
0021a6 0944
0021a7 0a39
0021a8 0b67
0021a9 0c59
0021aa 0d89
0021ab 0e78
0021ac 0faa
0021ad 1098
0021ae 11c9
0021af 12b8
0021b0 13e4
0021b1 14da
0021b2 15fe
0021b3 16fd
0021b4 1814
0021b5 1923
0021b6 1a25
0021b7 1b4b
0021b8 1c33
0021b9 1d72
0021ba 1e3e
0021bb 1f9d
0021bc 204a
0021bd 21c6
0021be 2251
0021bf 23ef
0021c0 245b
0021c1 2615
0021c2 2667
0021c3 2834
0021c4 2879
0021c5 2a4d
0021c6 2a91
0021c7 2c5a
0021c8 2cb1
0021c9 2e60
0021ca 2edf
0021cb 3055
0021cc 311b
0021cd 3236
0021ce 3368
0021cf 3408
0021d0 35c9
0021d1 35bd
0021d2 3848
0021d3 3749
0021d4 3af6
0021d5 389c
0021d6 3df5
0021d7 396e
0021d8 41e0
0021d9 384b
0021da 4b60
0021db 0a74
0021dc b35a
0021dd c2b5
0021de b8ec
0021df bd63
0021e0 b8aa
0021e1 ba12
0021e2 b76b
0021e3 b756
0021e4 b5d9
0021e5 b4e1
0021e6 b413
0021e7 b28e
0021e8 b231
0021e9 b05d
0021ea b038
0021eb ae45
0021ec ae2b
0021ed ac3c
0021ee ac13
0021ef aa43
0021f0 a9f5
0021f1 a84e
0021f2 a7cf
0021f3 a663
0021f4 a5a8
0021f5 a479
0021f6 a384
0021f7 a289
0021f8 a16a
0021f9 a094
0021fa 9f58
0021fb 9e96
0021fc 9d4f
0021fd 9c8c
0021fe 9b57
0021ff 9a76
002200 996f
002201 984f
002202 9793
002203 9620
002204 95c6
002205 93e8
002206 93ff
002207 91a2
002208 926f
002209 9094
00220a 92c0
00220b 9063
00220c 9310
00220d 9041
00220e 9359
00220f 9027
002210 938e
002211 901d
002212 93af
002213 903f
002214 93a4
002215 9087
002216 934f
002217 9131
002218 929a
002219 927f
00221a 9348      
                 ;-------------------------------------------------------------------------------------------------------------------
                 


RESOURCE USE INFORMATION
------------------------

Notice:
The register and instruction counts are symbol table hit counts,
and hence implicitly used resources are not counted, eg, the
'lpm' instruction without operands implicitly uses r0 and z,
none of which are counted.

x,y,z are separate entities in the symbol table and are
counted separately from r26..r31 here.

.dseg memory usage only counts static data declared with .byte

"ATmega32A" register use summary:
r0 :  41 r1 :  18 r2 :   3 r3 :   3 r4 :   5 r5 :   2 r6 :   2 r7 :   4 
r8 :  28 r9 :   6 r10:   6 r11:   4 r12:   0 r13:   0 r14:   0 r15:   0 
r16: 547 r17: 303 r18: 183 r19: 136 r20:  91 r21:  61 r22:  83 r23:  75 
r24: 141 r25:  31 r26:  41 r27:  31 r28:  18 r29:  18 r30: 103 r31:  75 
x  :   5 y  :   4 z  :  33 
Registers used: 31 out of 35 (88.6%)

"ATmega32A" instruction use summary:
.lds  :   0 .sts  :   0 adc   :  74 add   :  73 adiw  :   1 and   :   0 
andi  :   5 asr   :   4 bclr  :   0 bld   :  27 brbc  :   0 brbs  :   0 
brcc  :  15 brcs  :  18 break :   0 breq  :  63 brge  :   2 brhc  :   0 
brhs  :   0 brid  :   0 brie  :   0 brlo  :  26 brlt  :   0 brmi  :   0 
brne  :  36 brpl  :   4 brsh  :   7 brtc  :   0 brts  :   7 brvc  :   6 
brvs  :   0 bset  :   0 bst   :  20 call  :  44 cbi   :  16 cbr   :   2 
clc   :   2 clh   :   0 cli   :   3 cln   :   0 clr   :  34 cls   :   0 
clt   :   4 clv   :   0 clz   :   0 com   :   4 cp    :  17 cpc   :  11 
cpi   :  76 cpse  :   0 dec   :  16 eor   :   2 fmul  :   0 fmuls :   0 
fmulsu:   0 icall :   0 ijmp  :   0 in    :  18 inc   :  15 jmp   :  24 
ld    :  20 ldd   :   0 ldi   : 346 lds   : 157 lpm   :  33 lsl   :  17 
lsr   :  28 mov   :  88 movw  :  14 mul   :  14 muls  :   0 mulsu :   8 
neg   :   1 nop   :  40 or    :   1 ori   :   1 out   :  41 pop   :  48 
push  :  46 rcall :  63 ret   :  47 reti  :   3 rjmp  :  91 rol   :  25 
ror   :   9 sbc   :  24 sbci  :   2 sbi   :  25 sbic  :   2 sbis  :   1 
sbiw  :  13 sbr   :   2 sbrc  :   9 sbrs  :  21 sec   :   0 seh   :   0 
sei   :   1 sen   :   0 ser   :   0 ses   :   0 set   :   5 sev   :   0 
sez   :   0 sleep :   0 spm   :   0 st    :  11 std   :   0 sts   : 261 
sub   :  19 subi  :  29 swap  :   4 tst   :  33 wdr   :   0 
Instructions used: 73 out of 113 (64.6%)

"ATmega32A" memory use summary [bytes]:
Segment   Begin    End      Code   Data   Used    Size   Use%
---------------------------------------------------------------
[.cseg] 0x000000 0x004436   5498  11964  17462   32768  53.3%
[.dseg] 0x000060 0x0001ba      0    346    346    2048  16.9%
[.eseg] 0x000000 0x000000      0      0      0    1024   0.0%

Assembly complete, 0 errors, 6 warnings
